(self.webpackChunkitsxtrapush=self.webpackChunkitsxtrapush||[]).push([[212],{4159(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,a="millisecond",i="second",r="minute",s="hour",o="day",l="week",c="month",d="quarter",u="year",h="date",p="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,x={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},f=function(e,t,n){var a=String(e);return!a||a.length>=t?e:""+Array(t+1-a.length).join(n)+e},b={s:f,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),a=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+f(a,2,"0")+":"+f(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var a=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(a,c),r=n-i<0,s=t.clone().add(a+(r?-1:1),c);return+(-(a+(n-i)/(r?i-s:s-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:u,w:l,d:o,D:h,h:s,m:r,s:i,ms:a,Q:d}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},v="en",y={};y[v]=x;var M="$isDayjsObject",w=function(e){return e instanceof I||!(!e||!e[M])},A=function e(t,n,a){var i;if(!t)return v;if("string"==typeof t){var r=t.toLowerCase();y[r]&&(i=r),n&&(y[r]=n,i=r);var s=t.split("-");if(!i&&s.length>1)return e(s[0])}else{var o=t.name;y[o]=t,i=o}return!a&&i&&(v=i),i||!a&&v},S=function(e,t){if(w(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new I(n)},j=b;j.l=A,j.i=w,j.w=function(e,t){return S(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var I=function(){function x(e){this.$L=A(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[M]=!0}var f=x.prototype;return f.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(j.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var a=t.match(g);if(a){var i=a[2]-1||0,r=(a[7]||"0").substring(0,3);return n?new Date(Date.UTC(a[1],i,a[3]||1,a[4]||0,a[5]||0,a[6]||0,r)):new Date(a[1],i,a[3]||1,a[4]||0,a[5]||0,a[6]||0,r)}}return new Date(t)}(e),this.init()},f.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},f.$utils=function(){return j},f.isValid=function(){return!(this.$d.toString()===p)},f.isSame=function(e,t){var n=S(e);return this.startOf(t)<=n&&n<=this.endOf(t)},f.isAfter=function(e,t){return S(e)<this.startOf(t)},f.isBefore=function(e,t){return this.endOf(t)<S(e)},f.$g=function(e,t,n){return j.u(e)?this[t]:this.set(n,e)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(e,t){var n=this,a=!!j.u(t)||t,d=j.p(e),p=function(e,t){var i=j.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return a?i:i.endOf(o)},g=function(e,t){return j.w(n.toDate()[e].apply(n.toDate("s"),(a?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},m=this.$W,x=this.$M,f=this.$D,b="set"+(this.$u?"UTC":"");switch(d){case u:return a?p(1,0):p(31,11);case c:return a?p(1,x):p(0,x+1);case l:var v=this.$locale().weekStart||0,y=(m<v?m+7:m)-v;return p(a?f-y:f+(6-y),x);case o:case h:return g(b+"Hours",0);case s:return g(b+"Minutes",1);case r:return g(b+"Seconds",2);case i:return g(b+"Milliseconds",3);default:return this.clone()}},f.endOf=function(e){return this.startOf(e,!1)},f.$set=function(e,t){var n,l=j.p(e),d="set"+(this.$u?"UTC":""),p=(n={},n[o]=d+"Date",n[h]=d+"Date",n[c]=d+"Month",n[u]=d+"FullYear",n[s]=d+"Hours",n[r]=d+"Minutes",n[i]=d+"Seconds",n[a]=d+"Milliseconds",n)[l],g=l===o?this.$D+(t-this.$W):t;if(l===c||l===u){var m=this.clone().set(h,1);m.$d[p](g),m.init(),this.$d=m.set(h,Math.min(this.$D,m.daysInMonth())).$d}else p&&this.$d[p](g);return this.init(),this},f.set=function(e,t){return this.clone().$set(e,t)},f.get=function(e){return this[j.p(e)]()},f.add=function(a,d){var h,p=this;a=Number(a);var g=j.p(d),m=function(e){var t=S(p);return j.w(t.date(t.date()+Math.round(e*a)),p)};if(g===c)return this.set(c,this.$M+a);if(g===u)return this.set(u,this.$y+a);if(g===o)return m(1);if(g===l)return m(7);var x=(h={},h[r]=t,h[s]=n,h[i]=e,h)[g]||1,f=this.$d.getTime()+a*x;return j.w(f,this)},f.subtract=function(e,t){return this.add(-1*e,t)},f.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var a=e||"YYYY-MM-DDTHH:mm:ssZ",i=j.z(this),r=this.$H,s=this.$m,o=this.$M,l=n.weekdays,c=n.months,d=n.meridiem,u=function(e,n,i,r){return e&&(e[n]||e(t,a))||i[n].slice(0,r)},h=function(e){return j.s(r%12||12,e,"0")},g=d||function(e,t,n){var a=e<12?"AM":"PM";return n?a.toLowerCase():a};return a.replace(m,function(e,a){return a||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return j.s(t.$y,4,"0");case"M":return o+1;case"MM":return j.s(o+1,2,"0");case"MMM":return u(n.monthsShort,o,c,3);case"MMMM":return u(c,o);case"D":return t.$D;case"DD":return j.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return u(n.weekdaysMin,t.$W,l,2);case"ddd":return u(n.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(r);case"HH":return j.s(r,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return g(r,s,!0);case"A":return g(r,s,!1);case"m":return String(s);case"mm":return j.s(s,2,"0");case"s":return String(t.$s);case"ss":return j.s(t.$s,2,"0");case"SSS":return j.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")})},f.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},f.diff=function(a,h,p){var g,m=this,x=j.p(h),f=S(a),b=(f.utcOffset()-this.utcOffset())*t,v=this-f,y=function(){return j.m(m,f)};switch(x){case u:g=y()/12;break;case c:g=y();break;case d:g=y()/3;break;case l:g=(v-b)/6048e5;break;case o:g=(v-b)/864e5;break;case s:g=v/n;break;case r:g=v/t;break;case i:g=v/e;break;default:g=v}return p?g:j.a(g)},f.daysInMonth=function(){return this.endOf(c).$D},f.$locale=function(){return y[this.$L]},f.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),a=A(e,t,!0);return a&&(n.$L=a),n},f.clone=function(){return j.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},x}(),D=I.prototype;return S.prototype=D,[["$ms",a],["$s",i],["$m",r],["$H",s],["$W",o],["$M",c],["$y",u],["$D",h]].forEach(function(e){D[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),S.extend=function(e,t){return e.$i||(e(t,I,S),e.$i=!0),S},S.locale=A,S.isDayjs=w,S.unix=function(e){return S(1e3*e)},S.en=y[v],S.Ls=y,S.p={},S}()},4212(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>re});var a=n(9950),i=n(55547),r=n(11888),s=n(52036),o=n(89379),l=n(80045),c=n(72004),d=n(65698),u=n(96195),h=n(48802),p=n(54212),g=n(43396);function m(e){return(0,g.Ay)("MuiCardActions",e)}(0,p.A)("MuiCardActions",["root","spacing"]);var x=n(44414);const f=["disableSpacing","className"],b=(0,u.Ay)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,variants:[{props:{disableSpacing:!1},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),v=a.forwardRef(function(e,t){const n=(0,h.b)({props:e,name:"MuiCardActions"}),{disableSpacing:a=!1,className:i}=n,r=(0,l.A)(n,f),s=(0,o.A)((0,o.A)({},n),{},{disableSpacing:a}),u=(e=>{const{classes:t,disableSpacing:n}=e,a={root:["root",!n&&"spacing"]};return(0,d.A)(a,m,t)})(s);return(0,x.jsx)(b,(0,o.A)({className:(0,c.A)(u.root,i),ownerState:s,ref:t},r))});var y=n(66424),M=n(98519),w=n(22403),A=n(80218),S=n(6732),j=n(65250),I=n(47371),D=n(82503),C=n(24514),k=n(86057),$=n(18069),T=n(69335),Y=n(27321),W=n(24350),N=n(47666);const L=(0,N.A)((0,x.jsx)("path",{d:"M11 9h2V6h3V4h-3V1h-2v3H8v2h3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2m10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2m-9.83-3.25.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4h-.01l-1.1 2-2.76 5H8.53l-.13-.27L6.16 6l-.95-2-.94-2H1v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.13 0-.25-.11-.25-.25"}),"AddShoppingCart"),z=e=>{let{onAddToCart:t,addDisabled:n=!1,priceLabel:a=""}=e;return(0,x.jsxs)(Y.A,{sx:{display:"flex",alignItems:"stretch",width:"100%",borderRadius:"12px",overflow:"hidden",background:"linear-gradient(180deg, #0b1220 0%, #050a14 100%)",boxShadow:"0 10px 24px rgba(0, 0, 0, 0.45), inset 0 1px 0 rgba(255, 255, 255, 0.05)",transition:"transform 160ms ease, box-shadow 160ms ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 14px 28px rgba(0, 0, 0, 0.55), inset 0 1px 0 rgba(255, 255, 255, 0.06)"},"&:active":{transform:"translateY(-1px)",boxShadow:"0 12px 26px rgba(0, 0, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.05)"}},children:[(0,x.jsx)(W.A,{onClick:t,disabled:n,sx:{flex:0,minWidth:44,display:"flex",alignItems:"center",justifyContent:"center",gap:0,px:1.5,py:1.25,color:n?"rgba(255,255,255,0.6)":"white",transition:"background-color 160ms ease","&:hover":{backgroundColor:n?"transparent":"rgba(59, 130, 246, 0.15)"},"&:active":{backgroundColor:n?"transparent":"rgba(59, 130, 246, 0.25)"},opacity:n?.8:1},children:(0,x.jsx)(L,{sx:{color:n?"rgba(255,255,255,0.6)":"white"},"aria-label":"Add to cart"})}),(0,x.jsx)(Y.A,{sx:{width:"1px",backgroundColor:"rgba(255, 255, 255, 0.15)"}}),(0,x.jsx)(Y.A,{sx:{flex:1,minWidth:0,display:"flex",alignItems:"center",justifyContent:"center",gap:1,px:2.5,py:1.25,color:n?"rgba(255,255,255,0.6)":"white",opacity:n?.8:1},children:a&&(0,x.jsx)(M.A,{variant:"body2",fontWeight:700,sx:{whiteSpace:"nowrap"},children:a})})]})};var P=n(72828);const H=(0,N.A)((0,x.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05"}),"FavoriteBorder");var U=n(54048),O=n(43405);const Z=(0,N.A)((0,x.jsx)("path",{d:"M19 14V6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2m-9-1c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m13-6v11c0 1.1-.9 2-2 2H4v-2h17V7z"}),"Payments"),_=(0,N.A)((0,x.jsx)("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V10h14zM9 14H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2zm-8 4H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2z"}),"CalendarMonth");var B=n(43529),V=n(4143),G=n(9940),R=n(79697),F=n(87209),E=n(65812),J=n(85935),Q=n(56690),K=n(6503),X=n(4159),q=n.n(X),ee=n(31810),te=n(45530);const ne=e=>{var t;let{open:n,onClose:i,gadgetId:r,gadgetName:s,gadgetImage:o}=e;const[l,c]=(0,a.useState)(q()().add(1,"day").format("YYYY-MM-DD")),[d,u]=(0,a.useState)(""),[h,p]=(0,a.useState)([]),[g,m]=(0,a.useState)((null===(t=ee.j[0])||void 0===t?void 0:t.id)||""),[f,b]=(0,a.useState)(!1),[v,y]=(0,a.useState)(!1),[C,$]=(0,a.useState)(null),[T,W]=(0,a.useState)(!1),[N,L]=(0,a.useState)(0),[z,P]=(0,a.useState)(!1),{isAuthenticated:H,user:U}=(0,O.A)(),Z=(0,a.useCallback)(async()=>{try{const e=await te.lW.getUserActive(null===U||void 0===U?void 0:U.id);null!==e&&void 0!==e&&e.success&&(P(e.hasActive),e.hasActive&&$("You already have an active appointment. Please complete or cancel it first."))}catch(e){console.error("Error checking active appointments:",e)}},[null===U||void 0===U?void 0:U.id]);(0,a.useEffect)(()=>{H&&null!==U&&void 0!==U&&U.id&&n&&Z()},[H,null===U||void 0===U?void 0:U.id,n,Z]),(0,a.useEffect)(()=>{if(!l||!g)return;(async()=>{y(!0),$(null);try{const e=await te.lW.getAvailableSlots(l,g);if(null!==e&&void 0!==e&&e.success){const t=e.slots||[];p(t);0===q()(l).day()?$("Appointments are not available on Sundays. Please select a different date."):0===t.length&&$("No available slots for this date. Please choose another date.")}else $((null===e||void 0===e?void 0:e.message)||"Failed to load available time slots");u("")}catch(e){console.error("Error fetching available slots:",e),$("Failed to load available time slots. Please try again.")}finally{y(!1)}})()},[l,g]);const _=q()().add(1,"day").format("YYYY-MM-DD"),B=q()().add(90,"day").format("YYYY-MM-DD"),X=q()(l),ne=0===X.day();return(0,a.useEffect)(()=>("undefined"!==typeof window&&(window.__dialogOpen=n),()=>{"undefined"!==typeof window&&(window.__dialogOpen=!1)}),[n]),n?(0,x.jsxs)(A.A,{open:n,onClose:(e,t)=>{f?null!==e&&void 0!==e&&e.preventDefault&&e.preventDefault():i()},maxWidth:"sm",fullWidth:!0,disableEscapeKeyDown:f,children:[(0,x.jsxs)(S.A,{sx:{fontWeight:"bold",color:"#48CEDB",display:"flex",alignItems:"center",gap:1},children:["\ud83d\udcc5 Schedule Viewing - ",s]}),(0,x.jsxs)(j.A,{sx:{mt:1},children:[z&&(0,x.jsx)(k.A,{severity:"warning",sx:{mb:2},children:"You have an active appointment. Complete or cancel it before booking another viewing."}),C&&(0,x.jsx)(k.A,{severity:"error",sx:{mb:2},onClose:()=>$(null),children:C}),T&&(0,x.jsx)(k.A,{severity:"success",sx:{mb:2},children:"\u2705 Your appointment has been booked successfully! Check your email for confirmation."}),(0,x.jsxs)(V.A,{activeStep:N,sx:{mb:2},children:[(0,x.jsx)(G.A,{children:(0,x.jsx)(R.A,{children:"Select Date"})}),(0,x.jsx)(G.A,{children:(0,x.jsx)(R.A,{children:"Select Time"})})]}),(0,x.jsxs)(Y.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,x.jsx)(D.A,{label:"Select Date",type:"date",value:l,onChange:e=>{c(e.target.value),L(0)},inputProps:{min:_,max:B},fullWidth:!0,disabled:z,helperText:"Business hours: Monday-Saturday, 9 AM-5 PM"}),(0,x.jsxs)(F.A,{fullWidth:!0,disabled:z,children:[(0,x.jsx)(E.A,{id:"location-label",children:"Meeting Location"}),(0,x.jsx)(J.A,{labelId:"location-label",value:g,label:"Meeting Location",onChange:e=>m(e.target.value),children:ee.j.map(e=>(0,x.jsxs)(Q.A,{value:e.id,children:[e.emoji," ",e.name]},e.id))})]}),(0,x.jsxs)(Y.A,{children:[(0,x.jsx)(M.A,{variant:"subtitle2",sx:{mb:1,fontWeight:"bold"},children:X.format("dddd, MMMM D, YYYY")}),ne&&(0,x.jsx)(k.A,{severity:"info",sx:{mb:1},children:"\u26a0\ufe0f Appointments not available on Sundays"}),v?(0,x.jsx)(Y.A,{sx:{display:"flex",justifyContent:"center",py:2},children:(0,x.jsx)(K.A,{size:24})}):!ne&&h.length>0?(0,x.jsxs)(F.A,{fullWidth:!0,children:[(0,x.jsx)(E.A,{id:"time-slot-label",children:"Select Time"}),(0,x.jsx)(J.A,{labelId:"time-slot-label",value:d,label:"Select Time",onChange:e=>{u(e.target.value),L(1)},disabled:z,children:h.map(e=>(0,x.jsx)(Q.A,{value:e,children:q()("2000-01-01 ".concat(e)).format("h:mm A")},e))})]}):!ne&&(0,x.jsx)(k.A,{severity:"info",children:"No available slots for this date. Please try another date."})]})]})]}),(0,x.jsxs)(I.A,{sx:{p:2,gap:1},children:[(0,x.jsx)(w.A,{onClick:i,color:"primary",children:"Cancel"}),(0,x.jsx)(w.A,{onClick:async()=>{if(H)if(z)$("You already have an active appointment.");else if(d){b(!0),$(null);try{var e;const t=(null===(e=ee.j.find(e=>e.id===g))||void 0===e?void 0:e.name)||"",n={gadgetId:r,gadgetName:s,appointmentDate:l,appointmentTime:d,locationId:g,locationName:t,userId:null===U||void 0===U?void 0:U.id,userName:(null===U||void 0===U?void 0:U.displayName)||(null===U||void 0===U?void 0:U.name)||(null===U||void 0===U?void 0:U.email)||"Customer",userEmail:(null===U||void 0===U?void 0:U.email)||""},a=await te.lW.create(n);if(null===a||void 0===a||!a.success)throw new Error((null===a||void 0===a?void 0:a.error)||"Failed to create appointment");W(!0),$(null),setTimeout(()=>{u(""),c(q()().add(1,"day").format("YYYY-MM-DD")),L(0),W(!1),P(!0),i()},2e3)}catch(t){console.error("Error booking appointment:",t),$((null===t||void 0===t?void 0:t.message)||"Failed to book appointment. Please try again.")}finally{b(!1)}}else $("Please select a time slot");else $("Please sign in to book an appointment")},color:"success",variant:"contained",disabled:!d||f||z,children:f?(0,x.jsx)(K.A,{size:20}):"\u2713 Book Viewing"})]})]}):null};var ae=n(29040),ie=n(38006);const re=e=>{var t;let{id:n,title:o,date:l,image:c,number:d,price:u,priceGbp:h,priceMwk:p,monthlyPrice:g,monthlyPriceGbp:m,description:f,brand:b,condition:N,category:L}=e;const[V,G]=a.useState(!1),[R,F]=a.useState(!1),[E,J]=a.useState(""),[Q,K]=a.useState(!1),[X,q]=a.useState(""),[ee,te]=a.useState(!1),[re,se]=a.useState(!0),[oe,le]=a.useState(!1),{addToCart:ce}=(0,$._$)(),{toggle:de,isWished:ue}=(0,U.n)(),{user:he}=(0,O.A)(),{currency:pe,isInMalawi:ge,formatLocalPrice:me}=(0,T.e)(),[xe,fe]=a.useState(!1),be=a.useMemo(()=>{if(ge){const e=null!==p&&void 0!==p?p:u,t="string"===typeof e?parseFloat(e.replace(/[^0-9.]/g,"")):Number(e);return Number.isFinite(t)?"MWK ".concat(Math.round(t).toLocaleString("en-US")):"MWK \u2014"}return me(null!==h&&void 0!==h?h:u)},[u,h,p,pe,ge,me]);a.useEffect(()=>{J("".concat(window.location.origin,"/gadgets/").concat(n))},[n]);a.useCallback(e=>{if(!e)return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjZjNmNGY2Ii8+CjxwYXRoIGQ9Ik0xMDAgNzBjLTguMjg0IDAtMTUgNi43MTYtMTUgMTVzNi43MTYgMTUgMTUgMTUgMTUtNi43MTYgMTUtMTUtNi43MTYtMTUtMTUtMTV6bTAgMjBjLTIuNzYxIDAtNS0yLjIzOS01LTVzMi4yMzktNSA1LTUgNSAyLjIzOSA1IDUtMi4yMzkgNS01IDV6IiBmaWxsPSIjOWNhM2FmIi8+Cjx0ZXh0IHg9IjEwMCIgeT0iMTYwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjNjY3Mzg1IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiPkltYWdlIE5vdCBGb3VuZDwvdGV4dD4KPC9zdmc+";try{const t=/^https?:\/\//.test(e),n="https://sparkle-pro.co.uk/api/images";let a=e.trim();if(a=a.replace(/\s+/g,"").replace(/^\.\//,"").replace(/^\//,""),a=a.replace(/iphon[\-_.]?13pro/i,"iphone-13pro"),a=a.replace(/galaxys23ultra/i,"galaxy-s23ultra"),t){const e=new URL(a);if(/\/api\/images\//.test(e.pathname))return"https://sparkle-pro.co.uk".concat(e.pathname);const t=e.pathname.split("/").filter(Boolean).pop();return"".concat(n,"/").concat(t)}return/^api\/images\//.test(a)?"https://sparkle-pro.co.uk/".concat(a):"".concat(n,"/").concat(a)}catch(t){return e}},[]);const ve=e=>{if(e.preventDefault(),e.stopPropagation(),0!==d){G(!0);try{const e=String(L||"").toLowerCase(),a=["smartphone","phone","tablet","laptop"].includes(e)?"32GB":void 0,i=Number(ge?null!==p&&void 0!==p?p:u:null!==h&&void 0!==h?h:u);ce({id:n,title:o,price:i,priceGbp:Number(null!==h&&void 0!==h?h:u),priceMwk:Number(null!==p&&void 0!==p?p:u),image:c,number:d,brand:b,condition:N||"new",storage:a,category:L,description:f||""});const r="undefined"!==typeof window?localStorage.getItem("xp_analytics_sid"):null;if(r)try{(0,ae.yM)(r,"add_to_cart",{id:n,title:o,price:i,brand:b,category:L})}catch(t){}q("Item added to cart!"),K(!0)}catch(a){console.error("Add to cart error:",a)}finally{G(!1)}}},ye="number"===typeof d&&Number.isFinite(d)?d:0,Me=0===ye;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(ie.P.div,{layout:!0,initial:{opacity:0,y:16,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-8,scale:.98},transition:{duration:.35,ease:[.22,1,.36,1]},children:(0,x.jsxs)(i.A,{sx:{width:{xs:"100%",sm:"auto"},maxWidth:{xs:"none",sm:380,md:320},mx:{xs:"auto",sm:0},backgroundColor:"#1565c0",borderRadius:"30px",color:"white",display:"flex",flexDirection:"column",alignSelf:"flex-start",padding:"20px",transition:"all 0.3s ease-in-out","&:hover":{boxShadow:"2px 2px 5px #0c3266, -2px -2px 5px #1a5bbf",transform:"scale(1.05)"}},children:[(0,x.jsx)(r.A,{action:(0,x.jsx)(y.A,{"aria-label":ue(String(n))?"Remove from wishlist":"Add to wishlist",onClick:e=>{e.preventDefault(),e.stopPropagation();const t=String(n),a=ue(t);de(t);const i="undefined"!==typeof window?localStorage.getItem("xp_analytics_sid"):null;if(i)try{(0,ae.yM)(i,a?"wishlist_remove":"wishlist_add",{id:n,title:o,brand:b,category:L})}catch(r){}q(a?"Removed from wishlist!":"Added to wishlist!"),K(!0)},sx:{color:"white"},children:ue(String(n))?(0,x.jsx)(P.A,{color:"error"}):(0,x.jsx)(H,{})}),title:(0,x.jsx)(M.A,{variant:"h6",sx:{color:"white",fontWeight:700,textAlign:"center",display:"block"},children:o}),subheader:(0,x.jsx)("span",{style:{color:"white",opacity:.9,fontSize:"0.9rem",fontWeight:600,display:"block",textAlign:"center"},children:Me?"Out of Stock \xb7 Coming Soon":ye<20?"Available now \xb7 Limited Amount":"Available now"})}),(0,x.jsxs)("div",{style:{width:"100%",height:"240px",display:"flex",justifyContent:"center",alignItems:"center",position:"relative",overflow:"hidden",borderRadius:"15px",backgroundColor:"rgba(255, 255, 255, 0.1)"},children:[re&&!ee&&(0,x.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"white",fontSize:"14px"},children:"Loading..."}),(0,x.jsx)(ie.P.img,{layoutId:"gadget-media-".concat(n),src:ee?"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjZjNmNGY2Ii8+CjxwYXRoIGQ9Ik0xMDAgNzBjLTguMjg0IDAtMTUgNi43MTYtMTUgMTVzNi43MTYgMTUgMTUgMTUgMTUtNi43MTYgMTUtMTUtNi43MTYtMTUtMTUtMTV6bTAgMjBjLTIuNzYxIDAtNS0yLjIzOS01LTVzMi4yMzktNSA1LTUgNSAyLjIzOSA1IDUtMi4yMzkgNS01IDV6IiBmaWxsPSIjOWNhM2FmIi8+Cjx0ZXh0IHg9IjEwMCIgeT0iMTYwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjNjY3Mzg1IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiPkltYWdlIE5vdCBGb3VuZDwvdGV4dD4KPC9zdmc+":c,style:{width:"95%",height:"auto",maxHeight:"100%",display:re&&!ee?"none":"block",objectFit:"contain",opacity:ee?.7:1},alt:o,onError:()=>{te(!0),se(!1)},onLoad:()=>{te(!1),se(!1)}}),ee&&(0,x.jsx)("div",{style:{position:"absolute",bottom:"8px",right:"8px",backgroundColor:"rgba(255, 165, 0, 0.8)",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:"bold"},children:"Image Unavailable"})]}),(0,x.jsx)(s.A,{children:f&&(0,x.jsx)(M.A,{variant:"body2",sx:{mt:1,opacity:.9,fontSize:"0.9rem"},children:f.length>80?"".concat(f.substring(0,80),"..."):f})}),(0,x.jsxs)(v,{disableSpacing:!0,sx:{flexDirection:"column",gap:1,alignItems:"stretch"},children:[(()=>{const e=0===ye?"Coming Soon":V?"Adding...":"From ".concat(be);return(0,x.jsx)(z,{onAddToCart:ve,addDisabled:V||Me,priceLabel:e})})(),(0,x.jsx)(Y.A,{sx:{width:"100%",borderRadius:"12px",overflow:"hidden",background:"linear-gradient(180deg, #0b1220 0%, #050a14 100%)",boxShadow:"0 10px 24px rgba(0, 0, 0, 0.45), inset 0 1px 0 rgba(255, 255, 255, 0.05)",transition:"transform 160ms ease, box-shadow 160ms ease",display:"flex",alignItems:"stretch","&:hover":{transform:"translateY(-2px)",boxShadow:"0 14px 28px rgba(0, 0, 0, 0.55), inset 0 1px 0 rgba(255, 255, 255, 0.06)"},"&:active":{transform:"translateY(-1px)",boxShadow:"0 12px 26px rgba(0, 0, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.05)"}},children:(0,x.jsxs)(W.A,{onClick:e=>{e.preventDefault(),e.stopPropagation(),fe(!0)},onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},disabled:Me,sx:{flex:1,minWidth:0,display:"flex",alignItems:"center",justifyContent:"center",gap:1,px:{xs:3,sm:2.75},py:{xs:1.75,sm:1.35},color:Me?"rgba(255,255,255,0.6)":"white",transition:"background-color 160ms ease",backgroundColor:"transparent","&:hover":{backgroundColor:Me?"transparent":"rgba(59, 130, 246, 0.18)"},"&:active":{backgroundColor:Me?"transparent":"rgba(59, 130, 246, 0.28)"},opacity:Me?.8:1,cursor:Me?"not-allowed":"pointer"},children:[(0,x.jsx)(Z,{sx:{color:Me?"rgba(255,255,255,0.6)":"white",fontSize:{xs:20,sm:19}}}),(0,x.jsx)(M.A,{variant:"body1",fontWeight:700,sx:{whiteSpace:"nowrap",fontSize:{xs:"0.95rem",sm:"0.9rem"}},children:"Buy / Use in installments"})]})}),(0,x.jsx)(Y.A,{sx:{width:"100%",borderRadius:"12px",overflow:"hidden",background:"linear-gradient(180deg, #0b1220 0%, #050a14 100%)",boxShadow:"0 10px 24px rgba(0, 0, 0, 0.45), inset 0 1px 0 rgba(255, 255, 255, 0.05)",transition:"transform 160ms ease, box-shadow 160ms ease",display:"flex",alignItems:"stretch","&:hover":{transform:Me?"none":"translateY(-2px)",boxShadow:Me?"0 10px 24px rgba(0, 0, 0, 0.45), inset 0 1px 0 rgba(255, 255, 255, 0.05)":"0 14px 28px rgba(0, 0, 0, 0.55), inset 0 1px 0 rgba(255, 255, 255, 0.06)"},"&:active":{transform:Me?"none":"translateY(-1px)",boxShadow:Me?"0 10px 24px rgba(0, 0, 0, 0.45), inset 0 1px 0 rgba(255, 255, 255, 0.05)":"0 12px 26px rgba(0, 0, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.05)"}},children:(0,x.jsxs)(W.A,{onClick:e=>{e.preventDefault(),e.stopPropagation(),le(!0)},onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},disabled:Me,sx:{flex:1,minWidth:0,display:"flex",alignItems:"center",justifyContent:"center",gap:1,px:{xs:3,sm:2.75},py:{xs:1.75,sm:1.35},color:Me?"rgba(255,255,255,0.6)":"white",transition:"background-color 160ms ease",backgroundColor:"transparent","&:hover":{backgroundColor:Me?"transparent":"rgba(59, 130, 246, 0.18)"},"&:active":{backgroundColor:Me?"transparent":"rgba(59, 130, 246, 0.28)"},opacity:Me?.8:1,cursor:Me?"not-allowed":"pointer"},children:[(0,x.jsx)(_,{sx:{fontSize:18}}),(0,x.jsx)(M.A,{variant:"body1",fontWeight:700,sx:{whiteSpace:"nowrap",fontSize:{xs:"0.95rem",sm:"0.9rem"}},children:"Book Viewing"})]})})]})]})}),(0,x.jsx)(B.A,{open:xe,onClose:()=>fe(!1),item:{id:n,name:o,price:u,priceGbp:h||u,priceMwk:p||u,image:c,condition:N,description:f||""},customerEmail:null!==(t=null===he||void 0===he?void 0:he.email)&&void 0!==t?t:null}),(0,x.jsx)(ne,{open:oe,onClose:()=>le(!1),gadgetId:n,gadgetName:o,gadgetImage:c}),(0,x.jsxs)(A.A,{open:R,onClose:()=>F(!1),children:[(0,x.jsx)(S.A,{children:"Share this item"}),(0,x.jsx)(j.A,{children:(0,x.jsx)(D.A,{fullWidth:!0,label:"Share URL",value:E,InputProps:{readOnly:!0},margin:"normal"})}),(0,x.jsxs)(I.A,{children:[(0,x.jsx)(w.A,{onClick:()=>F(!1),children:"Cancel"}),(0,x.jsx)(w.A,{onClick:async()=>{try{await navigator.clipboard.writeText(E),q("Link copied to clipboard!"),K(!0),F(!1)}catch(e){console.error("Failed to copy link:",e)}},variant:"contained",children:"Copy Link"}),(0,x.jsx)(w.A,{onClick:()=>{window.open(E,"_blank"),F(!1)},variant:"outlined",children:"View in Gadget Detail"})]})]}),(0,x.jsx)(C.A,{open:Q,autoHideDuration:3e3,onClose:()=>K(!1),children:(0,x.jsx)(k.A,{onClose:()=>K(!1),severity:"success",children:X})})]})}},31810(e,t,n){"use strict";n.d(t,{j:()=>a});const a=[{id:"lilongwe-service",name:"Lilongwe Service Area",address:"Lilongwe, Malawi (Mobile Service)",hours:["Monday - Saturday: 9:00 AM - 5:00 PM"],places:{google:"https://www.google.com/maps/search/?api=1&query=Lilongwe+Malawi"},region:"Malawi",emoji:"\ud83c\uddf2\ud83c\uddfc"},{id:"northamptonshire-service",name:"Northamptonshire Service Area",address:"Northamptonshire, UK (Mobile Service)",hours:["Monday - Saturday: 9:00 AM - 5:00 PM"],places:{google:"https://www.google.com/maps/search/?api=1&query=Northamptonshire+UK"},region:"UK",emoji:"\ud83c\uddec\ud83c\udde7"}]}}]);