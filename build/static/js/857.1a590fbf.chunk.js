"use strict";(self.webpackChunkitsxtrapush=self.webpackChunkitsxtrapush||[]).push([[857],{41857(e,t,i){i.r(t),i.d(t,{default:()=>Y});var n=i(89379),o=i(68484),r=i(9950),s=i(38006),a=i(92994),l=i(62113),c=i(7356),d=i(20615),h=i(38796),x=i(27321),u=i(6503),p=i(98519),g=i(94305),m=i(22403),b=i(13308),y=i(28493),A=i(21457),f=i(41680),v=i(29920),w=i(55884),j=i(14653),S=i(87209),k=i(75026),M=i(18643),C=i(65812),z=i(85935),N=i(56690),I=i(84453),P=i(72990),G=i(30447),B=i(24184),O=i(45530),F=i(19676),L=i(15672),E=i(44414);const _=e=>{let{onFiltersChange:t,currentFilters:i={},isMobile:o=!1,maxPrice:s=2e6,currency:a}=e;const[l,_]=(0,r.useState)([]),[W,H]=(0,r.useState)([]),[T,R]=(0,r.useState)([0,s]),[D,X]=(0,r.useState)(!0),Q=(0,r.useRef)(s),{location:q,isMalawi:K}=(0,L.z)(),V=a||(null===q||void 0===q?void 0:q.currency)||"GBP",Y="MWK"===V?"MWK ":"\xa3",J=e=>(0,F.rD)(e,V),U=e=>(0,F.Iq)(e,V),Z=(0,c.A)(),$=(0,d.A)(Z.breakpoints.down("sm")),[ee,te]=((0,d.A)(Z.breakpoints.down("md")),(0,r.useState)({category:!1,brand:!1,price:!1,stock:!1,condition:!1})),ie={New:"new","Like New":"like_new",Excellent:"like_new","Very Good":"good",Good:"good",Fair:"fair"},ne=new Set(["new","like_new","good","fair"]),[oe,re]=(0,r.useState)((0,n.A)({categories:[],brands:[],priceMin:0,priceMax:s,inStock:!0,condition:[],warranty:[],rating:0,sortBy:"newest"},i));(0,r.useEffect)(()=>{const e=Q.current;re(t=>{const i=Math.max(0,Math.min(t.priceMin,s)),o=s>e&&t.priceMax===e?s:Math.max(i,Math.min(t.priceMax,s));return(0,n.A)((0,n.A)({},t),{},{priceMin:i,priceMax:o})}),R(t=>{const i=Math.max(0,Math.min(t[0],s)),n=t[1];return[i,s>e&&n===e?s:Math.max(i,Math.min(n,s))]}),Q.current=s},[s]),(0,r.useEffect)(()=>{(async()=>{try{X(!0);const[e,t]=await Promise.all([O.QO.getCategories(),O.QO.getBrands()]);e.success&&_(e.data),t.success&&H(t.data)}catch(e){console.error("Failed to fetch filter data:",e)}finally{X(!1)}})()},[]);const se=e=>(t,i)=>{te(t=>(0,n.A)((0,n.A)({},t),{},{[e]:i}))},ae=(e,t)=>{const i=(0,n.A)((0,n.A)({},oe),{},{priceMin:t[0],priceMax:t[1]});re(i),R(t)},le=(e,t)=>{const i=(0,n.A)((0,n.A)({},oe),{},{priceMin:t[0],priceMax:t[1]});ce(i)},ce=e=>{const i={};if(e.categories.length>0&&(i.category=e.categories[0]),e.brands.length>0&&(i.brand=e.brands[0]),i.minPrice=e.priceMin,i.maxPrice=e.priceMax,i.currency=V,null!==e.inStock&&(i.inStock=e.inStock?1:0),e.condition.length>0){const t=Array.from(new Set(e.condition.map(e=>ie[e]||e))).filter(e=>ne.has(e));t.length>0&&(i.condition=t)}e.warranty.length>0&&(i.warranty=e.warranty),e.rating>0&&(i.minRating=e.rating),e.sortBy&&(i.sortBy=e.sortBy),t(i)};(0,r.useEffect)(()=>{if(i&&Array.isArray(i.condition)){const e=i.condition.filter(e=>ne.has(e)).map(e=>{const t=Object.entries(ie).find(t=>{let[,i]=t;return i===e});return t?t[0]:null}).filter(Boolean);re(t=>(0,n.A)((0,n.A)({},t),{},{condition:e}))}},[null===i||void 0===i?void 0:i.condition]);const de=()=>{let e=0;return oe.categories.length>0&&e++,oe.brands.length>0&&e++,(oe.priceMin>0||oe.priceMax<s)&&e++,null!==oe.inStock&&e++,e};return D?(0,E.jsx)(h.A,{sx:{p:2,mb:2,bgcolor:"#051323",color:"white"},children:(0,E.jsxs)(x.A,{display:"flex",alignItems:"center",justifyContent:"center",py:4,children:[(0,E.jsx)(u.A,{size:24,sx:{color:"white"}}),(0,E.jsx)(p.A,{sx:{ml:2,color:"white"},children:"Loading filters..."})]})}):(0,E.jsxs)(h.A,{sx:(0,n.A)({p:o?1:2,mb:2,width:"100%",bgcolor:"#051323",color:"white"},o&&{borderRadius:0,boxShadow:"none",border:"none"}),children:[(0,E.jsxs)(x.A,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:o?1:2,flexWrap:$?"wrap":"nowrap",gap:1,children:[(0,E.jsxs)(x.A,{display:"flex",alignItems:"center",minWidth:0,flex:1,children:[(0,E.jsx)(P.A,{sx:{mr:1,fontSize:o?"1.2rem":"1.5rem",color:"white"}}),(0,E.jsx)(p.A,{variant:o?"subtitle1":"h6",sx:{fontWeight:600,color:"white"},children:"Filters"}),de()>0&&(0,E.jsx)(g.A,{label:de(),size:"small",color:"primary",sx:{ml:1}})]}),de()>0&&(0,E.jsx)(m.A,{startIcon:$?null:(0,E.jsx)(G.A,{}),onClick:()=>{re({categories:[],brands:[],priceMin:0,priceMax:s,inStock:null,condition:[],warranty:[],rating:0,sortBy:"newest"}),R([0,s]),t({})},size:"small",sx:{minWidth:$?"auto":"unset",px:$?1:2,color:"white",borderColor:"white","&:hover":{borderColor:"white",bgcolor:"rgba(255, 255, 255, 0.1)"}},variant:"outlined",children:$?(0,E.jsx)(G.A,{}):"Clear"})]}),(0,E.jsxs)(b.A,{expanded:ee.category,onChange:se("category"),elevation:0,sx:{boxShadow:"none","&:before":{display:"none"},mb:.5,bgcolor:"transparent",color:"white"},children:[(0,E.jsx)(y.A,{expandIcon:(0,E.jsx)(I.A,{sx:{color:"white"}}),sx:{py:o?1:1.5,px:o?.5:1,minHeight:o?40:48,bgcolor:"transparent"},children:(0,E.jsxs)(x.A,{display:"flex",alignItems:"center",width:"100%",children:[(0,E.jsx)(p.A,{variant:o?"body2":"body1",sx:{fontWeight:500,color:"white"},children:"Category"}),oe.categories.length>0&&(0,E.jsx)(g.A,{label:oe.categories.length,size:"small",color:"primary",sx:{ml:1,height:20,fontSize:"0.7rem"}})]})}),(0,E.jsx)(A.A,{sx:{px:o?.5:2,py:o?1:1.5},children:(0,E.jsx)(x.A,{sx:{maxHeight:o?200:"none",overflowY:"auto"},children:l.map(e=>(0,E.jsx)(f.A,{control:(0,E.jsx)(v.A,{checked:oe.categories.includes(e.slug||e.name),onChange:()=>(e=>{const t=oe.categories.includes(e)?oe.categories.filter(t=>t!==e):[...oe.categories,e],i=(0,n.A)((0,n.A)({},oe),{},{categories:t});re(i),ce(i)})(e.slug||e.name),size:"small",sx:{py:o?.5:1,color:"white","&.Mui-checked":{color:"white"}}}),label:(0,E.jsxs)(x.A,{display:"flex",justifyContent:"space-between",width:"100%",pr:1,children:[(0,E.jsx)(p.A,{variant:o?"caption":"body2",sx:{textTransform:"capitalize",fontSize:o?"0.75rem":"0.875rem",color:"white"},children:e.name}),(0,E.jsxs)(p.A,{variant:"caption",sx:{fontSize:o?"0.7rem":"0.75rem",color:"rgba(255, 255, 255, 0.7)"},children:["(",e.count,")"]})]}),sx:{display:"flex",width:"100%",m:0,py:o?.25:.5}},e.slug||e.name))})})]}),(0,E.jsx)(w.A,{sx:{my:o?.5:1,bgcolor:"rgba(255, 255, 255, 0.2)"}}),(0,E.jsxs)(b.A,{expanded:ee.brand,onChange:se("brand"),elevation:0,sx:{boxShadow:"none","&:before":{display:"none"},mb:.5,bgcolor:"transparent",color:"white"},children:[(0,E.jsx)(y.A,{expandIcon:(0,E.jsx)(I.A,{sx:{color:"white"}}),sx:{py:o?1:1.5,px:o?.5:1,minHeight:o?40:48,bgcolor:"transparent"},children:(0,E.jsxs)(x.A,{display:"flex",alignItems:"center",width:"100%",children:[(0,E.jsx)(p.A,{variant:o?"body2":"body1",sx:{fontWeight:500,color:"white"},children:"Brand"}),oe.brands.length>0&&(0,E.jsx)(g.A,{label:oe.brands.length,size:"small",color:"primary",sx:{ml:1,height:20,fontSize:"0.7rem"}})]})}),(0,E.jsx)(A.A,{sx:{px:o?.5:2,py:o?1:1.5},children:(0,E.jsx)(x.A,{sx:{maxHeight:o?200:"none",overflowY:"auto"},children:W.map(e=>(0,E.jsx)(f.A,{control:(0,E.jsx)(v.A,{checked:oe.brands.includes(e.name),onChange:()=>(e=>{const t=oe.brands.includes(e)?oe.brands.filter(t=>t!==e):[...oe.brands,e],i=(0,n.A)((0,n.A)({},oe),{},{brands:t});re(i),ce(i)})(e.name),size:"small",sx:{py:o?.5:1,color:"white","&.Mui-checked":{color:"white"}}}),label:(0,E.jsxs)(x.A,{display:"flex",justifyContent:"space-between",width:"100%",pr:1,children:[(0,E.jsx)(p.A,{variant:o?"caption":"body2",sx:{fontSize:o?"0.75rem":"0.875rem",color:"white"},children:e.name}),(0,E.jsxs)(p.A,{variant:"caption",sx:{fontSize:o?"0.7rem":"0.75rem",color:"rgba(255, 255, 255, 0.7)"},children:["(",e.count,")"]})]}),sx:{display:"flex",width:"100%",m:0,py:o?.25:.5}},e.name))})})]}),(0,E.jsx)(w.A,{sx:{my:o?.5:1,bgcolor:"rgba(255, 255, 255, 0.2)"}}),(0,E.jsxs)(b.A,{expanded:ee.price,onChange:se("price"),elevation:0,sx:{boxShadow:"none","&:before":{display:"none"},mb:.5,bgcolor:"transparent",color:"white"},children:[(0,E.jsx)(y.A,{expandIcon:(0,E.jsx)(I.A,{sx:{color:"white"}}),sx:{py:o?1:1.5,px:o?.5:1,minHeight:o?40:48,bgcolor:"transparent"},children:(0,E.jsxs)(x.A,{display:"flex",alignItems:"center",width:"100%",children:[(0,E.jsx)(p.A,{variant:o?"body2":"body1",sx:{fontWeight:500,color:"white"},children:"Price Range"}),(oe.priceMin>0||oe.priceMax<s)&&(0,E.jsx)(g.A,{label:"".concat(U(oe.priceMin)," - ").concat(oe.priceMax>=s?U(s)+"+":U(oe.priceMax)),size:"small",color:"primary",sx:{ml:1,height:20,fontSize:"0.65rem"}})]})}),(0,E.jsx)(A.A,{sx:{px:o?1:2,py:o?1:1.5},children:(0,E.jsxs)(x.A,{sx:{px:o?0:1},children:[(()=>{const e="MWK"===V,t=e?5e4:25,i=Math.round(s/2),n=e?s>=1e6?[{value:0,label:"".concat(Y," 0")},{value:1e6,label:"".concat(Y," 1M")},{value:s,label:U(s)+"+"}]:[{value:0,label:"".concat(Y," 0")},{value:i,label:U(i)},{value:s,label:U(s)}]:[{value:0,label:"".concat(Y,"0")},{value:i,label:U(i)},{value:s,label:U(s)}];return(0,E.jsx)(j.Ay,{value:T,onChange:ae,onChangeCommitted:le,valueLabelDisplay:"auto",min:0,max:s,step:t,marks:n,valueLabelFormat:e=>U(e),sx:{"& .MuiSlider-markLabel":{fontSize:o?"0.65rem":"0.75rem",color:"white"},"& .MuiSlider-valueLabel":{fontSize:o?"0.7rem":"0.75rem"},"& .MuiSlider-thumb":{color:"white"},"& .MuiSlider-track":{color:"white"},"& .MuiSlider-rail":{color:"rgba(255, 255, 255, 0.3)"}}})})(),(0,E.jsxs)(x.A,{display:"flex",justifyContent:"space-between",mt:o?.5:1,children:[(0,E.jsxs)(p.A,{variant:"caption",sx:{fontSize:o?"0.7rem":"0.75rem",color:"white"},children:["Min: ",J(T[0])]}),(0,E.jsxs)(p.A,{variant:"caption",sx:{fontSize:o?"0.7rem":"0.75rem",color:"white"},children:["Max: ",J(T[1])]})]})]})})]}),(0,E.jsx)(w.A,{sx:{my:o?.5:1,bgcolor:"rgba(255, 255, 255, 0.2)"}}),(0,E.jsxs)(b.A,{expanded:ee.stock,onChange:se("stock"),elevation:0,sx:{boxShadow:"none","&:before":{display:"none"},mb:.5,bgcolor:"transparent",color:"white"},children:[(0,E.jsx)(y.A,{expandIcon:(0,E.jsx)(I.A,{sx:{color:"white"}}),sx:{py:o?1:1.5,px:o?.5:1,minHeight:o?40:48,bgcolor:"transparent"},children:(0,E.jsxs)(x.A,{display:"flex",alignItems:"center",width:"100%",children:[(0,E.jsx)(p.A,{variant:o?"body2":"body1",sx:{fontWeight:500,color:"white"},children:"Availability"}),null!==oe.inStock&&(0,E.jsx)(g.A,{label:oe.inStock?"In Stock":"Out of Stock",size:"small",color:"primary",sx:{ml:1,height:20,fontSize:"0.65rem"}})]})}),(0,E.jsx)(A.A,{sx:{px:o?.5:2,py:o?1:1.5},children:(0,E.jsx)(S.A,{component:"fieldset",sx:{width:"100%"},children:(0,E.jsxs)(k.A,{value:null===oe.inStock?"all":oe.inStock?"inStock":"outOfStock",onChange:e=>{const t=e.target.value,i="all"===t?null:"inStock"===t,o=(0,n.A)((0,n.A)({},oe),{},{inStock:i});re(o),ce(o)},sx:{gap:o?0:.5},children:[(0,E.jsx)(f.A,{value:"all",control:(0,E.jsx)(M.A,{size:"small",sx:{py:o?.5:1,color:"white","&.Mui-checked":{color:"white"}}}),label:(0,E.jsx)(p.A,{variant:o?"caption":"body2",sx:{fontSize:o?"0.75rem":"0.875rem",color:"white"},children:"All Products"}),sx:{py:o?.25:.5}}),(0,E.jsx)(f.A,{value:"inStock",control:(0,E.jsx)(M.A,{size:"small",sx:{py:o?.5:1,color:"white","&.Mui-checked":{color:"white"}}}),label:(0,E.jsx)(p.A,{variant:o?"caption":"body2",sx:{fontSize:o?"0.75rem":"0.875rem",color:"white"},children:"In Stock Only"}),sx:{py:o?.25:.5}}),(0,E.jsx)(f.A,{value:"outOfStock",control:(0,E.jsx)(M.A,{size:"small",sx:{py:o?.5:1,color:"white","&.Mui-checked":{color:"white"}}}),label:(0,E.jsx)(p.A,{variant:o?"caption":"body2",sx:{fontSize:o?"0.75rem":"0.875rem",color:"white"},children:"Out of Stock"}),sx:{py:o?.25:.5}})]})})})]}),(0,E.jsx)(w.A,{sx:{my:o?.5:1,bgcolor:"rgba(255, 255, 255, 0.2)"}}),(0,E.jsxs)(b.A,{expanded:ee.condition,onChange:se("condition"),elevation:0,sx:{boxShadow:"none","&:before":{display:"none"},mb:.5,bgcolor:"transparent",color:"white"},children:[(0,E.jsx)(y.A,{expandIcon:(0,E.jsx)(I.A,{sx:{color:"white"}}),sx:{py:o?1:1.5,px:o?.5:1,minHeight:o?40:48,bgcolor:"transparent"},children:(0,E.jsxs)(x.A,{display:"flex",alignItems:"center",width:"100%",children:[(0,E.jsx)(B.A,{sx:{mr:1,fontSize:"1rem",color:"white"}}),(0,E.jsx)(p.A,{variant:o?"body2":"body1",sx:{fontWeight:500,color:"white"},children:"Condition"}),oe.condition.length>0&&(0,E.jsx)(g.A,{label:oe.condition.length,size:"small",color:"primary",sx:{ml:1,height:20,fontSize:"0.7rem"}})]})}),(0,E.jsx)(A.A,{sx:{px:o?.5:2,py:o?1:1.5},children:(0,E.jsx)(x.A,{sx:{maxHeight:o?200:"none",overflowY:"auto",overflowX:"hidden"},children:["New","Like New","Good","Fair"].map(e=>(0,E.jsx)(f.A,{control:(0,E.jsx)(v.A,{checked:oe.condition.includes(e),onChange:()=>(e=>{const t=oe.condition.includes(e)?oe.condition.filter(t=>t!==e):[...oe.condition,e],i=(0,n.A)((0,n.A)({},oe),{},{condition:t});re(i),ce(i)})(e),size:"small",sx:{py:o?.5:1,color:"white","&.Mui-checked":{color:"white"}}}),label:(0,E.jsx)(p.A,{variant:o?"caption":"body2",sx:{fontSize:o?"0.75rem":"0.875rem",color:"white"},children:e}),sx:{display:"flex",width:"100%",py:o?.25:.5}},e))})})]}),(0,E.jsx)(w.A,{sx:{my:o?.5:1,bgcolor:"rgba(255, 255, 255, 0.2)"}}),(0,E.jsx)(x.A,{sx:{px:o?.5:2,py:o?1:1.5},children:(0,E.jsxs)(S.A,{fullWidth:!0,size:"small",children:[(0,E.jsx)(C.A,{sx:{color:"white"},children:"Sort By"}),(0,E.jsxs)(z.A,{value:oe.sortBy,onChange:e=>{const t=(0,n.A)((0,n.A)({},oe),{},{sortBy:e.target.value});re(t),ce(t)},label:"Sort By",sx:{color:"white","& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.5)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"white"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"white"},"& .MuiSvgIcon-root":{color:"white"}},children:[(0,E.jsx)(N.A,{value:"price_low",children:"Price: Low to High"}),(0,E.jsx)(N.A,{value:"price_high",children:"Price: High to Low"}),(0,E.jsx)(N.A,{value:"newest",children:"Newest First"}),(0,E.jsx)(N.A,{value:"rating",children:"Highest Rated"}),(0,E.jsx)(N.A,{value:"condition",children:"Best Condition"})]})]})})]})};var W=i(22768);const H=e=>{let{children:t,gadgetId:i}=e;const[n,o]=(0,r.useState)(!1),s=(0,r.useRef)(null);return(0,r.useEffect)(()=>{const e=s.current,t=new IntersectionObserver(i=>{let[n]=i;n.isIntersecting&&(o(!0),e&&t.unobserve(e))},{threshold:.05,rootMargin:"100px"});return e&&t.observe(e),()=>{e&&t.unobserve(e)}},[]),(0,E.jsx)("div",{ref:s,children:n?t:(0,E.jsx)(T,{})})},T=()=>(0,E.jsxs)(x.A,{sx:{bgcolor:"rgba(255, 255, 255, 0.05)",borderRadius:2,p:2,border:"1px solid rgba(72, 206, 219, 0.2)",minHeight:"400px",animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"},children:[(0,E.jsx)(W.A,{variant:"rectangular",height:250,sx:{mb:2,borderRadius:1}}),(0,E.jsx)(W.A,{variant:"text",height:20,sx:{mb:1}}),(0,E.jsx)(W.A,{variant:"text",height:20,width:"80%",sx:{mb:2}}),(0,E.jsx)(W.A,{variant:"text",height:24,width:"60%"})]});var R=i(79482),D=i(96469),X=i(79448),Q=i(66424),q=i(86057),K=i(45774);const V=r.lazy(()=>Promise.all([i.e(535),i.e(81),i.e(529),i.e(212)]).then(i.bind(i,4212))),Y=e=>{let{category:t}=e;const i="gadgets_cache_v1",[h,g]=(0,r.useState)("Gadgets"),[b,y]=(0,r.useState)(!1),[A,f]=(0,r.useState)([]),[v,w]=(0,r.useState)([]),[j,S]=(0,r.useState)(""),[k,M]=(0,r.useState)(!0),[C,z]=(0,r.useState)(null),[N,I]=(0,r.useState)({inStock:!0}),[G,B]=(0,r.useState)(!1),[F,W]=(0,r.useState)(t||null),T=(0,a.zy)(),{category:Y}=(0,a.g)(),[J,U]=(0,r.useState)(!1),{location:Z}=(0,L.z)(),$=(null===Z||void 0===Z?void 0:Z.currency)||"GBP",ee=(0,c.A)(),te=(0,d.A)(ee.breakpoints.down("lg"));(0,r.useEffect)(()=>{if(t){W(t);const e=D.TS[t];e&&(g(e.name),I(e=>(0,n.A)((0,n.A)({},e),{},{categories:[t]})))}else if(Y){W(Y);const e=Object.values(D.TS).find(e=>e.slug===Y);e&&(W(Object.keys(D.TS).find(e=>D.TS[e].slug===Y)),g(e.name),I(e=>(0,n.A)((0,n.A)({},e),{},{categories:[Object.keys(D.TS).find(e=>D.TS[e].slug===Y)]})))}},[t,Y]);const ie=(0,r.useMemo)(()=>{try{const e=e=>{var t,i;const n="GBP"===$&&null!==(t=null!==(i=null===e||void 0===e?void 0:e.price_gbp)&&void 0!==i?i:null===e||void 0===e?void 0:e.priceGbp)&&void 0!==t?t:null===e||void 0===e?void 0:e.price,o=Number("string"===typeof n?n.replace(/[^0-9.]/g,""):n);return Number.isFinite(o)?o:0},t=Array.isArray(A)?A.map(e).filter(e=>Number.isFinite(e)&&e>0):[];return 0===t.length?"GBP"===$?2e3:2e6:Math.max(...t)}catch(e){return"GBP"===$?2e3:2e6}},[A,$]),ne="GBP"===$?2e3:2e6,[oe,re]=(0,r.useState)(ne);(0,r.useEffect)(()=>{(async()=>{try{const{category:e,brand:t,inStock:i,condition:n}=N,o=await O.QO.getAll({page:1,limit:1e3,category:e,brand:t,inStock:i,condition:n,currency:$});if(o&&o.success&&Array.isArray(o.data)){const e=e=>{var t,i;const n="GBP"===$&&null!==(t=null!==(i=null===e||void 0===e?void 0:e.price_gbp)&&void 0!==i?i:null===e||void 0===e?void 0:e.priceGbp)&&void 0!==t?t:null===e||void 0===e?void 0:e.price,o=Number("string"===typeof n?n.replace(/[^0-9.]/g,""):n);return Number.isFinite(o)?o:0},t=o.data.map(e).filter(e=>Number.isFinite(e)&&e>0);if(t.length>0){const e=Math.max(...t);re(e)}}}catch(e){0}})()},[N.category,N.brand,N.inStock,N.condition,$]);const se=(0,r.useMemo)(()=>{const e="GBP"===$?2e3:2e6;return Math.max(oe||e,ie||e)},[oe,ie,$]),ae={hidden:{opacity:0,y:12,scale:.98},show:{opacity:1,y:0,scale:1,transition:{duration:.35,ease:[.22,1,.36,1]}}},le=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"newest";const i=Array.isArray(e)?[...e]:[],n=e=>{const t=null===e||void 0===e?void 0:e.price,i=Number("string"===typeof t?t.replace(/[^0-9.]/g,""):t);return Number.isFinite(i)?i:0},o=e=>{var t;return Number(null!==(t=null===e||void 0===e?void 0:e.rating)&&void 0!==t?t:0)},r=e=>{const t=null!==e&&void 0!==e&&e.date?new Date(e.date):null;return t instanceof Date&&!isNaN(t)?t.getTime():0},s=e=>{var t;return null!==(t={Excellent:4,"Very Good":3,Good:2,Fair:1}[String(e)])&&void 0!==t?t:0};switch(t){case"price_low":return i.sort((e,t)=>n(e)-n(t));case"price_high":return i.sort((e,t)=>n(t)-n(e));case"newest":return i.sort((e,t)=>r(t)-r(e));case"rating":return i.sort((e,t)=>o(t)-o(e));case"condition":return i.sort((e,t)=>s(null===t||void 0===t?void 0:t.condition)-s(null===e||void 0===e?void 0:e.condition));default:return i}};(0,r.useEffect)(()=>{const e="Shop phones, tablets, computers, and accessories with finance, warranty, and trade\u2011in options.",t="https://itsxtrapush.com/gadgets";document.title="Xtrapush Gadgets : A little push to get you there";const i=(e,t)=>{let i=document.querySelector('meta[name="'.concat(e,'"]'));i||(i=document.createElement("meta"),i.setAttribute("name",e),document.head.appendChild(i)),i.setAttribute("content",t)},n=(e,t)=>{let i=document.querySelector('meta[property="'.concat(e,'"]'));i||(i=document.createElement("meta"),i.setAttribute("property",e),document.head.appendChild(i)),i.setAttribute("content",t)};i("description",e),i("keywords","Xtrapush Gadgets, Xtrapush, gadgets, phones, tablets, accessories, computers, laptops, PCs, chargers, cases, headphones, earbuds, smartwatches, wearables, warranty, finance, trade-in");let o=document.querySelector('link[rel="canonical"]');o||(o=document.createElement("link"),o.setAttribute("rel","canonical"),document.head.appendChild(o)),o.setAttribute("href",t),n("og:title","Xtrapush Gadgets : A little push to get you there"),n("og:description",e),n("og:url",t),i("twitter:title","Xtrapush Gadgets : A little push to get you there"),i("twitter:description",e);try{const i={"@context":"https://schema.org","@type":"CollectionPage",name:"Xtrapush Gadgets",description:e,url:t,isPartOf:{"@type":"WebSite",name:"Xtrapush Gadgets",url:"https://itsxtrapush.com/"},breadcrumb:{"@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:"https://itsxtrapush.com/"},{"@type":"ListItem",position:2,name:"Gadgets",item:t}]}};let n=document.getElementById("ld-collectionpage");n||(n=document.createElement("script"),n.id="ld-collectionpage",n.type="application/ld+json",document.head.appendChild(n)),n.textContent=JSON.stringify(i)}catch(r){}},[]);const[ce,de]=(0,r.useState)(1),[he,xe]=(0,r.useState)(0),ue=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{J||M(!0),z(null);const l=(0,n.A)((0,n.A)({page:ce,limit:20},e),{},{currency:$});console.log("\ud83d\udd0d Fetching gadgets with filters:",l),console.log("API URL:","https://sparkle-pro.co.uk/api");const c=await O.QO.getAll(l);if(console.log("\ud83d\udce1 Raw API response:",c),c&&c.success&&Array.isArray(c.data)){var t,o,r,s,a;console.log("\u2705 Valid gadgets response:",c.data.length,"gadgets"),f(e=>ce>1?[...e,...c.data]:c.data);const l=null!==(t=null!==(o=null===(r=c.pagination)||void 0===r?void 0:r.total)&&void 0!==o?o:c.count)&&void 0!==t?t:c.data.length;xe(l);const d=ce>1?[...A,...c.data]:c.data;console.log("\ud83e\uddee Base list count:",d.length);let x=d;const u=j?x.filter(e=>"".concat(e.name," ").concat(e.description," ").concat(e.brand," ").concat(e.model).toLowerCase().includes(j.toLowerCase())):x;console.log("\ud83d\udd0e After search filter count:",u.length);const p=null!==(s=null!==(a=null===e||void 0===e?void 0:e.sortBy)&&void 0!==a?a:N.sortBy)&&void 0!==s?s:"newest",g=le(u,p);console.log("\ud83d\udcca Final sorted count:",g.length),w(g);try{sessionStorage.setItem(i,JSON.stringify({timestamp:Date.now(),gadgets:d,total:l,filters:(0,n.A)({},N),page:ce}))}catch(h){}}else console.error("\u274c Invalid response structure:",c),f([]),w([]),z("Invalid response from server")}catch(x){var l,c,d;console.error("\u274c Error fetching gadgets:",x),console.error("Error details:",{message:x.message,status:null===(l=x.response)||void 0===l?void 0:l.status,url:null===(c=x.config)||void 0===c?void 0:c.url,responseData:null===(d=x.response)||void 0===d?void 0:d.data}),z("Failed to connect to server: ".concat(x.message))}finally{M(!1)}};(0,r.useEffect)(()=>{try{const t=sessionStorage.getItem(i);if(t){const i=JSON.parse(t),o=Date.now()-((null===i||void 0===i?void 0:i.timestamp)||0);var e;if(Array.isArray(null===i||void 0===i?void 0:i.gadgets)&&i.gadgets.length>0&&o<=18e4)f(i.gadgets),xe(Number(i.total)||i.gadgets.length),w(le(i.gadgets,(null===(e=i.filters)||void 0===e?void 0:e.sortBy)||"newest")),I((0,n.A)((0,n.A)({},N),i.filters)),de(Number(i.page)||1),M(!1),U(!0)}}catch(t){}ue(N)},[ce]),(0,r.useEffect)(()=>{if(T.state&&T.state.searchQuery){const e=T.state.searchQuery;S(e),pe(e,A)}},[T.state,A]),(0,r.useEffect)(()=>{const e=new URLSearchParams(T.search).get("search");e&&e!==j&&(S(e),pe(e,A))},[T.search,A]),(0,r.useEffect)(()=>{if(T.state&&T.state.category){const e=T.state.category,t=(0,n.A)((0,n.A)({},N),{},{category:e});I(t),de(1),f([]),w([]),ue(t),T.state.categoryTitle&&g(T.state.categoryTitle)}},[T.state]);const pe=function(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v;var n;if(!e||""===e.trim())return void w(le(i,null!==(n=N.sortBy)&&void 0!==n?n:"newest"));const o=i.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())||t.description.toLowerCase().includes(e.toLowerCase()));w(le(o,null!==(t=N.sortBy)&&void 0!==t?t:"newest"))},ge=e=>{I(e),de(1),f([]),w([]),ue(e)},me=()=>{B(!G)},be=(0,D.oH)(F,j),ye=(0,D.OI)(F,j),Ae=(0,D.zY)([{name:"Home",url:"/"},{name:"Gadgets",url:"/gadgets"},...F&&D.TS[F]?[{name:D.TS[F].name,url:"/".concat(D.TS[F].slug)}]:[]]);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(R.A,{title:be,description:ye,canonical:(0,D.KQ)(T.pathname),structuredData:Ae}),(0,E.jsx)(s.P.div,{className:"deep bg-primary w-full min-h-screen overflow-hidden",initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{duration:.35,ease:[.22,1,.36,1]},children:(0,E.jsx)("div",{className:"".concat(o.A.paddingX," ").concat(o.A.flexCenter),children:(0,E.jsxs)("div",{className:"".concat(o.A.boxWidth),children:[(0,E.jsx)("div",{className:"flex justify-center px-2 sm:px-4 mt-2 sm:mt-4 mb-4 sm:mb-6",children:(0,E.jsx)(l.A,{onSearch:e=>{S(e),pe(e,A)},onInputChange:e=>{S(e),pe(e,A)},initialQuery:j})}),te&&(0,E.jsx)(x.A,{sx:{mb:2,display:"flex",justifyContent:"center",px:2},children:(0,E.jsx)(m.A,{startIcon:(0,E.jsx)(P.A,{}),onClick:me,variant:"contained",sx:{bgcolor:"#051323",color:"white","&:hover":{bgcolor:"#0a2540"},borderRadius:2,px:4,py:1.5,fontSize:"1rem",fontWeight:600},children:"Filter Gadgets"})}),(0,E.jsxs)(x.A,{sx:{display:"flex",gap:2,px:2},children:[!te&&(0,E.jsx)(x.A,{sx:{width:280,flexShrink:0,"& > *":{bgcolor:"#051323 !important",color:"white !important"}},children:(0,E.jsx)(_,{onFiltersChange:ge,currentFilters:N,maxPrice:se,currency:$})}),(0,E.jsxs)(X.Ay,{anchor:"left",open:G,onClose:me,sx:{"& .MuiDrawer-paper":{width:{xs:"90vw",sm:"400px"},maxWidth:"400px",bgcolor:"#051323",color:"white",p:0}},children:[(0,E.jsxs)(x.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:2,borderBottom:1,borderColor:"rgba(255, 255, 255, 0.2)",bgcolor:"#051323"},children:[(0,E.jsx)(p.A,{variant:"h6",component:"h2",sx:{color:"white"},children:"Filter Gadgets"}),(0,E.jsx)(Q.A,{onClick:me,size:"small",sx:{color:"white"},children:(0,E.jsx)(K.A,{})})]}),(0,E.jsx)(x.A,{sx:{p:1,overflow:"auto",height:"calc(100% - 65px)",bgcolor:"#051323"},children:(0,E.jsx)(_,{onFiltersChange:e=>{ge(e)},currentFilters:N,isMobile:!0,maxPrice:se,currency:$})})]}),(0,E.jsx)(x.A,{sx:{flex:1,minWidth:0},children:(0,E.jsxs)("section",{className:"flex flex-col items-center text-center w-[95%] mx-auto px-3 py-4 sm:w-auto sm:p-12 sm:pt-4",children:[(0,E.jsxs)("h1",{className:"font-poppins font-semibold text-[32px] xs:text-[40px] sm:text-[52px] text-white leading-tight mb-6",children:["Explore Our ",(0,E.jsx)("span",{className:"text-gradient",children:"Gadgets"})]}),k?(0,E.jsxs)("div",{className:"flex flex-col items-center mt-8 mb-16",children:[(0,E.jsx)(u.A,{sx:{color:"white",mb:2}}),(0,E.jsx)("div",{className:"text-white text-xl",children:"Loading gadgets..."})]}):C?(0,E.jsxs)("div",{className:"mt-8 mb-16",children:[(0,E.jsx)(q.A,{severity:"error",sx:{mb:2},children:C}),(0,E.jsxs)("div",{className:"text-white text-lg",children:["API URL: ","https://sparkle-pro.co.uk/api"]}),(0,E.jsx)("div",{className:"text-white text-sm mt-2",children:"Check browser console for detailed error information."})]}):0===v.length?(0,E.jsx)("div",{className:"text-white text-xl mt-8 mb-16",children:j?'No gadgets found matching "'.concat(j,'". Try a different search term.'):"No gadgets available."}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(p.A,{variant:"body1",sx:{color:"white",mb:3,opacity:.8},children:["Showing ",v.length," of ",he," gadget",1!==he?"s":"",j&&' for "'.concat(j,'"')]}),(0,E.jsx)(r.Suspense,{fallback:(0,E.jsx)("div",{className:"text-white opacity-70",children:"Loading items\u2026"}),children:(0,E.jsx)(s.P.div,{className:"w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-6",variants:{hidden:{},show:{transition:{staggerChildren:.06,delayChildren:.04}}},initial:"hidden",animate:"show",children:v.map(e=>{var t,i,n,o,r;return(0,E.jsx)(s.P.div,{variants:ae,children:(0,E.jsx)(H,{gadgetId:e.id,children:(0,E.jsx)(a.N_,{to:"/gadgets/".concat(e.id),onClick:e=>{try{window.__dialogOpen&&(e.preventDefault(),e.stopPropagation())}catch(t){}},children:(0,E.jsx)(V,{id:e.id,title:e.name,date:e.date||"Available Now",number:(()=>{const t=[null===e||void 0===e?void 0:e.stock_quantity,null===e||void 0===e?void 0:e.qty,null===e||void 0===e?void 0:e.number];for(const e of t){const t=Number(e);if(Number.isFinite(t)&&t>=0)return t}return null!==e&&void 0!==e&&e.in_stock||null!==e&&void 0!==e&&e.inStock?1:0})(),image:e.image,description:e.description,price:e.price,priceMwk:null!==(t=null!==(i=e.price_mwk)&&void 0!==i?i:e.priceMwk)&&void 0!==t?t:e.price,priceGbp:null!==(n=e.price_gbp)&&void 0!==n?n:e.priceGbp,monthlyPrice:null!==(o=e.monthly_price)&&void 0!==o?o:e.monthlyPrice,monthlyPriceGbp:null!==(r=e.monthly_price_gbp)&&void 0!==r?r:e.monthlyPriceGbp,brand:e.brand,condition:e.condition})},e.id)})},"card-".concat(e.id))})})}),v.length<he&&(0,E.jsx)(x.A,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,E.jsx)(m.A,{variant:"contained",color:"primary",onClick:()=>de(e=>e+1),children:"View More"})})]})]})})]})]})})})]})}}}]);