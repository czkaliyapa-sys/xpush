"use strict";(self.webpackChunkitsxtrapush=self.webpackChunkitsxtrapush||[]).push([[529],{43529(e,o,r){r.d(o,{A:()=>pe});var i=r(89379),t=r(9950),l=r(81831),n=r(83687),a=r(23653),s=r(20615),d=r(80218),c=r(6732),x=r(65250),h=r(27321),p=r(98519),u=r(80727),b=r(94305),g=r(18643),m=r(22403),v=r(82503),A=r(47371),y=r(15804),f=r(11251),j=r(31760),w=r(9013),C=r(84453),k=r(45530),S=r(43405),D=r(69335),W=r(15672),I=r(92994),B=r(72117),E=r(98506),P=r(6503),M=r(89470),R=r(44414);const _=e=>{var o,r;let{onComplete:i,onCancel:l,userAuthenticated:n=!1}=e;const[a,s]=(0,t.useState)(0),[d,c]=(0,t.useState)(0),[x,u]=(0,t.useState)(!1),[b,g]=(0,t.useState)(!1),[v]=(0,t.useState)([{icon:"\ud83d\udd12",title:"Bank-Level Security",desc:"Military-grade encryption protecting your data"},{icon:"\u26a1",title:"Lightning Fast",desc:"Instant verification in under 60 seconds"},{icon:"\ud83c\udfc6",title:"Industry Leading",desc:"Top-rated verification system trusted by millions"},{icon:"\ud83d\udee1\ufe0f",title:"Zero Risk Guarantee",desc:"Full protection on all transactions"}]),A=[{name:"Identity Verification",description:"Verifying your identity"},{name:"Financial Eligibility",description:"Checking your eligibility"},{name:"Credit Assessment",description:"Assessing creditworthiness"},{name:"Risk Analysis",description:"Advanced fraud detection"},{name:"Final Review",description:"Final review and approval"}];return(0,t.useEffect)(()=>{if(!n)return;const e=setInterval(()=>{s(o=>{const r=o+1;return r>=100?(clearInterval(e),u(!0),setTimeout(()=>{g(!0)},800),100):r});const o=Math.min(Math.floor((a+5)/20),A.length-1);o!==d&&c(o)},60);return()=>clearInterval(e)},[n,a,d,A.length]),n?b?(0,R.jsxs)(h.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",width:"100%",p:{xs:2,sm:4},textAlign:"center",bgcolor:"rgba(15, 23, 42, 0.98)",position:"relative"},children:[(0,R.jsx)(h.A,{sx:{mb:4,animation:"scaleIn 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards"},children:(0,R.jsx)(M.A,{sx:{fontSize:{xs:100,sm:120},color:"#4CAF50",mb:2,filter:"drop-shadow(0 0 20px rgba(76, 175, 80, 0.5))",animation:"pulse 1s ease-in-out infinite"}})}),(0,R.jsxs)(h.A,{sx:{mb:4,maxWidth:"800px"},children:[(0,R.jsx)(p.A,{variant:"h2",sx:{color:"#4CAF50",mb:2,fontWeight:800,fontSize:{xs:"2.2rem",sm:"3rem"},textShadow:"0 0 25px rgba(76, 175, 80, 0.4)"},children:"\ud83c\udf89 Success!"}),(0,R.jsx)(p.A,{variant:"h4",sx:{color:"white",mb:3,fontWeight:700},children:"Application Received Successfully!"}),(0,R.jsx)(p.A,{variant:"h6",sx:{color:"rgba(255,255,255,0.9)",mb:4,lineHeight:1.6,maxWidth:"700px"},children:"Congratulations! Your installment application has been successfully processed and is now under review by our expert team."})]}),(0,R.jsx)(h.A,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(3, 1fr)"},gap:3,mb:4,width:"100%",maxWidth:"900px"},children:["\u23f1\ufe0f Lightning Fast Response","\ud83c\udfc6 Industry Best Rates","\ud83d\udd12 Bank-Grade Security"].map((e,o)=>(0,R.jsxs)(h.A,{sx:{p:3,bgcolor:"rgba(76, 175, 80, 0.1)",borderRadius:3,border:"1px solid rgba(76, 175, 80, 0.3)",backdropFilter:"blur(10px)",transform:"translateY(0)",transition:"transform 0.3s ease","&:hover":{transform:"translateY(-5px)",boxShadow:"0 10px 25px rgba(76, 175, 80, 0.2)"}},children:[(0,R.jsx)(p.A,{variant:"h5",sx:{mb:1},children:e.split(" ")[0]}),(0,R.jsx)(p.A,{variant:"subtitle1",sx:{color:"#4CAF50",fontWeight:700,mb:1},children:e.split(" ").slice(1).join(" ")}),(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255,255,255,0.7)"},children:"Why we stand out from the competition"})]},o))}),(0,R.jsxs)(h.A,{sx:{mt:2,p:4,bgcolor:"rgba(76, 175, 80, 0.15)",borderRadius:3,border:"2px solid rgba(76, 175, 80, 0.4)",width:"100%",maxWidth:"600px",backdropFilter:"blur(15px)",boxShadow:"0 0 30px rgba(76, 175, 80, 0.2)"},children:[(0,R.jsx)(p.A,{variant:"h6",sx:{color:"#4CAF50",fontWeight:700,mb:2},children:"\u2705 Application Confirmed"}),(0,R.jsxs)(h.A,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:2,mb:2},children:[(0,R.jsxs)(h.A,{children:[(0,R.jsx)(p.A,{variant:"body2",sx:{color:"rgba(255,255,255,0.8)",mb:.5},children:"Reference ID:"}),(0,R.jsxs)(p.A,{variant:"subtitle2",sx:{color:"white",fontWeight:700},children:["XP-",Date.now().toString().slice(-6)]})]}),(0,R.jsxs)(h.A,{children:[(0,R.jsx)(p.A,{variant:"body2",sx:{color:"rgba(255,255,255,0.8)",mb:.5},children:"Status:"}),(0,R.jsx)(p.A,{variant:"subtitle2",sx:{color:"#4CAF50",fontWeight:700},children:"Under Review"})]})]}),(0,R.jsx)(p.A,{variant:"body2",sx:{color:"rgba(255,255,255,0.9)",mt:2},children:"\ud83d\udce7 You will receive an email confirmation shortly"}),(0,R.jsx)(p.A,{variant:"body2",sx:{color:"rgba(255,255,255,0.9)"},children:"\ud83d\udd50 Expected response: Within 24-48 business hours"})]}),(0,R.jsxs)(h.A,{sx:{display:"flex",gap:3,mt:4},children:[(0,R.jsx)(m.A,{variant:"outlined",onClick:l,sx:{color:"rgba(255,255,255,0.7)",borderColor:"rgba(255,255,255,0.3)",px:4,py:1.5,"&:hover":{bgcolor:"rgba(255,255,255,0.1)",borderColor:"rgba(255,255,255,0.5)"}},children:"Continue Shopping"}),(0,R.jsx)(m.A,{variant:"contained",onClick:i,sx:{bgcolor:"#4CAF50",color:"white",px:4,py:1.5,fontWeight:700,"&:hover":{bgcolor:"#43A047",transform:"translateY(-2px)",boxShadow:"0 5px 15px rgba(76, 175, 80, 0.4)"},transition:"all 0.3s ease"},children:"Close & Explore More"})]}),(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255,255,255,0.6)",mt:3,display:"block"},children:"Thank you for choosing Xtrapush - Your trusted partner in premium gadgets"})]}):(0,R.jsxs)(h.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",width:"100%",p:{xs:2,sm:4},textAlign:"center",bgcolor:"rgba(15, 23, 42, 0.98)",position:"relative"},children:[(0,R.jsx)(h.A,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(4, 1fr)"},gap:2,mb:4,width:"100%",maxWidth:"1200px"},children:v.map((e,o)=>(0,R.jsxs)(h.A,{sx:{p:2,bgcolor:"rgba(72, 206, 219, 0.08)",borderRadius:2,border:"1px solid rgba(72, 206, 219, 0.15)",backdropFilter:"blur(10px)"},children:[(0,R.jsx)(p.A,{variant:"h4",sx:{mb:1},children:e.icon}),(0,R.jsx)(p.A,{variant:"subtitle2",sx:{color:"#48CEDB",fontWeight:600,mb:.5},children:e.title}),(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255,255,255,0.7)",fontSize:"0.7rem"},children:e.desc})]},o))}),(0,R.jsxs)(h.A,{sx:{mb:4,maxWidth:"800px"},children:[(0,R.jsx)(p.A,{variant:"h3",sx:{color:"#48CEDB",mb:2,fontWeight:800,fontSize:{xs:"2rem",sm:"2.8rem"},textShadow:"0 0 20px rgba(72, 206, 219, 0.3)"},children:"\ud83d\udee1\ufe0f Advanced Verification System"}),(0,R.jsx)(p.A,{variant:"h5",sx:{color:"white",mb:1,fontWeight:600},children:"Verifying Your Eligibility"}),(0,R.jsx)(p.A,{variant:"body1",sx:{color:"rgba(255,255,255,0.85)",mb:3,lineHeight:1.6},children:"Our industry-leading verification system is processing your application with military-grade security protocols."})]}),(0,R.jsxs)(h.A,{sx:{width:"100%",maxWidth:"600px",mb:4},children:[(0,R.jsxs)(h.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,R.jsx)(p.A,{variant:"body2",sx:{color:"rgba(255,255,255,0.9)",fontWeight:600},children:"Verification Progress"}),(0,R.jsxs)(p.A,{variant:"body2",sx:{color:"#48CEDB",fontWeight:700},children:[a,"%"]})]}),(0,R.jsx)(E.A,{variant:"determinate",value:a,sx:{height:12,borderRadius:6,backgroundColor:"rgba(255,255,255,0.1)",mb:2,boxShadow:"0 0 15px rgba(72, 206, 219, 0.2)","& .MuiLinearProgress-bar":{backgroundColor:"#48CEDB",backgroundImage:"linear-gradient(90deg, #48CEDB 0%, #3ab9c7 100%)",borderRadius:6}}}),(0,R.jsx)(h.A,{sx:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:1,mt:2},children:A.map((e,o)=>(0,R.jsx)(h.A,{sx:{p:1,borderRadius:1,bgcolor:o<=d?"rgba(72, 206, 219, 0.2)":"rgba(255,255,255,0.05)",border:"1px solid ".concat(o<=d?"#48CEDB":"rgba(255,255,255,0.1)")},children:(0,R.jsx)(p.A,{variant:"caption",sx:{color:o<=d?"#48CEDB":"rgba(255,255,255,0.5)",fontWeight:o<=d?600:400,fontSize:"0.65rem"},children:e.name.split(" ")[0]})},o))})]}),(0,R.jsxs)(h.A,{sx:{mt:2,p:3,bgcolor:"rgba(255,255,255,0.08)",borderRadius:3,width:"100%",maxWidth:"600px",backdropFilter:"blur(10px)",border:"1px solid rgba(72, 206, 219, 0.2)"},children:[(0,R.jsx)(P.A,{size:60,thickness:3,sx:{mb:2,color:"#48CEDB",animationDuration:"1.5s"}}),(0,R.jsx)(p.A,{variant:"h6",sx:{color:"#48CEDB",mb:1,fontWeight:700},children:null===(o=A[d])||void 0===o?void 0:o.name}),(0,R.jsx)(p.A,{variant:"body2",sx:{color:"white",fontWeight:500,mb:1},children:null===(r=A[d])||void 0===r?void 0:r.description}),(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255,255,255,0.7)",fontStyle:"italic"},children:"Powered by advanced AI algorithms \u2022 Real-time processing"})]}),(0,R.jsxs)(h.A,{sx:{display:"flex",gap:3,mt:4},children:[(0,R.jsx)(m.A,{variant:"outlined",onClick:l,sx:{color:"rgba(255,255,255,0.7)",borderColor:"rgba(255,255,255,0.3)","&:hover":{bgcolor:"rgba(255,255,255,0.1)",borderColor:"rgba(255,255,255,0.5)"}},children:"Cancel Verification"}),(0,R.jsxs)(m.A,{variant:"contained",disabled:!0,sx:{bgcolor:"rgba(72, 206, 219, 0.3)",color:"rgba(255,255,255,0.5)",cursor:"not-allowed"},children:["Processing... ",a,"%"]})]})]}):(0,R.jsxs)(h.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",width:"100%",p:3,textAlign:"center",bgcolor:"rgba(15, 23, 42, 0.95)"},children:[(0,R.jsxs)(h.A,{sx:{mb:4},children:[(0,R.jsx)(p.A,{variant:"h4",sx:{color:"#48CEDB",mb:2,fontWeight:700,fontSize:{xs:"1.8rem",sm:"2.5rem"}},children:"\ud83d\udd10 Secure Verification Required"}),(0,R.jsx)(p.A,{variant:"h6",sx:{color:"white",mb:1,fontWeight:600},children:"Authentication Needed"})]}),(0,R.jsx)(p.A,{variant:"body1",sx:{color:"rgba(255,255,255,0.85)",mb:4,maxWidth:"600px",lineHeight:1.6},children:"To protect your account and ensure the highest level of security, we require you to sign in before proceeding with your installment application."}),(0,R.jsx)(h.A,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)"},gap:2,mb:4,width:"100%",maxWidth:"600px"},children:v.slice(0,2).map((e,o)=>(0,R.jsxs)(h.A,{sx:{p:2,bgcolor:"rgba(72, 206, 219, 0.1)",borderRadius:2,border:"1px solid rgba(72, 206, 219, 0.2)"},children:[(0,R.jsx)(p.A,{variant:"h5",sx:{mb:1},children:e.icon}),(0,R.jsx)(p.A,{variant:"subtitle2",sx:{color:"#48CEDB",fontWeight:600,mb:.5},children:e.title}),(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255,255,255,0.7)"},children:e.desc})]},o))}),(0,R.jsxs)(h.A,{sx:{display:"flex",gap:2,mt:2},children:[(0,R.jsx)(m.A,{variant:"outlined",onClick:l,sx:{color:"#48CEDB",borderColor:"#48CEDB","&:hover":{bgcolor:"rgba(72, 206, 219, 0.1)",borderColor:"#48CEDB"}},children:"Back to Shopping"}),(0,R.jsx)(m.A,{variant:"contained",onClick:l,sx:{bgcolor:"#48CEDB",color:"#0f172a","&:hover":{bgcolor:"#3ab9c7"}},children:"Sign In Now"})]})]})};var F=r(38796),N=r(55884),T=r(86057),O=r(16253),L=r(87209),z=r(65812),q=r(85935),G=r(56690),Y=r(55547),H=r(52036),U=r(66424),V=r(81393),K=r(35118),Q=r(61106),J=r(4143),X=r(9940),Z=r(79697),$=r(96195),ee=r(45982),oe=r(72619),re=r(13285),ie=r(73669),te=r(47859),le=r(77551),ne=r(34256),ae=r(69053),se=r(86545),de=r(81211);const ce=(0,$.Ay)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),xe=(0,$.Ay)(F.A)(e=>{let{theme:o}=e;return{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",borderRadius:16,border:"1px solid rgba(255, 255, 255, 0.1)",padding:o.spacing(3)}}),he=e=>{let{gadget:o,variant:r,installmentPlan:l,user:n,onSubmit:a,onCancel:s,formatPrice:d}=e;const[c,x]=(0,t.useState)(0),[u,g]=(0,t.useState)(!1),[A,y]=(0,t.useState)(""),[f,j]=(0,t.useState)(!1),[w,C]=(0,t.useState)(""),[S,D]=((0,t.useRef)(null),(0,t.useState)({fullName:(null===n||void 0===n?void 0:n.displayName)||(null===n||void 0===n?void 0:n.fullName)||"",email:(null===n||void 0===n?void 0:n.email)||"",phone:(null===n||void 0===n?void 0:n.phone)||"",dateOfBirth:"",nationalId:"",address:(null===n||void 0===n?void 0:n.address)||"",town:(null===n||void 0===n?void 0:n.town)||"",postcode:(null===n||void 0===n?void 0:n.postcode)||"",country:"Malawi"})),[W,I]=(0,t.useState)({employmentStatus:"",employerName:"",jobTitle:"",monthlyIncome:"",employmentDuration:"",employerPhone:"",employerAddress:""}),[B,_]=(0,t.useState)({nationalIdFront:null,nationalIdBack:null,proofOfAddress:null,proofOfIncome:null,selfie:null}),[F,$]=(0,t.useState)({}),he=[{label:"Personal Info",icon:(0,R.jsx)(re.A,{})},{label:"Employment",icon:(0,R.jsx)(ie.A,{})},{label:"Documents",icon:(0,R.jsx)(te.A,{})},{label:"Review",icon:(0,R.jsx)(le.A,{})}],pe=["Full-time Employed","Part-time Employed","Self-employed","Business Owner","Contract Worker","Government Employee","Retired","Student","Other"],ue=["Below MWK 100,000","MWK 100,000 - 250,000","MWK 250,000 - 500,000","MWK 500,000 - 1,000,000","MWK 1,000,000 - 2,000,000","Above MWK 2,000,000"],be=[{key:"nationalIdFront",label:"National ID (Front)",icon:(0,R.jsx)(se.A,{}),required:!0},{key:"nationalIdBack",label:"National ID (Back)",icon:(0,R.jsx)(se.A,{}),required:!0},{key:"proofOfAddress",label:"Proof of Address",icon:(0,R.jsx)(de.A,{}),required:!0,hint:"Utility bill, bank statement, or lease agreement"},{key:"proofOfIncome",label:"Proof of Income",icon:(0,R.jsx)(ne.A,{}),required:!0,hint:"Pay slip, bank statement, or business registration"},{key:"selfie",label:"Selfie with ID",icon:(0,R.jsx)(ae.A,{}),required:!0,hint:"Clear photo of you holding your ID"}];if(f)return(0,R.jsxs)(h.A,{sx:{textAlign:"center",py:6,px:3,background:"linear-gradient(135deg, rgba(15, 23, 42, 0.98) 0%, rgba(30, 41, 59, 0.98) 100%)",borderRadius:4,minHeight:"60vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,R.jsx)(M.A,{sx:{fontSize:100,color:"#4CAF50",mb:3}}),(0,R.jsx)(p.A,{variant:"h4",sx:{color:"#4CAF50",fontWeight:700,mb:2},children:"Application Submitted!"}),(0,R.jsxs)(p.A,{variant:"h6",sx:{color:"white",mb:3},children:["Reference: ",(0,R.jsx)("strong",{children:w})]}),(0,R.jsxs)(xe,{sx:{maxWidth:500,mb:4},children:[(0,R.jsx)(p.A,{variant:"body1",sx:{color:"rgba(255,255,255,0.9)",mb:2},children:"Your installment application has been received and is now under review."}),(0,R.jsx)(N.A,{sx:{my:2,borderColor:"rgba(255,255,255,0.1)"}}),(0,R.jsxs)(h.A,{sx:{textAlign:"left"},children:[(0,R.jsxs)(p.A,{variant:"body2",sx:{color:"rgba(255,255,255,0.7)",mb:1},children:["\ud83d\udce7 Confirmation email sent to ",(0,R.jsx)("strong",{style:{color:"#48CEDB"},children:S.email})]}),(0,R.jsxs)(p.A,{variant:"body2",sx:{color:"rgba(255,255,255,0.7)",mb:1},children:["\u23f1\ufe0f Expected review time: ",(0,R.jsx)("strong",{style:{color:"#48CEDB"},children:"24-48 hours"})]}),(0,R.jsxs)(p.A,{variant:"body2",sx:{color:"rgba(255,255,255,0.7)"},children:["\ud83d\udcf1 You'll receive SMS updates at ",(0,R.jsx)("strong",{style:{color:"#48CEDB"},children:S.phone})]})]})]}),(0,R.jsx)(T.A,{severity:"info",sx:{maxWidth:500,mb:3},children:'You can track your application status in your Dashboard under "My Applications"'}),(0,R.jsx)(m.A,{variant:"contained",onClick:s,sx:{bgcolor:"#48CEDB",color:"#0f172a",px:4,py:1.5,fontWeight:600,"&:hover":{bgcolor:"#3ab9c7"}},children:"Go to Dashboard"})]});const ge=()=>(0,R.jsxs)(O.A,{container:!0,spacing:3,children:[(0,R.jsxs)(O.A,{item:!0,xs:12,children:[(0,R.jsxs)(p.A,{variant:"h6",sx:{color:"#48CEDB",mb:1,display:"flex",alignItems:"center",gap:1},children:[(0,R.jsx)(te.A,{})," Required Documents"]}),(0,R.jsx)(p.A,{variant:"body2",sx:{color:"rgba(255,255,255,0.7)",mb:3},children:"Upload clear photos or scans of the following documents. Max file size: 5MB per document."})]}),be.map(e=>(0,R.jsx)(O.A,{item:!0,xs:12,md:6,children:(0,R.jsx)(Y.A,{sx:{bgcolor:B[e.key]?"rgba(76, 175, 80, 0.1)":"rgba(255,255,255,0.05)",border:B[e.key]?"1px solid rgba(76, 175, 80, 0.3)":"1px solid rgba(255,255,255,0.1)",borderRadius:2},children:(0,R.jsxs)(H.A,{children:[(0,R.jsxs)(h.A,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[(0,R.jsx)(h.A,{sx:{color:B[e.key]?"#4CAF50":"#48CEDB"},children:e.icon}),(0,R.jsxs)(h.A,{sx:{flex:1},children:[(0,R.jsxs)(p.A,{variant:"subtitle2",sx:{color:"white",fontWeight:600},children:[e.label," ",e.required&&(0,R.jsx)("span",{style:{color:"#f44336"},children:"*"})]}),e.hint&&(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255,255,255,0.5)"},children:e.hint})]}),B[e.key]&&(0,R.jsx)(M.A,{sx:{color:"#4CAF50"}})]}),B[e.key]?(0,R.jsxs)(h.A,{children:[(0,R.jsxs)(h.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[(0,R.jsxs)(p.A,{variant:"body2",sx:{color:"#4CAF50",fontSize:"0.8rem"},children:["\u2713 ",B[e.key].name]}),(0,R.jsx)(U.A,{size:"small",onClick:()=>{return o=e.key,_(e=>(0,i.A)((0,i.A)({},e),{},{[o]:null})),void $(e=>(0,i.A)((0,i.A)({},e),{},{[o]:0}));var o},sx:{color:"#f44336"},children:(0,R.jsx)(oe.A,{fontSize:"small"})})]}),F[e.key]<100&&(0,R.jsx)(E.A,{variant:"determinate",value:F[e.key]||0,sx:{height:4,borderRadius:2}})]}):(0,R.jsxs)(m.A,{component:"label",variant:"outlined",fullWidth:!0,startIcon:(0,R.jsx)(ee.A,{}),sx:{borderColor:"rgba(255,255,255,0.3)",color:"rgba(255,255,255,0.7)","&:hover":{borderColor:"#48CEDB",color:"#48CEDB"}},children:["Upload",(0,R.jsx)(ce,{type:"file",accept:"image/*,.pdf",onChange:o=>((e,o)=>{const r=o.target.files[0];if(r){if(r.size>5242880)return void y("File size must be less than 5MB");if(!["image/jpeg","image/png","image/webp","application/pdf"].includes(r.type))return void y("Only JPG, PNG, WebP, and PDF files are allowed");$(o=>(0,i.A)((0,i.A)({},o),{},{[e]:0}));const o=setInterval(()=>{$(r=>{const t=(r[e]||0)+20;return t>=100?(clearInterval(o),(0,i.A)((0,i.A)({},r),{},{[e]:100})):(0,i.A)((0,i.A)({},r),{},{[e]:t})})},200);_(o=>(0,i.A)((0,i.A)({},o),{},{[e]:r})),y("")}})(e.key,o)})]})]})})},e.key)),(0,R.jsx)(O.A,{item:!0,xs:12,children:(0,R.jsxs)(T.A,{severity:"warning",sx:{bgcolor:"rgba(255, 152, 0, 0.1)",color:"white"},children:[(0,R.jsx)("strong",{children:"Important:"})," All documents must be clear and legible. Blurry or incomplete documents may delay your application."]})})]});return(0,R.jsx)(h.A,{sx:{bgcolor:"rgba(15, 23, 42, 0.98)",minHeight:"100vh",p:{xs:2,md:4},color:"white"},children:(0,R.jsxs)(h.A,{sx:{maxWidth:900,mx:"auto"},children:[(0,R.jsxs)(h.A,{sx:{textAlign:"center",mb:4},children:[(0,R.jsx)(p.A,{variant:"h4",sx:{color:"#48CEDB",fontWeight:700,mb:1},children:"Installment Application"}),(0,R.jsxs)(p.A,{variant:"body1",sx:{color:"rgba(255,255,255,0.7)"},children:["Complete your application for ",null===o||void 0===o?void 0:o.name]})]}),(0,R.jsxs)(T.A,{severity:"info",icon:(0,R.jsx)(le.A,{}),sx:{mb:4,bgcolor:"rgba(72, 206, 219, 0.1)",color:"white",border:"1px solid rgba(72, 206, 219, 0.3)","& .MuiAlert-icon":{color:"#48CEDB"}},children:[(0,R.jsx)(p.A,{variant:"subtitle2",sx:{fontWeight:600,mb:1},children:"\ud83d\udccb Application Verification Process"}),(0,R.jsxs)(p.A,{variant:"body2",sx:{mb:1},children:["\u2022 Your application will be reviewed within ",(0,R.jsx)("strong",{children:"24-48 hours"})]}),(0,R.jsx)(p.A,{variant:"body2",sx:{mb:1},children:"\u2022 You'll receive email and SMS updates at each stage"}),(0,R.jsx)(p.A,{variant:"body2",sx:{mb:1},children:"\u2022 Required documents: National ID (both sides), Proof of Address, Proof of Income, Selfie with ID"}),(0,R.jsx)(p.A,{variant:"body2",children:"\u2022 Track your application status anytime from your Dashboard"})]}),(0,R.jsx)(J.A,{activeStep:c,alternativeLabel:!0,sx:{mb:4},children:he.map((e,o)=>(0,R.jsx)(X.A,{children:(0,R.jsx)(Z.A,{StepIconProps:{sx:{color:o<=c?"#48CEDB":"rgba(255,255,255,0.3)","&.Mui-completed":{color:"#4CAF50"},"&.Mui-active":{color:"#48CEDB"}}},children:(0,R.jsx)(p.A,{sx:{color:o<=c?"white":"rgba(255,255,255,0.5)"},children:e.label})})},e.label))}),A&&(0,R.jsx)(T.A,{severity:"error",sx:{mb:3},onClose:()=>y(""),children:A}),(0,R.jsx)(xe,{sx:{mb:4},children:(e=>{switch(e){case 0:return(0,R.jsxs)(O.A,{container:!0,spacing:3,children:[(0,R.jsx)(O.A,{item:!0,xs:12,children:(0,R.jsxs)(p.A,{variant:"h6",sx:{color:"#48CEDB",mb:2,display:"flex",alignItems:"center",gap:1},children:[(0,R.jsx)(re.A,{})," Personal Information"]})}),(0,R.jsx)(O.A,{item:!0,xs:12,md:6,children:(0,R.jsx)(v.A,{fullWidth:!0,label:"Full Name (as on ID)",value:S.fullName,onChange:e=>D(o=>(0,i.A)((0,i.A)({},o),{},{fullName:e.target.value})),required:!0,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255,255,255,0.3)"}}},InputLabelProps:{sx:{color:"rgba(255,255,255,0.7)"}}})}),(0,R.jsx)(O.A,{item:!0,xs:12,md:6,children:(0,R.jsx)(v.A,{fullWidth:!0,label:"Email Address",type:"email",value:S.email,onChange:e=>D(o=>(0,i.A)((0,i.A)({},o),{},{email:e.target.value})),required:!0,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255,255,255,0.3)"}}},InputLabelProps:{sx:{color:"rgba(255,255,255,0.7)"}}})}),(0,R.jsx)(O.A,{item:!0,xs:12,md:6,children:(0,R.jsx)(v.A,{fullWidth:!0,label:"Phone Number",value:S.phone,onChange:e=>D(o=>(0,i.A)((0,i.A)({},o),{},{phone:e.target.value})),required:!0,placeholder:"+265...",variant:"outlined",sx:{"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255,255,255,0.3)"}}},InputLabelProps:{sx:{color:"rgba(255,255,255,0.7)"}}})}),(0,R.jsx)(O.A,{item:!0,xs:12,md:6,children:(0,R.jsx)(v.A,{fullWidth:!0,label:"Date of Birth",type:"date",value:S.dateOfBirth,onChange:e=>D(o=>(0,i.A)((0,i.A)({},o),{},{dateOfBirth:e.target.value})),required:!0,InputLabelProps:{shrink:!0,sx:{color:"rgba(255,255,255,0.7)"}},sx:{"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255,255,255,0.3)"}}}})}),(0,R.jsx)(O.A,{item:!0,xs:12,md:6,children:(0,R.jsx)(v.A,{fullWidth:!0,label:"National ID Number",value:S.nationalId,onChange:e=>D(o=>(0,i.A)((0,i.A)({},o),{},{nationalId:e.target.value})),required:!0,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255,255,255,0.3)"}}},InputLabelProps:{sx:{color:"rgba(255,255,255,0.7)"}}})}),(0,R.jsx)(O.A,{item:!0,xs:12,md:6,children:(0,R.jsxs)(L.A,{fullWidth:!0,children:[(0,R.jsx)(z.A,{sx:{color:"rgba(255,255,255,0.7)"},children:"Country"}),(0,R.jsxs)(q.A,{value:S.country,onChange:e=>D(o=>(0,i.A)((0,i.A)({},o),{},{country:e.target.value})),label:"Country",sx:{color:"white","& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.3)"}},children:[(0,R.jsx)(G.A,{value:"Malawi",children:"Malawi"}),(0,R.jsx)(G.A,{value:"United Kingdom",children:"United Kingdom"}),(0,R.jsx)(G.A,{value:"Other",children:"Other"})]})]})}),(0,R.jsx)(O.A,{item:!0,xs:12,children:(0,R.jsx)(v.A,{fullWidth:!0,label:"Residential Address",value:S.address,onChange:e=>D(o=>(0,i.A)((0,i.A)({},o),{},{address:e.target.value})),required:!0,multiline:!0,rows:2,variant:"outlined",sx:{"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255,255,255,0.3)"}}},InputLabelProps:{sx:{color:"rgba(255,255,255,0.7)"}}})}),(0,R.jsx)(O.A,{item:!0,xs:12,md:6,children:(0,R.jsx)(v.A,{fullWidth:!0,label:"Town/City",value:S.town,onChange:e=>D(o=>(0,i.A)((0,i.A)({},o),{},{town:e.target.value})),variant:"outlined",sx:{"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255,255,255,0.3)"}}},InputLabelProps:{sx:{color:"rgba(255,255,255,0.7)"}}})}),(0,R.jsx)(O.A,{item:!0,xs:12,md:6,children:(0,R.jsx)(v.A,{fullWidth:!0,label:"Postcode",value:S.postcode,onChange:e=>D(o=>(0,i.A)((0,i.A)({},o),{},{postcode:e.target.value})),variant:"outlined",sx:{"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255,255,255,0.3)"}}},InputLabelProps:{sx:{color:"rgba(255,255,255,0.7)"}}})})]});case 1:return(0,R.jsxs)(O.A,{container:!0,spacing:3,children:[(0,R.jsx)(O.A,{item:!0,xs:12,children:(0,R.jsxs)(p.A,{variant:"h6",sx:{color:"#48CEDB",mb:2,display:"flex",alignItems:"center",gap:1},children:[(0,R.jsx)(ie.A,{})," Employment & Income"]})}),(0,R.jsx)(O.A,{item:!0,xs:12,md:6,children:(0,R.jsxs)(L.A,{fullWidth:!0,required:!0,children:[(0,R.jsx)(z.A,{sx:{color:"rgba(255,255,255,0.7)"},children:"Employment Status"}),(0,R.jsx)(q.A,{value:W.employmentStatus,onChange:e=>I(o=>(0,i.A)((0,i.A)({},o),{},{employmentStatus:e.target.value})),label:"Employment Status",sx:{color:"white","& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.3)"}},children:pe.map(e=>(0,R.jsx)(G.A,{value:e,children:e},e))})]})}),(0,R.jsx)(O.A,{item:!0,xs:12,md:6,children:(0,R.jsxs)(L.A,{fullWidth:!0,required:!0,children:[(0,R.jsx)(z.A,{sx:{color:"rgba(255,255,255,0.7)"},children:"Monthly Income Range"}),(0,R.jsx)(q.A,{value:W.monthlyIncome,onChange:e=>I(o=>(0,i.A)((0,i.A)({},o),{},{monthlyIncome:e.target.value})),label:"Monthly Income Range",sx:{color:"white","& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.3)"}},children:ue.map(e=>(0,R.jsx)(G.A,{value:e,children:e},e))})]})}),["Full-time Employed","Part-time Employed","Government Employee","Contract Worker"].includes(W.employmentStatus)&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(O.A,{item:!0,xs:12,md:6,children:(0,R.jsx)(v.A,{fullWidth:!0,label:"Employer Name",value:W.employerName,onChange:e=>I(o=>(0,i.A)((0,i.A)({},o),{},{employerName:e.target.value})),variant:"outlined",sx:{"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255,255,255,0.3)"}}},InputLabelProps:{sx:{color:"rgba(255,255,255,0.7)"}}})}),(0,R.jsx)(O.A,{item:!0,xs:12,md:6,children:(0,R.jsx)(v.A,{fullWidth:!0,label:"Job Title",value:W.jobTitle,onChange:e=>I(o=>(0,i.A)((0,i.A)({},o),{},{jobTitle:e.target.value})),variant:"outlined",sx:{"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255,255,255,0.3)"}}},InputLabelProps:{sx:{color:"rgba(255,255,255,0.7)"}}})}),(0,R.jsx)(O.A,{item:!0,xs:12,md:6,children:(0,R.jsx)(v.A,{fullWidth:!0,label:"Employment Duration",placeholder:"e.g., 2 years",value:W.employmentDuration,onChange:e=>I(o=>(0,i.A)((0,i.A)({},o),{},{employmentDuration:e.target.value})),variant:"outlined",sx:{"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255,255,255,0.3)"}}},InputLabelProps:{sx:{color:"rgba(255,255,255,0.7)"}}})}),(0,R.jsx)(O.A,{item:!0,xs:12,md:6,children:(0,R.jsx)(v.A,{fullWidth:!0,label:"Employer Phone",value:W.employerPhone,onChange:e=>I(o=>(0,i.A)((0,i.A)({},o),{},{employerPhone:e.target.value})),variant:"outlined",sx:{"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255,255,255,0.3)"}}},InputLabelProps:{sx:{color:"rgba(255,255,255,0.7)"}}})})]}),["Self-employed","Business Owner"].includes(W.employmentStatus)&&(0,R.jsx)(O.A,{item:!0,xs:12,children:(0,R.jsx)(T.A,{severity:"info",sx:{bgcolor:"rgba(72, 206, 219, 0.1)",color:"white"},children:"As a self-employed individual or business owner, please provide your business registration documents in the next step."})})]});case 2:return ge();case 3:return(0,R.jsxs)(O.A,{container:!0,spacing:3,children:[(0,R.jsx)(O.A,{item:!0,xs:12,children:(0,R.jsxs)(p.A,{variant:"h6",sx:{color:"#48CEDB",mb:2,display:"flex",alignItems:"center",gap:1},children:[(0,R.jsx)(le.A,{})," Review Your Application"]})}),(0,R.jsx)(O.A,{item:!0,xs:12,children:(0,R.jsxs)(xe,{children:[(0,R.jsx)(p.A,{variant:"subtitle1",sx:{color:"#48CEDB",fontWeight:600,mb:2},children:"\ud83d\udcf1 Product Details"}),(0,R.jsxs)(O.A,{container:!0,spacing:2,children:[(0,R.jsxs)(O.A,{item:!0,xs:6,children:[(0,R.jsx)(p.A,{variant:"body2",sx:{color:"rgba(255,255,255,0.6)"},children:"Product"}),(0,R.jsx)(p.A,{variant:"body1",sx:{color:"white",fontWeight:500},children:null===o||void 0===o?void 0:o.name})]}),(0,R.jsxs)(O.A,{item:!0,xs:6,children:[(0,R.jsx)(p.A,{variant:"body2",sx:{color:"rgba(255,255,255,0.6)"},children:"Variant"}),(0,R.jsxs)(p.A,{variant:"body1",sx:{color:"white",fontWeight:500},children:[null===r||void 0===r?void 0:r.storage," ",(null===r||void 0===r?void 0:r.color)&&"\u2022 ".concat(r.color)," ",(null===r||void 0===r?void 0:r.condition)&&"\u2022 ".concat(r.condition)]})]})]})]})}),(0,R.jsx)(O.A,{item:!0,xs:12,children:(0,R.jsxs)(xe,{children:[(0,R.jsx)(p.A,{variant:"subtitle1",sx:{color:"#48CEDB",fontWeight:600,mb:2},children:"\ud83d\udcb0 Payment Plan"}),(0,R.jsxs)(O.A,{container:!0,spacing:2,children:[(0,R.jsxs)(O.A,{item:!0,xs:4,children:[(0,R.jsx)(p.A,{variant:"body2",sx:{color:"rgba(255,255,255,0.6)"},children:"Duration"}),(0,R.jsxs)(p.A,{variant:"body1",sx:{color:"white",fontWeight:500},children:[null===l||void 0===l?void 0:l.weeks," weeks"]})]}),(0,R.jsxs)(O.A,{item:!0,xs:4,children:[(0,R.jsx)(p.A,{variant:"body2",sx:{color:"rgba(255,255,255,0.6)"},children:"Deposit"}),(0,R.jsx)(p.A,{variant:"body1",sx:{color:"#4CAF50",fontWeight:600},children:d?d(null===l||void 0===l?void 0:l.depositAmount):"\xa3".concat(null===l||void 0===l?void 0:l.depositAmount)})]}),(0,R.jsxs)(O.A,{item:!0,xs:4,children:[(0,R.jsx)(p.A,{variant:"body2",sx:{color:"rgba(255,255,255,0.6)"},children:"Weekly"}),(0,R.jsx)(p.A,{variant:"body1",sx:{color:"#48CEDB",fontWeight:600},children:d?d(null===l||void 0===l?void 0:l.weeklyAmount):"\xa3".concat(null===l||void 0===l?void 0:l.weeklyAmount)})]})]})]})}),(0,R.jsx)(O.A,{item:!0,xs:12,md:6,children:(0,R.jsxs)(xe,{children:[(0,R.jsx)(p.A,{variant:"subtitle1",sx:{color:"#48CEDB",fontWeight:600,mb:2},children:"\ud83d\udc64 Personal Information"}),(0,R.jsxs)(V.A,{dense:!0,children:[(0,R.jsx)(K.Ay,{sx:{px:0},children:(0,R.jsx)(Q.A,{primary:S.fullName,secondary:"Full Name",primaryTypographyProps:{color:"white"},secondaryTypographyProps:{color:"rgba(255,255,255,0.5)"}})}),(0,R.jsx)(K.Ay,{sx:{px:0},children:(0,R.jsx)(Q.A,{primary:S.email,secondary:"Email",primaryTypographyProps:{color:"white"},secondaryTypographyProps:{color:"rgba(255,255,255,0.5)"}})}),(0,R.jsx)(K.Ay,{sx:{px:0},children:(0,R.jsx)(Q.A,{primary:S.phone,secondary:"Phone",primaryTypographyProps:{color:"white"},secondaryTypographyProps:{color:"rgba(255,255,255,0.5)"}})}),(0,R.jsx)(K.Ay,{sx:{px:0},children:(0,R.jsx)(Q.A,{primary:"".concat(S.address,", ").concat(S.town),secondary:"Address",primaryTypographyProps:{color:"white"},secondaryTypographyProps:{color:"rgba(255,255,255,0.5)"}})})]})]})}),(0,R.jsx)(O.A,{item:!0,xs:12,md:6,children:(0,R.jsxs)(xe,{children:[(0,R.jsx)(p.A,{variant:"subtitle1",sx:{color:"#48CEDB",fontWeight:600,mb:2},children:"\ud83d\udcbc Employment Details"}),(0,R.jsxs)(V.A,{dense:!0,children:[(0,R.jsx)(K.Ay,{sx:{px:0},children:(0,R.jsx)(Q.A,{primary:W.employmentStatus,secondary:"Employment Status",primaryTypographyProps:{color:"white"},secondaryTypographyProps:{color:"rgba(255,255,255,0.5)"}})}),(0,R.jsx)(K.Ay,{sx:{px:0},children:(0,R.jsx)(Q.A,{primary:W.monthlyIncome,secondary:"Monthly Income",primaryTypographyProps:{color:"white"},secondaryTypographyProps:{color:"rgba(255,255,255,0.5)"}})}),W.employerName&&(0,R.jsx)(K.Ay,{sx:{px:0},children:(0,R.jsx)(Q.A,{primary:W.employerName,secondary:"Employer",primaryTypographyProps:{color:"white"},secondaryTypographyProps:{color:"rgba(255,255,255,0.5)"}})})]})]})}),(0,R.jsx)(O.A,{item:!0,xs:12,children:(0,R.jsxs)(xe,{children:[(0,R.jsx)(p.A,{variant:"subtitle1",sx:{color:"#48CEDB",fontWeight:600,mb:2},children:"\ud83d\udcce Uploaded Documents"}),(0,R.jsx)(h.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:Object.entries(B).map(e=>{var o;let[r,i]=e;return i&&(0,R.jsx)(b.A,{icon:(0,R.jsx)(M.A,{sx:{color:"#4CAF50 !important"}}),label:null===(o=be.find(e=>e.key===r))||void 0===o?void 0:o.label,sx:{bgcolor:"rgba(76, 175, 80, 0.1)",color:"white",border:"1px solid rgba(76, 175, 80, 0.3)"}},r)})})]})}),(0,R.jsx)(O.A,{item:!0,xs:12,children:(0,R.jsx)(T.A,{severity:"info",sx:{bgcolor:"rgba(72, 206, 219, 0.1)",color:"white"},children:"By submitting this application, you agree to our Terms & Conditions and authorize us to verify the information provided."})})]});default:return null}})(c)}),(0,R.jsxs)(h.A,{sx:{display:"flex",justifyContent:"space-between",gap:2},children:[(0,R.jsx)(m.A,{variant:"outlined",onClick:0===c?s:()=>{x(e=>e-1),y("")},sx:{color:"rgba(255,255,255,0.7)",borderColor:"rgba(255,255,255,0.3)","&:hover":{borderColor:"#48CEDB",color:"#48CEDB"}},children:0===c?"Cancel":"Back"}),c===he.length-1?(0,R.jsx)(m.A,{variant:"contained",onClick:async()=>{g(!0),y("");try{const e=new FormData,i={gadgetId:null===o||void 0===o?void 0:o.id,gadgetName:null===o||void 0===o?void 0:o.name,variantId:null===r||void 0===r?void 0:r.id,variantDetails:{storage:null===r||void 0===r?void 0:r.storage,color:null===r||void 0===r?void 0:r.color,condition:null===r||void 0===r?void 0:r.condition},installmentPlan:{type:null===l||void 0===l?void 0:l.type,weeks:null===l||void 0===l?void 0:l.weeks,depositAmount:null===l||void 0===l?void 0:l.depositAmount,weeklyAmount:null===l||void 0===l?void 0:l.weeklyAmount,totalAmount:null===l||void 0===l?void 0:l.totalAmount},personalInfo:S,employmentInfo:W,userUid:null===n||void 0===n?void 0:n.uid};e.append("applicationData",JSON.stringify(i)),Object.entries(B).forEach(o=>{let[r,i]=o;i&&e.append(r,i)});const t=await k.hf.submitApplication(e);t.success?(j(!0),C(t.reference||"APP-"+Date.now()),a&&a(t)):y(t.error||"Failed to submit application")}catch(e){console.error("Application submission error:",e),y(e.message||"An error occurred while submitting your application")}finally{g(!1)}},disabled:u,sx:{bgcolor:"#4CAF50",px:4,"&:hover":{bgcolor:"#43A047"},"&:disabled":{bgcolor:"rgba(76, 175, 80, 0.3)"}},children:u?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(P.A,{size:20,sx:{mr:1,color:"white"}}),"Submitting..."]}):"Submit Application"}):(0,R.jsx)(m.A,{variant:"contained",onClick:()=>{(e=>{switch(e){case 0:return S.fullName&&S.email&&S.phone&&S.dateOfBirth&&S.nationalId&&S.address;case 1:return W.employmentStatus&&W.monthlyIncome;case 2:return B.nationalIdFront&&B.nationalIdBack&&B.proofOfAddress&&B.proofOfIncome&&B.selfie;case 3:return!0;default:return!1}})(c)?(x(e=>e+1),y("")):y("Please fill in all required fields")},sx:{bgcolor:"#48CEDB",color:"#0f172a",px:4,"&:hover":{bgcolor:"#3ab9c7"}},children:"Continue"})]})]})})},pe=e=>{var o,r;let{open:E,onClose:P,item:M,customerEmail:F}=e;const[N,T]=(0,t.useState)(2),[O,L]=(0,t.useState)(!1),[z,q]=(0,t.useState)(""),[G,Y]=(0,t.useState)(!1),[H,U]=(0,t.useState)("pay-to-own"),[V,K]=(0,t.useState)(!1),[Q,J]=(0,t.useState)(!1),X=t.useRef(!1);(0,t.useEffect)(()=>{E&&!X.current&&U("pay-to-own"),X.current=E},[E]);const[Z,$]=(0,t.useState)(!1),[ee,oe]=(0,t.useState)("weeks"),[re,ie]=(0,t.useState)(1),[te,le]=(0,t.useState)(null),[ne,ae]=(0,t.useState)(null),[se,de]=(0,t.useState)(!1),[ce,xe]=(0,t.useState)(""),{userProfile:pe}=(0,S.A)(),{currency:ue}=(0,D.e)(),{isMalawi:be}=(0,W.z)(),ge=(0,I.Zp)(),[me,ve]=(0,t.useState)([]),[Ae,ye]=(0,t.useState)([]),[fe,je]=(0,t.useState)([]),we=(null===M||void 0===M?void 0:M.condition)||"new",Ce={new:"New",like_new:"Like New",good:"Good",fair:"Fair"}[we]||"New",[ke,Se]=(0,t.useState)([Ce]),[De,We]=(0,t.useState)((null===M||void 0===M?void 0:M.color)||""),[Ie,Be]=(0,t.useState)((null===M||void 0===M?void 0:M.storage)||""),[Ee,Pe]=(0,t.useState)(we),[Me,Re]=(0,t.useState)((null===M||void 0===M?void 0:M.variantId)||void 0),[_e,Fe]=(0,t.useState)((null===M||void 0===M?void 0:M.image)||""),[Ne,Te]=(0,t.useState)((null===M||void 0===M?void 0:M.name)||(null===M||void 0===M?void 0:M.title)||"Gadget"),[Oe,Le]=(0,t.useState)((null===M||void 0===M?void 0:M.description)||""),[ze,qe]=(0,t.useState)((null===M||void 0===M?void 0:M.specifications)||null),[Ge,Ye]=(0,t.useState)((null===M||void 0===M?void 0:M.category)||""),[He,Ue]=(0,t.useState)(!1),Ve=(0,s.A)("(max-width:600px)"),{formatLocalPrice:Ke}=(0,D.e)(),Qe=!!Ge&&["smartphones","tablets","laptops","phones","mobile","iphone","samsung","ipad"].some(e=>Ge.toLowerCase().includes(e.toLowerCase())),Je=e=>"string"===typeof e?parseFloat(e.replace(/[^0-9.-]+/g,""))||0:Number(e)||0,Xe=e=>{const o=parseInt(e,10);return Number.isFinite(o)&&o>0?o:0},Ze=async()=>{const e=await(async()=>{if(null===M||void 0===M||!M.id)return{ok:!1,message:"Unable to validate stock for this item."};try{const c=await k.QO.getById(M.id);if(null===c||void 0===c||!c.success||null===c||void 0===c||!c.data)return{ok:!1,message:"Unable to validate stock. Please try again."};const x=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(e=>{var o;return(0,i.A)((0,i.A)({},e),{},{color:e.color||null,color_hex:e.color_hex||e.colorHex||null,condition_status:null!==(o=e.condition_status)&&void 0!==o?o:e.condition,stock_quantity:"undefined"!==typeof e.stock_quantity?e.stock_quantity:"undefined"!==typeof e.stockQuantity?e.stockQuantity:e.stock,is_active:"undefined"!==typeof e.is_active?e.is_active:e.active,price_gbp:e.price_gbp||e.priceGbp||null})}).filter(e=>{var o;return 1===(null!==(o=null===e||void 0===e?void 0:e.is_active)&&void 0!==o?o:1)})},h=x(Array.isArray(c.data.variants)?c.data.variants:[]);h.length>0&&ve(h);const p=oo(h,De,Ie,Ee);let u=0,b=null;if(p){var e,o,r,t,l,n;u=Xe(null!==(e=p.stock_quantity)&&void 0!==e?e:p.stock),b=null!==(o=p.id)&&void 0!==o?o:null;const i=Je(be?p.price||p.price_gbp||(null===(r=c.data)||void 0===r?void 0:r.price)||(null===(t=c.data)||void 0===t?void 0:t.price_gbp):p.price_gbp||p.price||(null===(l=c.data)||void 0===l?void 0:l.price_gbp)||(null===(n=c.data)||void 0===n?void 0:n.price));i&&eo(i)}else{var a,s,d;u=Xe(null!==(a=null!==(s=null!==(d=c.data.stock_quantity)&&void 0!==d?d:c.data.stock)&&void 0!==s?s:c.data.in_stock)&&void 0!==a?a:c.data.number)}return{ok:!0,availableStock:u,matchedVariantId:b}}catch(c){return console.warn("InstallmentModal: live stock validation failed",c),{ok:!1,message:"Could not validate stock. Please try again."}}})();if(null===e||void 0===e||!e.ok)return q((null===e||void 0===e?void 0:e.message)||"Unable to validate stock. Please try again."),!1;const{availableStock:o,matchedVariantId:r}=e;return r&&Re(r),!(o<=0)||(q("This selection is currently out of stock. Please choose another option."),!1)},[$e,eo]=(0,t.useState)(Je(null!==(o=null===M||void 0===M?void 0:M.priceGbp)&&void 0!==o?o:null===M||void 0===M?void 0:M.price)),oo=(e,o,r,i)=>{if(0===e.length)return null;if(o&&r){const t=e.find(e=>String(e.color)===String(o)&&String(e.storage)===String(r)&&String(e.condition_status)===String(i));if(t)return t}if(r){const o=e.find(e=>String(e.storage)===String(r)&&String(e.condition_status)===String(i));if(o)return o}if(o){const r=e.find(e=>String(e.color)===String(o)&&String(e.condition_status)===String(i));if(r)return r}return e.find(e=>String(e.condition_status)===String(i))};(0,t.useEffect)(()=>{(async()=>{if(E&&null!==M&&void 0!==M&&M.id)try{const u=await k.QO.getById(M.id);if(null!==u&&void 0!==u&&u.success&&null!==u&&void 0!==u&&u.data){var e,o,r,t,l,n,a,s,d,c,x,h,p;Te((null===(e=u.data)||void 0===e?void 0:e.name)||Ne),Fe((null===(o=u.data)||void 0===o?void 0:o.image)||_e),Le((null===(r=u.data)||void 0===r?void 0:r.description)||(null===M||void 0===M?void 0:M.description)||""),qe((null===(t=u.data)||void 0===t?void 0:t.specifications)||(null===M||void 0===M?void 0:M.specifications)||null),Ye((null===(l=u.data)||void 0===l?void 0:l.category)||(null===M||void 0===M?void 0:M.category)||"");const b=Array.isArray(u.data.variants)?u.data.variants.map(e=>{var o;return(0,i.A)((0,i.A)({},e),{},{color:e.color||null,color_hex:e.color_hex||e.colorHex||null,condition_status:null!==(o=e.condition_status)&&void 0!==o?o:e.condition,stock_quantity:"undefined"!==typeof e.stock_quantity?e.stock_quantity:e.stockQuantity,is_active:"undefined"!==typeof e.is_active?e.is_active:e.active,price_gbp:e.price_gbp||e.priceGbp||null})}).filter(e=>{var o;return 1===(null!==(o=null===e||void 0===e?void 0:e.is_active)&&void 0!==o?o:1)}):[];ve(b);const g=new Map;b.forEach(e=>{e.color&&g.set(e.color,{color:e.color,colorHex:e.color_hex||null})});const m=Array.from(g.values());ye(m);const v=b.length>0?Array.from(new Set(b.map(e=>String(e.storage)).filter(Boolean))):[],A=(null===(n=u.data)||void 0===n?void 0:n.storage)||(null===M||void 0===M?void 0:M.storage),y=((null===(a=u.data)||void 0===a?void 0:a.category)||(null===M||void 0===M?void 0:M.category)||"").toLowerCase();let f=null;y.includes("smartphone")||y.includes("phone")||y.includes("iphone")||y.includes("samsung")?f="256GB":(y.includes("laptop")||y.includes("macbook"))&&(f="512GB");const j=v.length>0?v:A?[A]:f?[f]:[];je(j);const w=["new","like_new","good","fair"],C=b.length>0?Array.from(new Set(b.map(e=>String(e.condition_status)).filter(Boolean).map(e=>e.toLowerCase()).filter(e=>w.includes(e)))):[],k=String((null===(s=u.data)||void 0===s?void 0:s.condition)||(null===(d=u.data)||void 0===d?void 0:d.condition_status)||(null===M||void 0===M?void 0:M.condition)||"new").toLowerCase(),S=w.includes(k)?k:"new",D=C.length>0?C:[S],W={new:"New",like_new:"Like New",good:"Good",fair:"Fair"},I=D.map(e=>W[e]||e);Se(I);const B=(null===M||void 0===M?void 0:M.color)||(m.length>0?m[0].color:""),E=(null===M||void 0===M?void 0:M.storage)||j[0]||"",P=(null===M||void 0===M?void 0:M.condition)||D[0]||"new";We(B),Be(E),Pe(P);let R=oo(b,B,E,P);const _=Je(R?R.price_gbp||R.price:null!==(c=(null===(x=u.data)||void 0===x?void 0:x.price_gbp)||(null===(h=u.data)||void 0===h?void 0:h.price))&&void 0!==c?c:null!==(p=null===M||void 0===M?void 0:M.priceGbp)&&void 0!==p?p:null===M||void 0===M?void 0:M.price);eo(_),Re((null===R||void 0===R?void 0:R.id)||void 0)}}catch(u){console.warn("InstallmentModal: gadget detail fetch failed, using passed item.",u)}})()},[E,null===M||void 0===M?void 0:M.id]),(0,t.useEffect)(()=>{try{window.__dialogOpen=!!E}catch(e){}return()=>{try{window.__dialogOpen=!1}catch(e){}}},[E]);const ro={New:"new","Like New":"like_new",Good:"good",Fair:"fair"},io={new:"New",like_new:"Like New",good:"Good",fair:"Fair"},to=(0,t.useMemo)(()=>{var e;if(!Ie)return!0;const o=me.find(e=>e.storage===Ie&&e.condition_status===Ee);return!!o&&parseInt(null!==(e=o.stock_quantity)&&void 0!==e?e:0,10)>0},[me,Ie,Ee]),{depositAmount:lo,remainingBalance:no,weeklyAmount:ao,adjustedTotal:so,depositPercentage:co,totalAdjustmentPercentage:xo}=(0,t.useMemo)(()=>{const e=Number($e)||0;let o=e,r=.35,i=0;4===N?(o=1.05*e,r=.5,i=5):6===N&&(o=1.1*e,r=.65,i=10);const t=o*r,l=o-t;return{depositAmount:t,remainingBalance:l,weeklyAmount:N>0?l/N:0,adjustedTotal:o,depositPercentage:Math.round(100*r),totalAdjustmentPercentage:i}},[$e,N]),ho=async()=>{var e,o,r;if(q(""),!He)return void q("Please read and accept the Installment Policy before proceeding.");if(!pe||!pe.uid)return void Y(!0);const t=[];if(null!==(e=pe.email)&&void 0!==e&&e.trim()||t.push("Email"),null!==(o=pe.fullName)&&void 0!==o&&o.trim()||t.push("Full Name"),null!==(r=pe.address)&&void 0!==r&&r.trim()||t.push("Address"),t.length>0){q("Please complete your profile before starting an installment plan. Missing: ".concat(t.join(", ")));try{ge("/dashboard/settings")}catch(n){}return}L(!0);if(!await Ze())return void L(!1);(()=>{const e=(0,i.A)((0,i.A)((0,i.A)((0,i.A)({id:null===M||void 0===M?void 0:M.id,name:Ne,price:Math.round($e),image:_e||(null===M||void 0===M?void 0:M.image)||null,category:Ge,description:Oe,specifications:ze},De?{color:De}:{}),Ie?{storage:Ie}:{}),Ee?{condition:Ee}:{}),Me?{variantId:Me}:{}),o={uid:null===pe||void 0===pe?void 0:pe.uid,email:(null===pe||void 0===pe?void 0:pe.email)||F,phone:null===pe||void 0===pe?void 0:pe.phone,displayName:null===pe||void 0===pe?void 0:pe.displayName,location:{isMalawi:be}},r={selectedColor:De,selectedStorage:Ie,selectedCondition:Ee,variantId:Me,basePrice:$e,currentSelectionInStock:to},t={enabled:!0,planWeeks:N,depositAmount:Math.round(lo),remainingBalance:Math.round(no),weeklyAmount:Math.round(ao),totalPrice:Math.round(so),paymentType:"installment_deposit",planType:H};if("pay-to-lease"===H){const e=.022*$e,o=48*e;t.leaseMonthlyRate=Math.round(e),t.leaseWeeklyRate=Math.round(e/4),t.leaseTotalCost=Math.round(o),t.leaseDurationMonths=48,t.leaseRatePercentage=.022}let l=null;if("pay-to-lease"===H){const e=.022*$e,o=e/4;let r=48;if("custom"===ee){if(te&&ne){const e=new Date(te),o=new Date(ne),i=Math.abs(o-e);r=Math.ceil(i/864e5)/30.44}}else switch(ee){case"days":r=re/30.44;break;case"weeks":r=re/4.35;break;case"months":r=re}l={leaseDurationType:ee,leaseDurationValue:re,leaseCustomStart:te,leaseCustomEnd:ne,leaseUseCase:ce,monthlyRate:e,totalLeaseCost:e*r*(1+r/48*.15),weeklyRate:o,basePrice:$e,leasePercentage:.022,leaseDurationMonths:48}}})();try{J(!0),L(!1)}catch(a){var l;console.error("Installment verification failed:",a);const e=null===a||void 0===a||null===(l=a.response)||void 0===l?void 0:l.data;q((null===e||void 0===e?void 0:e.details)||(null===e||void 0===e?void 0:e.error)||(null===a||void 0===a?void 0:a.message)||"Unexpected error"),L(!1)}};return E?(0,R.jsxs)(d.A,{open:E,onClose:P,maxWidth:"sm",fullWidth:!0,fullScreen:Ve,disableEscapeKeyDown:!0,ModalProps:{keepMounted:!0,disableEnforceFocus:!0,disableRestoreFocus:!0},BackdropProps:{sx:{backgroundColor:"rgba(0,0,0,0.35)"}},PaperProps:{sx:{bgcolor:"#0d2137",color:"white",borderRadius:"20px",maxHeight:Ve?"100vh":"90vh",position:"relative",zIndex:1500,pointerEvents:"auto"}},children:[(0,R.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",gap:1,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[(0,R.jsx)(j.A,{}),"Pay in Installments"]}),(0,R.jsxs)(x.A,{sx:(0,i.A)({color:"rgba(255,255,255,0.92)",px:Ve?2:3,overflowY:"auto",WebkitOverflowScrolling:"touch","&::-webkit-scrollbar":{width:8},"&::-webkit-scrollbar-track":{bgcolor:"rgba(72, 206, 219, 0.15)"},"&::-webkit-scrollbar-thumb":{bgcolor:"rgba(72, 206, 219, 0.6)",borderRadius:4,"&:hover":{bgcolor:"rgba(72, 206, 219, 0.8)"}}},(V||Q)&&{display:"flex",flexDirection:"column",height:"100%"}),children:[!Q&&!V&&(0,R.jsxs)(h.A,{sx:{mb:3,p:2,bgcolor:"rgba(72, 206, 219, 0.1)",borderRadius:1,border:"1px solid rgba(72, 206, 219, 0.3)"},children:[(0,R.jsxs)(p.A,{variant:"caption",sx:{color:"rgba(255,255,255,0.9)",display:"block",mb:.5},children:["\ud83d\udccb ",(0,R.jsx)("strong",{children:"Application Required:"})," All installment purchases require verification"]}),(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255,255,255,0.8)"},children:"\u2022 Complete the form with personal & employment details \u2022 Upload required documents (ID, proof of income, etc.) \u2022 Review within 24-48 hours"})]}),Q?(0,R.jsx)(he,{gadget:{id:null===M||void 0===M?void 0:M.id,name:Ne,category:Ge,image:_e},variant:{id:Me,storage:Ie,color:De,condition:Ee},installmentPlan:{type:H,weeks:N,depositAmount:Math.round(lo),weeklyAmount:Math.round(ao),totalAmount:Math.round(so)},user:pe,formatPrice:Ke,onSubmit:e=>{console.log("Application submitted:",e),J(!1);try{ge("/dashboard/applications")}catch(o){}P()},onCancel:()=>{J(!1),P()}}):V?(0,R.jsx)(h.A,{sx:{flex:1,display:"flex",flexDirection:"column",width:"100%"},children:(0,R.jsx)(_,{onComplete:()=>{K(!1),P()},onCancel:()=>{K(!1)},userAuthenticated:!!pe})}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(h.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",py:3,mb:2,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[(0,R.jsx)(h.A,{component:"img",src:_e,alt:Ne,sx:{width:294,height:294,objectFit:"contain",borderRadius:2,bgcolor:"rgba(255,255,255,0.05)",p:1,mb:2}}),(0,R.jsx)(p.A,{variant:"h6",sx:{fontWeight:700,textAlign:"center",color:"white"},children:Ne}),Oe&&(0,R.jsxs)(h.A,{sx:{mt:1,width:"100%"},children:[(0,R.jsxs)(h.A,{onClick:()=>$(!Z),sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:.5,cursor:"pointer",color:"#48CEDB","&:hover":{color:"#6ad8e6"}},children:[(0,R.jsx)(p.A,{variant:"caption",sx:{fontWeight:500},children:Z?"Hide Details":"View Details"}),Z?(0,R.jsx)(w.A,{fontSize:"small"}):(0,R.jsx)(C.A,{fontSize:"small"})]}),(0,R.jsx)(u.A,{in:Z,children:(0,R.jsxs)(h.A,{sx:{mt:1,p:1.5,bgcolor:"rgba(255,255,255,0.03)",borderRadius:1,border:"1px solid rgba(255,255,255,0.1)"},children:[(0,R.jsx)(p.A,{variant:"body2",sx:{color:"rgba(255,255,255,0.8)",fontSize:"0.8rem",lineHeight:1.5,textAlign:"left"},children:Oe}),ze&&Object.keys(ze).length>0&&(0,R.jsxs)(h.A,{sx:{mt:1.5,pt:1.5,borderTop:"1px solid rgba(255,255,255,0.1)"},children:[(0,R.jsx)(p.A,{variant:"caption",sx:{color:"#48CEDB",fontWeight:600,display:"block",mb:.5},children:"Specifications"}),Object.entries(ze).slice(0,5).map(e=>{let[o,r]=e;const i=Array.isArray(r)?r.join(", "):"object"===typeof r&&null!==r?Object.entries(r).map(e=>{let[o,r]=e;return"".concat(o,": ").concat(r)}).join(", "):String(r);return(0,R.jsxs)(p.A,{variant:"caption",sx:{color:"rgba(255,255,255,0.7)",display:"block",textAlign:"left"},children:[(0,R.jsxs)("span",{style:{color:"rgba(255,255,255,0.5)",textTransform:"capitalize"},children:[o.replace(/_/g," "),":"]})," ",i]},o)})]})]})})]})]}),(ke.length>0||fe.length>0||Ae.length>0||Qe&&0===me.length)&&(0,R.jsxs)(h.A,{sx:{mb:3,p:2,bgcolor:"rgba(255, 255, 255, 0.03)",borderRadius:2,border:"1px solid rgba(255, 255, 255, 0.08)"},children:[(0,R.jsx)(p.A,{variant:"subtitle2",sx:{mb:2,fontWeight:600,color:"white",opacity:.9},children:"Select Options"}),(fe.length>0||Qe&&0===me.length)&&(0,R.jsxs)(h.A,{sx:{mb:2.5},children:[(0,R.jsxs)(p.A,{variant:"caption",sx:{color:"rgba(255,255,255,0.7)",fontWeight:600,mb:1,display:"block"},children:["Storage: ",(0,R.jsx)("span",{style:{color:"white"},children:fe.length>0?Ie||fe[0]:"Not specified"}),0===me.length&&fe.length>0&&(0,R.jsx)(b.A,{label:(()=>{const e=(Ge||"").toLowerCase();return e.includes("smartphone")||e.includes("phone")?"Default: 256GB":e.includes("laptop")?"Default: 512GB":"Default"})(),size:"small",sx:{ml:1,bgcolor:"rgba(72, 206, 219, 0.2)",color:"#48CEDB",height:18,fontSize:"0.7rem"}})]}),(0,R.jsx)(h.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:0===fe.length?(0,R.jsx)(h.A,{sx:{px:2,py:1,borderRadius:1,border:"1px solid rgba(255,255,255,0.2)",color:"rgba(255,255,255,0.4)",fontSize:"0.85rem",cursor:"not-allowed"},children:"Not specified"}):fe.map(e=>{const o=me.some(o=>{var r;return o.storage===e&&parseInt(null!==(r=o.stock_quantity)&&void 0!==r?r:0,10)>0});return{storage:e,hasStock:o}}).map(e=>{let{storage:o,hasStock:r}=e;const i=(Ie||fe[0])===o,t=(Ge||"").toLowerCase(),l=0===me.length&&("256GB"===o&&(t.includes("smartphone")||t.includes("phone"))||"512GB"===o&&t.includes("laptop"));return(0,R.jsx)(h.A,{onClick:()=>r&&(e=>{Be(e);const o=me.filter(o=>{var r;return o.storage===e&&parseInt(null!==(r=o.stock_quantity)&&void 0!==r?r:0,10)>0}),r=o.some(e=>e.condition_status===Ee);let i=Ee;!r&&o.length>0&&(i=o[0].condition_status,Pe(i));const t=oo(me,De,e,i),l=be?t?Je(t.price||t.price_gbp):$e:t?Je(t.price_gbp||t.price):$e;eo(l),Re((null===t||void 0===t?void 0:t.id)||void 0)})(o),sx:{px:2,py:1,borderRadius:1,border:i?"2px solid #48CEDB":l?"2px solid rgba(72, 206, 219, 0.5)":"1px solid rgba(255,255,255,0.3)",bgcolor:i?"rgba(72, 206, 219, 0.15)":l?"rgba(72, 206, 219, 0.08)":"transparent",color:r?"white":"rgba(255,255,255,0.3)",cursor:r?"pointer":"not-allowed",opacity:r?1:.5,fontSize:"0.85rem",fontWeight:i?600:l?500:400,transition:"all 0.2s ease","&:hover":r?{borderColor:"#48CEDB",bgcolor:"rgba(72, 206, 219, 0.1)"}:{}},children:o},o)})})]}),(Ae.length>0||Qe&&0===me.length)&&(0,R.jsxs)(h.A,{sx:{mb:2.5},children:[(0,R.jsxs)(p.A,{variant:"caption",sx:{color:"rgba(255,255,255,0.7)",fontWeight:600,mb:1,display:"block"},children:["Colour: ",(0,R.jsx)("span",{style:{color:"white"},children:Ae.length>0?De||(null===(r=Ae[0])||void 0===r?void 0:r.color):"Not specified"})]}),(0,R.jsx)(h.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:0===Ae.length?(0,R.jsx)(h.A,{sx:{px:2,py:1,borderRadius:1,border:"1px solid rgba(255,255,255,0.2)",color:"rgba(255,255,255,0.4)",fontSize:"0.85rem",cursor:"not-allowed"},children:"Not specified"}):Ae.map(e=>{var o;const r=(De||(null===(o=Ae[0])||void 0===o?void 0:o.color))===e.color;return(0,R.jsxs)(h.A,{onClick:()=>(e=>{We(e);const o=oo(me,e,Ie,Ee),r=be?o?Je(o.price||o.price_gbp):$e:o?Je(o.price_gbp||o.price):$e;eo(r),Re((null===o||void 0===o?void 0:o.id)||void 0)})(e.color),sx:{px:2,py:1,borderRadius:1,border:r?"2px solid #48CEDB":"1px solid rgba(255,255,255,0.3)",bgcolor:r?"rgba(72, 206, 219, 0.15)":"transparent",color:"white",cursor:"pointer",fontSize:"0.85rem",fontWeight:r?600:400,display:"flex",alignItems:"center",gap:1,transition:"all 0.2s ease","&:hover":{borderColor:"#48CEDB",bgcolor:"rgba(72, 206, 219, 0.1)"}},children:[e.colorHex&&(0,R.jsx)(h.A,{sx:{width:14,height:14,borderRadius:"50%",bgcolor:e.colorHex,border:"1px solid rgba(255,255,255,0.5)",flexShrink:0}}),e.color]},e.color)})})]}),(ke.length>0||Qe&&0===me.length)&&(0,R.jsxs)(h.A,{children:[(0,R.jsxs)(p.A,{variant:"caption",sx:{color:"rgba(255,255,255,0.7)",fontWeight:600,mb:1,display:"block"},children:["Condition: ",(0,R.jsx)("span",{style:{color:"white"},children:ke.length>0&&io[Ee]||"New"}),0===me.length&&(0,R.jsx)(b.A,{label:"Default: New",size:"small",sx:{ml:1,bgcolor:"rgba(72, 206, 219, 0.2)",color:"#48CEDB",height:18,fontSize:"0.7rem"}})]}),(0,R.jsx)(h.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:0===ke.length?(0,R.jsx)(h.A,{sx:{px:2,py:1,borderRadius:1,border:"2px solid #48CEDB",bgcolor:"rgba(72, 206, 219, 0.15)",color:"white",fontSize:"0.85rem",fontWeight:600},children:"New"}):ke.map(e=>{var o;const r=ro[e]||e;if(!Ie){const o=me.some(e=>{var o;return e.condition_status===r&&parseInt(null!==(o=e.stock_quantity)&&void 0!==o?o:0,10)>0});return{label:e,token:r,hasStock:o}}const i=me.find(e=>e.storage===Ie&&e.condition_status===r),t=i?parseInt(null!==(o=i.stock_quantity)&&void 0!==o?o:0,10):0;return{label:e,token:r,hasStock:t>0,stock:t}}).map(e=>{let{label:o,hasStock:r,stock:i}=e;const t=(io[Ee]||"New")===o,l="New"===o&&0===me.length;return(0,R.jsx)(h.A,{onClick:()=>r&&(e=>{const o=ro[e]||e;Pe(o);const r=oo(me,De,Ie,o),i=be?r?Je(r.price||r.price_gbp):$e:r?Je(r.price_gbp||r.price):$e;eo(i),Re((null===r||void 0===r?void 0:r.id)||void 0)})(o),sx:{px:2,py:1,borderRadius:1,border:t?"2px solid #48CEDB":l?"2px solid rgba(72, 206, 219, 0.5)":"1px solid rgba(255,255,255,0.3)",bgcolor:t?"rgba(72, 206, 219, 0.15)":l?"rgba(72, 206, 219, 0.08)":"transparent",color:r?"white":"rgba(255,255,255,0.3)",cursor:r?"pointer":"not-allowed",opacity:r?1:.5,fontSize:"0.85rem",fontWeight:t?600:l?500:400,transition:"all 0.2s ease","&:hover":r?{borderColor:"#48CEDB",bgcolor:"rgba(72, 206, 219, 0.1)"}:{}},children:o},o)})})]})]}),(0,R.jsxs)(h.A,{sx:{mb:3,p:2,bgcolor:"rgba(255, 255, 255, 0.05)",borderRadius:1,border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,R.jsx)(p.A,{variant:"subtitle2",sx:{mb:1.5,fontWeight:600,color:"white"},children:"Select Payment Plan"}),(0,R.jsxs)(h.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,R.jsx)(h.A,{onClick:e=>{e.stopPropagation(),U("pay-to-own")},sx:{p:1.5,border:"pay-to-own"===H?"2px solid #48CEDB":"1px solid rgba(255, 255, 255, 0.2)",borderRadius:1,bgcolor:"pay-to-own"===H?"rgba(72, 206, 219, 0.1)":"transparent",cursor:"pointer",transition:"all 0.2s ease","&:hover":{borderColor:"#48CEDB",bgcolor:"rgba(72, 206, 219, 0.05)"}},children:(0,R.jsxs)(h.A,{sx:{display:"flex",alignItems:"flex-start",gap:1.5},children:[(0,R.jsx)(g.A,{checked:"pay-to-own"===H,onChange:()=>U("pay-to-own"),sx:{color:"rgba(255, 255, 255, 0.7)","&.Mui-checked":{color:"#48CEDB"},p:0,mt:.5}}),(0,R.jsxs)(h.A,{children:[(0,R.jsx)(p.A,{variant:"body2",sx:{fontWeight:600,color:"white"},children:"Pay to Own"}),(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.7)",display:"block",mt:.5},children:"Pay deposit + weekly installments. Receive item after all payments complete."})]})]})}),(0,R.jsx)(h.A,{onClick:e=>{e.stopPropagation(),U("pay-to-lease")},sx:{p:1.5,border:"pay-to-lease"===H?"2px solid #48CEDB":"1px solid rgba(255, 255, 255, 0.2)",borderRadius:1,bgcolor:"pay-to-lease"===H?"rgba(72, 206, 219, 0.1)":"transparent",cursor:"pointer",transition:"all 0.2s ease","&:hover":{borderColor:"#48CEDB",bgcolor:"rgba(72, 206, 219, 0.05)"}},children:(0,R.jsxs)(h.A,{sx:{display:"flex",alignItems:"flex-start",gap:1.5},children:[(0,R.jsx)(g.A,{checked:"pay-to-lease"===H,onChange:()=>U("pay-to-lease"),sx:{color:"rgba(255, 255, 255, 0.7)","&.Mui-checked":{color:"#48CEDB"},p:0,mt:.5}}),(0,R.jsxs)(h.A,{children:[(0,R.jsx)(p.A,{variant:"body2",sx:{fontWeight:600,color:"white"},children:"Pay to Lease"}),(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.7)",display:"block",mt:.5},children:"Pay to borrow and use the device temporarily. Device remains under Xtrapush ownership."})]})]})}),(0,R.jsx)(h.A,{sx:{p:1.5,border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:1,bgcolor:"rgba(255, 255, 255, 0.02)",opacity:.5,cursor:"not-allowed"},children:(0,R.jsxs)(h.A,{sx:{display:"flex",alignItems:"flex-start",gap:1.5},children:[(0,R.jsx)(g.A,{disabled:!0,sx:{color:"rgba(255, 255, 255, 0.3)","&.Mui-checked":{color:"white"},p:0,mt:.5}}),(0,R.jsxs)(h.A,{children:[(0,R.jsxs)(p.A,{variant:"body2",sx:{fontWeight:600,color:"rgba(255, 255, 255, 0.5)"},children:["Pay as You Go",(0,R.jsx)(p.A,{component:"span",sx:{ml:1,fontSize:"0.7rem",bgcolor:"rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.6)",px:1,py:.25,borderRadius:1,fontWeight:500},children:"COMING SOON"})]}),(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.4)",display:"block",mt:.5},children:"Receive and use device as yours while paying installments."})]})]})})]})]}),"pay-to-own"===H&&(0,R.jsx)(h.A,{sx:{mb:2,p:2,bgcolor:"rgba(72, 206, 219, 0.1)",borderLeft:"3px solid rgba(72, 206, 219, 0.5)",borderRadius:1},children:(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.9)"},children:"\u2713 You will receive the item after completing all installment payments. Full ownership transfers to you."})}),"pay-to-lease"===H&&(0,R.jsxs)(h.A,{sx:{mb:2,p:2,bgcolor:"rgba(72, 206, 219, 0.1)",borderLeft:"3px solid rgba(72, 206, 219, 0.5)",borderRadius:1},children:[(0,R.jsx)(p.A,{variant:"h6",sx:{color:"#48CEDB",mb:2,fontWeight:700},children:"Lease Details"}),(0,R.jsxs)(h.A,{sx:{mb:3,p:2,bgcolor:"rgba(72, 206, 219, 0.1)",borderRadius:1,border:"1px solid rgba(72, 206, 219, 0.3)"},children:[(0,R.jsx)(p.A,{variant:"subtitle2",sx:{color:"#48CEDB",mb:1,fontWeight:600},children:"\ud83d\udcb0 Lease Pricing Estimate"}),(0,R.jsxs)(h.A,{sx:{display:"grid",gridTemplateColumns:Ve?"1fr":"1fr 1fr",gap:2},children:[(0,R.jsxs)(h.A,{children:[(0,R.jsx)(p.A,{variant:"caption",sx:{opacity:.8,display:"block"},children:"Gadget Price"}),(0,R.jsx)(p.A,{variant:"body1",sx:{color:"#48CEDB",fontWeight:600},children:Ke($e)})]}),(0,R.jsxs)(h.A,{children:[(0,R.jsx)(p.A,{variant:"caption",sx:{opacity:.8,display:"block"},children:"Total with Interest"}),(0,R.jsx)(p.A,{variant:"body1",sx:{color:"#48CEDB",fontWeight:600},children:(()=>{let e=0;if("custom"===ee){if(te&&ne){const o=new Date(te),r=new Date(ne),i=Math.abs(r-o);e=Math.ceil(i/864e5)/30.44}}else switch(ee){case"days":e=re/30.44;break;case"weeks":e=re/4.35;break;case"months":e=re;break;default:e=48}return Ke(.022*$e*e*(1+e/48*.15))})()})]})]}),(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255,255,255,0.7)",display:"block",mt:1.5},children:"* Earlier payments have lower interest rates. Longer periods result in higher interest charges."})]}),(0,R.jsx)(p.A,{variant:"subtitle2",sx:{color:"white",mb:1.5},children:"How long do you intend to use it?"}),(0,R.jsxs)(h.A,{sx:{display:"flex",flexWrap:"wrap",gap:1.5,mb:2.5},children:[(0,R.jsx)(m.A,{variant:"days"===ee?"contained":"outlined",onClick:()=>oe("days"),sx:{color:"white",borderColor:"#48CEDB",bgcolor:"days"===ee?"#48CEDB":"transparent",flex:1,minWidth:80,py:1},children:"Days"}),(0,R.jsx)(m.A,{variant:"weeks"===ee?"contained":"outlined",onClick:()=>oe("weeks"),sx:{color:"white",borderColor:"#48CEDB",bgcolor:"weeks"===ee?"#48CEDB":"transparent",flex:1,minWidth:80,py:1},children:"Weeks"}),(0,R.jsx)(m.A,{variant:"months"===ee?"contained":"outlined",onClick:()=>oe("months"),sx:{color:"white",borderColor:"#48CEDB",bgcolor:"months"===ee?"#48CEDB":"transparent",flex:1,minWidth:80,py:1},children:"Months"}),(0,R.jsx)(m.A,{variant:"custom"===ee?"contained":"outlined",onClick:()=>de(!0),sx:{color:"white",borderColor:"#48CEDB",bgcolor:"custom"===ee?"#48CEDB":"transparent",flex:1,minWidth:80,py:1},children:"Pick Dates"})]}),"custom"!==ee&&(0,R.jsxs)(h.A,{sx:{mb:2.5},children:[(0,R.jsxs)(p.A,{variant:"subtitle2",sx:{color:"white",mb:1,fontWeight:600},children:["Enter number of ",ee]}),(0,R.jsx)(h.A,{sx:{display:"flex",alignItems:"flex-end",gap:1.5,flexWrap:"wrap"},children:(0,R.jsx)(h.A,{sx:{flex:1,minWidth:120},children:(0,R.jsx)(v.A,{type:"number",label:ee.charAt(0).toUpperCase()+ee.slice(1),value:re,onChange:e=>ie(Math.max(1,Number(e.target.value))),inputProps:{min:1},fullWidth:!0,sx:{bgcolor:"white",borderRadius:1,"& .MuiInputLabel-root":{color:"#333",fontWeight:600,fontSize:"0.9rem"},"& .MuiInputLabel-shrink":{transform:"translate(14px, -9px) scale(0.85)",background:"white",px:.5,borderRadius:"2px"}},size:"small"})})})]}),(0,R.jsx)(l.$,{dateAdapter:a.h,children:(0,R.jsxs)(d.A,{open:se,onClose:()=>de(!1),children:[(0,R.jsx)(c.A,{children:"Select Lease Dates"}),(0,R.jsx)(x.A,{children:(0,R.jsxs)(h.A,{sx:{display:"flex",flexDirection:"column",gap:2,py:1},children:[(0,R.jsx)(n.l,{label:"Start Date",value:te,onChange:le,renderInput:e=>(0,R.jsx)(v.A,(0,i.A)((0,i.A)({},e),{},{fullWidth:!0}))}),(0,R.jsx)(n.l,{label:"End Date",value:ne,onChange:ae,renderInput:e=>(0,R.jsx)(v.A,(0,i.A)((0,i.A)({},e),{},{fullWidth:!0}))})]})}),(0,R.jsxs)(A.A,{sx:{p:2},children:[(0,R.jsx)(m.A,{onClick:()=>de(!1),children:"Cancel"}),(0,R.jsx)(m.A,{onClick:()=>{oe("custom"),de(!1)},disabled:!te||!ne,children:"Set"})]})]})}),(0,R.jsxs)(h.A,{sx:{mt:1,mb:2,display:"flex",flexDirection:Ve?"column":"row",gap:2,alignItems:Ve?"stretch":"flex-start"},children:[(0,R.jsx)(p.A,{variant:"subtitle2",sx:{color:"white",minWidth:180,mb:Ve?1:0,alignSelf:Ve?"flex-start":"center"},children:"What do you want to use it for?"}),(0,R.jsx)(v.A,{fullWidth:!0,multiline:!0,minRows:2,maxRows:4,value:ce,onChange:e=>xe(e.target.value),placeholder:"Describe your intended use (e.g. work, school, travel, etc.)",sx:{bgcolor:"white",borderRadius:1,flex:"2 1 240px"}})]}),(0,R.jsx)(h.A,{sx:{mt:2},children:(0,R.jsx)(p.A,{variant:"subtitle2",sx:{color:"white",mb:1},children:"Installment Policy Checklist"})})]}),"pay-as-you-go"===H&&(0,R.jsxs)(h.A,{sx:{mb:2,p:2,bgcolor:"rgba(33, 150, 243, 0.15)",borderLeft:"3px solid rgba(33, 150, 243, 0.7)",borderRadius:1},children:[(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.9)",display:"block",mb:1,fontWeight:600},children:"\u2139\ufe0f Estimated Pricing"}),(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.85)",display:"block",mb:1},children:"The pricing and payment amounts shown below are ESTIMATED based on initial information."}),(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255, 200, 124, 0.95)",display:"block",mb:1},children:"Your actual payment plan will be finalized after our verification and assessment of your profile."}),(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.8)"},children:"Final amounts may vary. We will review your application and confirm final details."})]}),"pay-as-you-go"===H&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(h.A,{sx:{mb:3,p:2,bgcolor:"rgba(33, 150, 243, 0.08)",borderRadius:1,border:"1px solid rgba(33, 150, 243, 0.3)"},children:[(0,R.jsx)(p.A,{variant:"subtitle2",sx:{color:"#48CEDB",mb:1.5,fontWeight:600},children:"\u2728 Why Choose Pay as You Go?"}),(0,R.jsxs)(h.A,{sx:{display:"grid",gridTemplateColumns:Ve?"1fr":"1fr 1fr",gap:1.5},children:[(0,R.jsxs)(h.A,{sx:{display:"flex",gap:1},children:[(0,R.jsx)(p.A,{sx:{color:"#48CEDB",fontWeight:700},children:"\ud83d\udcf1"}),(0,R.jsxs)(h.A,{children:[(0,R.jsx)(p.A,{variant:"caption",sx:{color:"white",fontWeight:600,display:"block"},children:"Get Device Today"}),(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.7rem"},children:"Use immediately upon approval"})]})]}),(0,R.jsxs)(h.A,{sx:{display:"flex",gap:1},children:[(0,R.jsx)(p.A,{sx:{color:"#48CEDB",fontWeight:700},children:"\ud83d\udcb3"}),(0,R.jsxs)(h.A,{children:[(0,R.jsx)(p.A,{variant:"caption",sx:{color:"white",fontWeight:600,display:"block"},children:"Flexible Payments"}),(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.7rem"},children:"Pay over 2, 4, or 6 weeks"})]})]}),(0,R.jsxs)(h.A,{sx:{display:"flex",gap:1},children:[(0,R.jsx)(p.A,{sx:{color:"#48CEDB",fontWeight:700},children:"\u26a1"}),(0,R.jsxs)(h.A,{children:[(0,R.jsx)(p.A,{variant:"caption",sx:{color:"white",fontWeight:600,display:"block"},children:"Quick Approval"}),(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.7rem"},children:"Fast verification process"})]})]}),(0,R.jsxs)(h.A,{sx:{display:"flex",gap:1},children:[(0,R.jsx)(p.A,{sx:{color:"#48CEDB",fontWeight:700},children:"\ud83c\udf81"}),(0,R.jsxs)(h.A,{children:[(0,R.jsx)(p.A,{variant:"caption",sx:{color:"white",fontWeight:600,display:"block"},children:"Better Terms Later"}),(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.7rem"},children:"Unlock upgrades after completion"})]})]})]})]}),(0,R.jsxs)(h.A,{sx:{mb:3,p:2,bgcolor:"rgba(255, 152, 0, 0.08)",borderRadius:1,border:"1px solid rgba(255, 152, 0, 0.3)"},children:[(0,R.jsx)(p.A,{variant:"subtitle2",sx:{color:"rgba(255, 152, 0, 0.95)",mb:1,fontWeight:600},children:"\ud83d\udd0d Verification & Assessment"}),(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.85)",display:"block",mb:.8},children:"After you submit this request, our team will:"}),(0,R.jsxs)(h.A,{sx:{ml:1.5},children:[(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.8)",display:"block",mb:.5},children:"\u2713 Verify your identity and contact details"}),(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.8)",display:"block",mb:.5},children:"\u2713 Assess your payment eligibility"}),(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.8)",display:"block",mb:.5},children:"\u2713 Confirm your final payment schedule"}),(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.8)"},children:"\u2713 Arrange device delivery/pickup"})]}),(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255, 152, 0, 0.85)",display:"block",mt:1,fontWeight:600},children:"Approval typically takes 24-48 hours"})]}),(0,R.jsxs)(h.A,{sx:{mb:2,p:2,bgcolor:"rgba(76, 175, 80, 0.05)",borderRadius:1,border:"1px solid rgba(76, 175, 80, 0.2)"},children:[(0,R.jsx)(p.A,{variant:"subtitle2",sx:{color:"#48CEDB",mb:1.5,fontWeight:600},children:"\ud83d\udcb0 Estimated Payment Breakdown"}),(0,R.jsxs)(h.A,{sx:{display:"grid",gridTemplateColumns:Ve?"1fr":"1fr 1fr",gap:2},children:[(0,R.jsxs)(h.A,{children:[(0,R.jsx)(p.A,{variant:"caption",sx:{opacity:.8,display:"block"},children:"Base price"}),(0,R.jsx)(p.A,{variant:"body1",sx:{color:"#48CEDB",fontWeight:600},children:Ke($e)})]}),(0,R.jsxs)(h.A,{children:[(0,R.jsxs)(p.A,{variant:"caption",sx:{opacity:.8,display:"block"},children:["Adjusted total ",xo>0?"(+".concat(xo,"%)"):""]}),(0,R.jsx)(p.A,{variant:"body1",sx:{color:"#48CEDB",fontWeight:600},children:Ke(so)})]}),(0,R.jsxs)(h.A,{children:[(0,R.jsxs)(p.A,{variant:"caption",sx:{opacity:.8,display:"block"},children:["Deposit (",co,"%)"]}),(0,R.jsx)(p.A,{variant:"body1",sx:{color:"#48CEDB",fontWeight:600},children:Ke(lo)})]}),(0,R.jsxs)(h.A,{children:[(0,R.jsx)(p.A,{variant:"caption",sx:{opacity:.8,display:"block"},children:"Remaining balance"}),(0,R.jsx)(p.A,{variant:"body1",sx:{color:"#48CEDB",fontWeight:600},children:Ke(no)})]})]}),(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255, 200, 124, 0.9)",display:"block",mt:1.5,fontWeight:600},children:"* All amounts are estimated and subject to change after assessment"})]})]}),"pay-to-own"===H&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(h.A,{sx:{display:"flex",gap:Ve?1.5:2,mb:2,alignItems:"center",flexDirection:Ve?"column":"row",flexWrap:"wrap"},children:[(0,R.jsx)(p.A,{variant:"body2",sx:{color:"white"},children:"Weeks"}),(0,R.jsxs)(y.A,{value:N,exclusive:!0,onChange:(e,o)=>{null!==o&&T(o)},sx:{width:"100%","& .MuiToggleButton-root":{flex:1,color:"white",borderColor:"rgba(255, 255, 255, 0.3)","&.Mui-selected":{backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white"},"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}}},children:[(0,R.jsx)(f.A,{value:2,children:"14 days"}),(0,R.jsx)(f.A,{value:4,children:"28 days"}),(0,R.jsx)(f.A,{value:6,children:"42 days"})]})]}),(0,R.jsxs)(h.A,{sx:{display:"grid",gridTemplateColumns:Ve?"1fr":"1fr 1fr",gap:2,mb:2},children:[(0,R.jsxs)(h.A,{children:[(0,R.jsx)(p.A,{variant:"caption",sx:{opacity:.8},children:"Base price"}),(0,R.jsx)(p.A,{variant:"body1",children:Ke($e)})]}),(0,R.jsxs)(h.A,{children:[(0,R.jsxs)(p.A,{variant:"caption",sx:{opacity:.8},children:["Adjusted total ",xo>0?"(+".concat(xo,"%)"):""]}),(0,R.jsx)(p.A,{variant:"body1",children:Ke(so)})]}),(0,R.jsxs)(h.A,{children:[(0,R.jsxs)(p.A,{variant:"caption",sx:{opacity:.8},children:["Deposit (",co,"% paying)"]}),(0,R.jsx)(p.A,{variant:"body1",children:Ke(lo)})]}),(0,R.jsxs)(h.A,{children:[(0,R.jsx)(p.A,{variant:"caption",sx:{opacity:.8},children:"Remaining"}),(0,R.jsx)(p.A,{variant:"body1",children:Ke(no)})]})]}),"pay-to-lease"===H&&(0,R.jsxs)(h.A,{sx:{mb:2,p:2,bgcolor:"rgba(255, 152, 0, 0.08)",borderRadius:1,border:"1px solid rgba(255, 152, 0, 0.3)"},children:[(0,R.jsx)(p.A,{variant:"subtitle2",sx:{color:"rgba(255, 152, 0, 0.95)",mb:1,fontWeight:600},children:"\ud83d\udccb Lease Terms"}),(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.85)",display:"block",mb:.5},children:"\u2022 Device must be returned in good condition after lease period"}),(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.85)",display:"block",mb:.5},children:"\u2022 Option to purchase at end of lease (Pay to Own conversion)"}),(0,R.jsx)(p.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.85)",display:"block"},children:"\u2022 Early termination fees may apply"})]})]}),"pay-as-you-go"===H&&(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)(h.A,{sx:{display:"flex",gap:Ve?1.5:2,mb:2,alignItems:"center",flexDirection:Ve?"column":"row",flexWrap:"wrap"},children:[(0,R.jsx)(p.A,{variant:"body2",sx:{color:"white"},children:"Payment Period"}),(0,R.jsxs)(y.A,{value:N,exclusive:!0,onChange:(e,o)=>{null!==o&&T(o)},sx:{width:"100%","& .MuiToggleButton-root":{flex:1,color:"white",borderColor:"rgba(255, 255, 255, 0.3)","&.Mui-selected":{backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white"},"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}}},children:[(0,R.jsx)(f.A,{value:2,children:"14 days"}),(0,R.jsx)(f.A,{value:4,children:"28 days"}),(0,R.jsx)(f.A,{value:6,children:"42 days"})]})]})}),z?(0,R.jsx)(p.A,{color:"error",variant:"body2",sx:{mt:1},children:z}):null,(0,R.jsxs)(h.A,{sx:{mt:2,p:2,borderTop:"1px solid rgba(255,255,255,0.2)"},children:[(0,R.jsxs)(h.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:1,flexDirection:Ve?"column":"row"},children:[(0,R.jsxs)(h.A,{children:[(0,R.jsx)(p.A,{variant:"body2",sx:{color:"white",mb:.5},children:"Do you accept the Installment Policy?"}),(0,R.jsxs)(y.A,{exclusive:!0,value:He?"yes":"no",onChange:(e,o)=>{o&&Ue("yes"===o)},"aria-label":"policy acceptance",sx:{width:Ve?"100%":"auto","& .MuiToggleButton-root":(0,i.A)({color:"white",borderColor:"rgba(255,255,255,0.35)",px:1.5},Ve?{flex:1}:{}),"& .Mui-selected":{bgcolor:"rgba(72, 206, 219, 0.3)",color:"white"}},children:[(0,R.jsx)(f.A,{value:"yes","aria-label":"accept yes",children:"Yes"}),(0,R.jsx)(f.A,{value:"no","aria-label":"accept no",children:"No"})]})]}),(0,R.jsx)(m.A,{onClick:()=>ge("/installment-policy"),variant:"text",sx:{color:"#48CEDB",textDecoration:"underline"},children:"Read Policy guide"})]}),!He&&(0,R.jsx)(p.A,{variant:"caption",sx:{mt:1,color:"rgba(255,255,255,0.8)"},children:"You must select Yes to proceed."})]})]})]}),!V&&(0,R.jsxs)(A.A,{sx:{p:2,display:"flex",flexDirection:Ve?"column":"row",gap:1.5},children:[(0,R.jsx)(m.A,{onClick:P,variant:"contained",disabled:O,sx:{bgcolor:"#000",color:"white","&:hover":{bgcolor:"#111"},width:Ve?"100%":"auto"},children:"Cancel"}),(0,R.jsx)(m.A,{variant:"contained",onClick:async()=>{if(q(""),"pay-to-lease"===H){if(!ee||"custom"!==ee&&!re||"custom"===ee&&(!te||!ne))return void q("Please select a valid lease duration.");if(!ce.trim())return void q("Please describe your intended use.");if(!He)return void q("Please accept the Installment Policy.");L(!0);return await Ze()?(K(!0),void L(!1)):void L(!1)}He?await ho():q("Please read and accept the Installment Policy before proceeding.")},disabled:O||!He||"pay-to-lease"!==H&&(so<=0||lo<=0),sx:{bgcolor:"#000",color:"white","&:hover":{bgcolor:"#111"},width:Ve?"100%":"auto"},children:"Proceed"})]}),(0,R.jsx)(B.A,{open:G,onClose:()=>Y(!1),title:"Sign In Required",message:"Please sign in to start an installment plan. Your installment details will be saved for you.",actionLabel:"Sign In",onAction:()=>ge("/signin")})]}):null}}}]);