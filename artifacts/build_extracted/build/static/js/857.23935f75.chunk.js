"use strict";(self.webpackChunkitsxtrapush=self.webpackChunkitsxtrapush||[]).push([[857],{41857(e,t,n){n.r(t),n.d(t,{default:()=>Y});var i=n(89379),o=n(68484),r=n(9950),s=n(38006),a=n(92994),l=n(62113),c=n(7356),d=n(20615),h=n(38796),u=n(27321),x=n(6503),p=n(98519),m=n(94305),g=n(22403),y=n(13308),b=n(28493),f=n(21457),v=n(41680),A=n(29920),w=n(55884),j=n(14653),S=n(87209),k=n(75026),M=n(18643),C=n(65812),z=n(85935),N=n(56690),I=n(84453),P=n(72990),G=n(30447),B=n(24184),O=n(45530),F=n(19676),_=n(15672),E=n(44414);const L=e=>{let{onFiltersChange:t,currentFilters:n={},isMobile:o=!1,maxPrice:s=2e6,currency:a}=e;const[l,L]=(0,r.useState)([]),[W,T]=(0,r.useState)([]),[H,R]=(0,r.useState)([0,s]),[Q,X]=(0,r.useState)(!0),q=(0,r.useRef)(s),{location:D,isMalawi:V}=(0,_.z)(),K=a||(null===D||void 0===D?void 0:D.currency)||"GBP",Y="MWK"===K?"MWK ":"\xa3",U=e=>(0,F.rD)(e,K),J=e=>(0,F.Iq)(e,K),Z=(0,c.A)(),$=(0,d.A)(Z.breakpoints.down("sm")),[ee,te]=((0,d.A)(Z.breakpoints.down("md")),(0,r.useState)({category:!1,brand:!1,price:!1,stock:!1,condition:!1})),ne={New:"new","Like New":"like_new",Excellent:"like_new","Very Good":"good",Good:"good",Fair:"fair"},ie=new Set(["new","like_new","good","fair"]),[oe,re]=(0,r.useState)((0,i.A)({categories:[],brands:[],priceMin:0,priceMax:s,inStock:null,condition:[],warranty:[],rating:0,sortBy:"newest"},n));(0,r.useEffect)(()=>{const e=q.current;re(t=>{const n=Math.max(0,Math.min(t.priceMin,s)),o=s>e&&t.priceMax===e?s:Math.max(n,Math.min(t.priceMax,s));return(0,i.A)((0,i.A)({},t),{},{priceMin:n,priceMax:o})}),R(t=>{const n=Math.max(0,Math.min(t[0],s)),i=t[1];return[n,s>e&&i===e?s:Math.max(n,Math.min(i,s))]}),q.current=s},[s]),(0,r.useEffect)(()=>{(async()=>{try{X(!0);const[e,t]=await Promise.all([O.QO.getCategories(),O.QO.getBrands()]);e.success&&L(e.data),t.success&&T(t.data)}catch(e){console.error("Failed to fetch filter data:",e)}finally{X(!1)}})()},[]);const se=e=>(t,n)=>{te(t=>(0,i.A)((0,i.A)({},t),{},{[e]:n}))},ae=(e,t)=>{const n=(0,i.A)((0,i.A)({},oe),{},{priceMin:t[0],priceMax:t[1]});re(n),R(t)},le=(e,t)=>{const n=(0,i.A)((0,i.A)({},oe),{},{priceMin:t[0],priceMax:t[1]});ce(n)},ce=e=>{const n={};if(e.categories.length>0&&(n.category=e.categories[0]),e.brands.length>0&&(n.brand=e.brands[0]),n.minPrice=e.priceMin,n.maxPrice=e.priceMax,n.currency=K,null!==e.inStock&&(n.inStock=e.inStock?1:0),e.condition.length>0){const t=Array.from(new Set(e.condition.map(e=>ne[e]||e))).filter(e=>ie.has(e));t.length>0&&(n.condition=t)}e.warranty.length>0&&(n.warranty=e.warranty),e.rating>0&&(n.minRating=e.rating),e.sortBy&&(n.sortBy=e.sortBy),t(n)};(0,r.useEffect)(()=>{if(n&&Array.isArray(n.condition)){const e=n.condition.filter(e=>ie.has(e)).map(e=>{const t=Object.entries(ne).find(t=>{let[,n]=t;return n===e});return t?t[0]:null}).filter(Boolean);re(t=>(0,i.A)((0,i.A)({},t),{},{condition:e}))}},[null===n||void 0===n?void 0:n.condition]);const de=()=>{let e=0;return oe.categories.length>0&&e++,oe.brands.length>0&&e++,(oe.priceMin>0||oe.priceMax<s)&&e++,null!==oe.inStock&&e++,e};return Q?(0,E.jsx)(h.A,{sx:{p:2,mb:2,bgcolor:"#051323",color:"white"},children:(0,E.jsxs)(u.A,{display:"flex",alignItems:"center",justifyContent:"center",py:4,children:[(0,E.jsx)(x.A,{size:24,sx:{color:"white"}}),(0,E.jsx)(p.A,{sx:{ml:2,color:"white"},children:"Loading filters..."})]})}):(0,E.jsxs)(h.A,{sx:(0,i.A)({p:o?1:2,mb:2,width:"100%",bgcolor:"#051323",color:"white"},o&&{borderRadius:0,boxShadow:"none",border:"none"}),children:[(0,E.jsxs)(u.A,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:o?1:2,flexWrap:$?"wrap":"nowrap",gap:1,children:[(0,E.jsxs)(u.A,{display:"flex",alignItems:"center",minWidth:0,flex:1,children:[(0,E.jsx)(P.A,{sx:{mr:1,fontSize:o?"1.2rem":"1.5rem",color:"white"}}),(0,E.jsx)(p.A,{variant:o?"subtitle1":"h6",sx:{fontWeight:600,color:"white"},children:"Filters"}),de()>0&&(0,E.jsx)(m.A,{label:de(),size:"small",color:"primary",sx:{ml:1}})]}),de()>0&&(0,E.jsx)(g.A,{startIcon:$?null:(0,E.jsx)(G.A,{}),onClick:()=>{re({categories:[],brands:[],priceMin:0,priceMax:s,inStock:null,condition:[],warranty:[],rating:0,sortBy:"newest"}),R([0,s]),t({})},size:"small",sx:{minWidth:$?"auto":"unset",px:$?1:2,color:"white",borderColor:"white","&:hover":{borderColor:"white",bgcolor:"rgba(255, 255, 255, 0.1)"}},variant:"outlined",children:$?(0,E.jsx)(G.A,{}):"Clear"})]}),(0,E.jsxs)(y.A,{expanded:ee.category,onChange:se("category"),elevation:0,sx:{boxShadow:"none","&:before":{display:"none"},mb:.5,bgcolor:"transparent",color:"white"},children:[(0,E.jsx)(b.A,{expandIcon:(0,E.jsx)(I.A,{sx:{color:"white"}}),sx:{py:o?1:1.5,px:o?.5:1,minHeight:o?40:48,bgcolor:"transparent"},children:(0,E.jsxs)(u.A,{display:"flex",alignItems:"center",width:"100%",children:[(0,E.jsx)(p.A,{variant:o?"body2":"body1",sx:{fontWeight:500,color:"white"},children:"Category"}),oe.categories.length>0&&(0,E.jsx)(m.A,{label:oe.categories.length,size:"small",color:"primary",sx:{ml:1,height:20,fontSize:"0.7rem"}})]})}),(0,E.jsx)(f.A,{sx:{px:o?.5:2,py:o?1:1.5},children:(0,E.jsx)(u.A,{sx:{maxHeight:o?200:"none",overflowY:"auto"},children:l.map(e=>(0,E.jsx)(v.A,{control:(0,E.jsx)(A.A,{checked:oe.categories.includes(e.slug||e.name),onChange:()=>(e=>{const t=oe.categories.includes(e)?oe.categories.filter(t=>t!==e):[...oe.categories,e],n=(0,i.A)((0,i.A)({},oe),{},{categories:t});re(n),ce(n)})(e.slug||e.name),size:"small",sx:{py:o?.5:1,color:"white","&.Mui-checked":{color:"white"}}}),label:(0,E.jsxs)(u.A,{display:"flex",justifyContent:"space-between",width:"100%",pr:1,children:[(0,E.jsx)(p.A,{variant:o?"caption":"body2",sx:{textTransform:"capitalize",fontSize:o?"0.75rem":"0.875rem",color:"white"},children:e.name}),(0,E.jsxs)(p.A,{variant:"caption",sx:{fontSize:o?"0.7rem":"0.75rem",color:"rgba(255, 255, 255, 0.7)"},children:["(",e.count,")"]})]}),sx:{display:"flex",width:"100%",m:0,py:o?.25:.5}},e.slug||e.name))})})]}),(0,E.jsx)(w.A,{sx:{my:o?.5:1,bgcolor:"rgba(255, 255, 255, 0.2)"}}),(0,E.jsxs)(y.A,{expanded:ee.brand,onChange:se("brand"),elevation:0,sx:{boxShadow:"none","&:before":{display:"none"},mb:.5,bgcolor:"transparent",color:"white"},children:[(0,E.jsx)(b.A,{expandIcon:(0,E.jsx)(I.A,{sx:{color:"white"}}),sx:{py:o?1:1.5,px:o?.5:1,minHeight:o?40:48,bgcolor:"transparent"},children:(0,E.jsxs)(u.A,{display:"flex",alignItems:"center",width:"100%",children:[(0,E.jsx)(p.A,{variant:o?"body2":"body1",sx:{fontWeight:500,color:"white"},children:"Brand"}),oe.brands.length>0&&(0,E.jsx)(m.A,{label:oe.brands.length,size:"small",color:"primary",sx:{ml:1,height:20,fontSize:"0.7rem"}})]})}),(0,E.jsx)(f.A,{sx:{px:o?.5:2,py:o?1:1.5},children:(0,E.jsx)(u.A,{sx:{maxHeight:o?200:"none",overflowY:"auto"},children:W.map(e=>(0,E.jsx)(v.A,{control:(0,E.jsx)(A.A,{checked:oe.brands.includes(e.name),onChange:()=>(e=>{const t=oe.brands.includes(e)?oe.brands.filter(t=>t!==e):[...oe.brands,e],n=(0,i.A)((0,i.A)({},oe),{},{brands:t});re(n),ce(n)})(e.name),size:"small",sx:{py:o?.5:1,color:"white","&.Mui-checked":{color:"white"}}}),label:(0,E.jsxs)(u.A,{display:"flex",justifyContent:"space-between",width:"100%",pr:1,children:[(0,E.jsx)(p.A,{variant:o?"caption":"body2",sx:{fontSize:o?"0.75rem":"0.875rem",color:"white"},children:e.name}),(0,E.jsxs)(p.A,{variant:"caption",sx:{fontSize:o?"0.7rem":"0.75rem",color:"rgba(255, 255, 255, 0.7)"},children:["(",e.count,")"]})]}),sx:{display:"flex",width:"100%",m:0,py:o?.25:.5}},e.name))})})]}),(0,E.jsx)(w.A,{sx:{my:o?.5:1,bgcolor:"rgba(255, 255, 255, 0.2)"}}),(0,E.jsxs)(y.A,{expanded:ee.price,onChange:se("price"),elevation:0,sx:{boxShadow:"none","&:before":{display:"none"},mb:.5,bgcolor:"transparent",color:"white"},children:[(0,E.jsx)(b.A,{expandIcon:(0,E.jsx)(I.A,{sx:{color:"white"}}),sx:{py:o?1:1.5,px:o?.5:1,minHeight:o?40:48,bgcolor:"transparent"},children:(0,E.jsxs)(u.A,{display:"flex",alignItems:"center",width:"100%",children:[(0,E.jsx)(p.A,{variant:o?"body2":"body1",sx:{fontWeight:500,color:"white"},children:"Price Range"}),(oe.priceMin>0||oe.priceMax<s)&&(0,E.jsx)(m.A,{label:"".concat(J(oe.priceMin)," - ").concat(oe.priceMax>=s?J(s)+"+":J(oe.priceMax)),size:"small",color:"primary",sx:{ml:1,height:20,fontSize:"0.65rem"}})]})}),(0,E.jsx)(f.A,{sx:{px:o?1:2,py:o?1:1.5},children:(0,E.jsxs)(u.A,{sx:{px:o?0:1},children:[(()=>{const e="MWK"===K,t=e?5e4:25,n=Math.round(s/2),i=e?s>=1e6?[{value:0,label:"".concat(Y," 0")},{value:1e6,label:"".concat(Y," 1M")},{value:s,label:J(s)+"+"}]:[{value:0,label:"".concat(Y," 0")},{value:n,label:J(n)},{value:s,label:J(s)}]:[{value:0,label:"".concat(Y,"0")},{value:n,label:J(n)},{value:s,label:J(s)}];return(0,E.jsx)(j.Ay,{value:H,onChange:ae,onChangeCommitted:le,valueLabelDisplay:"auto",min:0,max:s,step:t,marks:i,valueLabelFormat:e=>J(e),sx:{"& .MuiSlider-markLabel":{fontSize:o?"0.65rem":"0.75rem",color:"white"},"& .MuiSlider-valueLabel":{fontSize:o?"0.7rem":"0.75rem"},"& .MuiSlider-thumb":{color:"white"},"& .MuiSlider-track":{color:"white"},"& .MuiSlider-rail":{color:"rgba(255, 255, 255, 0.3)"}}})})(),(0,E.jsxs)(u.A,{display:"flex",justifyContent:"space-between",mt:o?.5:1,children:[(0,E.jsxs)(p.A,{variant:"caption",sx:{fontSize:o?"0.7rem":"0.75rem",color:"white"},children:["Min: ",U(H[0])]}),(0,E.jsxs)(p.A,{variant:"caption",sx:{fontSize:o?"0.7rem":"0.75rem",color:"white"},children:["Max: ",U(H[1])]})]})]})})]}),(0,E.jsx)(w.A,{sx:{my:o?.5:1,bgcolor:"rgba(255, 255, 255, 0.2)"}}),(0,E.jsxs)(y.A,{expanded:ee.stock,onChange:se("stock"),elevation:0,sx:{boxShadow:"none","&:before":{display:"none"},mb:.5,bgcolor:"transparent",color:"white"},children:[(0,E.jsx)(b.A,{expandIcon:(0,E.jsx)(I.A,{sx:{color:"white"}}),sx:{py:o?1:1.5,px:o?.5:1,minHeight:o?40:48,bgcolor:"transparent"},children:(0,E.jsxs)(u.A,{display:"flex",alignItems:"center",width:"100%",children:[(0,E.jsx)(p.A,{variant:o?"body2":"body1",sx:{fontWeight:500,color:"white"},children:"Availability"}),null!==oe.inStock&&(0,E.jsx)(m.A,{label:oe.inStock?"In Stock":"Out of Stock",size:"small",color:"primary",sx:{ml:1,height:20,fontSize:"0.65rem"}})]})}),(0,E.jsx)(f.A,{sx:{px:o?.5:2,py:o?1:1.5},children:(0,E.jsx)(S.A,{component:"fieldset",sx:{width:"100%"},children:(0,E.jsxs)(k.A,{value:null===oe.inStock?"all":oe.inStock?"inStock":"outOfStock",onChange:e=>{const t=e.target.value,n="all"===t?null:"inStock"===t,o=(0,i.A)((0,i.A)({},oe),{},{inStock:n});re(o),ce(o)},sx:{gap:o?0:.5},children:[(0,E.jsx)(v.A,{value:"all",control:(0,E.jsx)(M.A,{size:"small",sx:{py:o?.5:1,color:"white","&.Mui-checked":{color:"white"}}}),label:(0,E.jsx)(p.A,{variant:o?"caption":"body2",sx:{fontSize:o?"0.75rem":"0.875rem",color:"white"},children:"All Products"}),sx:{py:o?.25:.5}}),(0,E.jsx)(v.A,{value:"inStock",control:(0,E.jsx)(M.A,{size:"small",sx:{py:o?.5:1,color:"white","&.Mui-checked":{color:"white"}}}),label:(0,E.jsx)(p.A,{variant:o?"caption":"body2",sx:{fontSize:o?"0.75rem":"0.875rem",color:"white"},children:"In Stock Only"}),sx:{py:o?.25:.5}}),(0,E.jsx)(v.A,{value:"outOfStock",control:(0,E.jsx)(M.A,{size:"small",sx:{py:o?.5:1,color:"white","&.Mui-checked":{color:"white"}}}),label:(0,E.jsx)(p.A,{variant:o?"caption":"body2",sx:{fontSize:o?"0.75rem":"0.875rem",color:"white"},children:"Out of Stock"}),sx:{py:o?.25:.5}})]})})})]}),(0,E.jsx)(w.A,{sx:{my:o?.5:1,bgcolor:"rgba(255, 255, 255, 0.2)"}}),(0,E.jsxs)(y.A,{expanded:ee.condition,onChange:se("condition"),elevation:0,sx:{boxShadow:"none","&:before":{display:"none"},mb:.5,bgcolor:"transparent",color:"white"},children:[(0,E.jsx)(b.A,{expandIcon:(0,E.jsx)(I.A,{sx:{color:"white"}}),sx:{py:o?1:1.5,px:o?.5:1,minHeight:o?40:48,bgcolor:"transparent"},children:(0,E.jsxs)(u.A,{display:"flex",alignItems:"center",width:"100%",children:[(0,E.jsx)(B.A,{sx:{mr:1,fontSize:"1rem",color:"white"}}),(0,E.jsx)(p.A,{variant:o?"body2":"body1",sx:{fontWeight:500,color:"white"},children:"Condition"}),oe.condition.length>0&&(0,E.jsx)(m.A,{label:oe.condition.length,size:"small",color:"primary",sx:{ml:1,height:20,fontSize:"0.7rem"}})]})}),(0,E.jsx)(f.A,{sx:{px:o?.5:2,py:o?1:1.5},children:(0,E.jsx)(u.A,{sx:{maxHeight:o?200:"none",overflowY:"auto",overflowX:"hidden"},children:["New","Like New","Good","Fair"].map(e=>(0,E.jsx)(v.A,{control:(0,E.jsx)(A.A,{checked:oe.condition.includes(e),onChange:()=>(e=>{const t=oe.condition.includes(e)?oe.condition.filter(t=>t!==e):[...oe.condition,e],n=(0,i.A)((0,i.A)({},oe),{},{condition:t});re(n),ce(n)})(e),size:"small",sx:{py:o?.5:1,color:"white","&.Mui-checked":{color:"white"}}}),label:(0,E.jsx)(p.A,{variant:o?"caption":"body2",sx:{fontSize:o?"0.75rem":"0.875rem",color:"white"},children:e}),sx:{display:"flex",width:"100%",py:o?.25:.5}},e))})})]}),(0,E.jsx)(w.A,{sx:{my:o?.5:1,bgcolor:"rgba(255, 255, 255, 0.2)"}}),(0,E.jsx)(u.A,{sx:{px:o?.5:2,py:o?1:1.5},children:(0,E.jsxs)(S.A,{fullWidth:!0,size:"small",children:[(0,E.jsx)(C.A,{sx:{color:"white"},children:"Sort By"}),(0,E.jsxs)(z.A,{value:oe.sortBy,onChange:e=>{const t=(0,i.A)((0,i.A)({},oe),{},{sortBy:e.target.value});re(t),ce(t)},label:"Sort By",sx:{color:"white","& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255, 255, 255, 0.5)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"white"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"white"},"& .MuiSvgIcon-root":{color:"white"}},children:[(0,E.jsx)(N.A,{value:"price_low",children:"Price: Low to High"}),(0,E.jsx)(N.A,{value:"price_high",children:"Price: High to Low"}),(0,E.jsx)(N.A,{value:"newest",children:"Newest First"}),(0,E.jsx)(N.A,{value:"rating",children:"Highest Rated"}),(0,E.jsx)(N.A,{value:"condition",children:"Best Condition"})]})]})})]})};var W=n(22768);const T=e=>{let{children:t,gadgetId:n}=e;const[i,o]=(0,r.useState)(!1),s=(0,r.useRef)(null);return(0,r.useEffect)(()=>{const e=s.current,t=new IntersectionObserver(n=>{let[i]=n;i.isIntersecting&&(o(!0),e&&t.unobserve(e))},{threshold:.05,rootMargin:"100px"});return e&&t.observe(e),()=>{e&&t.unobserve(e)}},[]),(0,E.jsx)("div",{ref:s,children:i?t:(0,E.jsx)(H,{})})},H=()=>(0,E.jsxs)(u.A,{sx:{bgcolor:"rgba(255, 255, 255, 0.05)",borderRadius:2,p:2,border:"1px solid rgba(72, 206, 219, 0.2)",minHeight:"400px",animation:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"},children:[(0,E.jsx)(W.A,{variant:"rectangular",height:250,sx:{mb:2,borderRadius:1}}),(0,E.jsx)(W.A,{variant:"text",height:20,sx:{mb:1}}),(0,E.jsx)(W.A,{variant:"text",height:20,width:"80%",sx:{mb:2}}),(0,E.jsx)(W.A,{variant:"text",height:24,width:"60%"})]});var R=n(79482),Q=n(96469),X=n(79448),q=n(66424),D=n(86057),V=n(45774);const K=r.lazy(()=>Promise.all([n.e(535),n.e(81),n.e(529),n.e(212)]).then(n.bind(n,4212))),Y=e=>{let{category:t}=e;const[n,h]=(0,r.useState)("Gadgets"),[m,y]=(0,r.useState)(!1),[b,f]=(0,r.useState)([]),[v,A]=(0,r.useState)([]),[w,j]=(0,r.useState)(""),[S,k]=(0,r.useState)(!0),[M,C]=(0,r.useState)(null),[z,N]=(0,r.useState)({inStock:null}),[I,G]=(0,r.useState)(!1),[B,F]=(0,r.useState)(t||null),W=(0,a.zy)(),{category:H}=(0,a.g)(),[Y,U]=(0,r.useState)(!1),{location:J}=(0,_.z)(),Z=(null===J||void 0===J?void 0:J.currency)||"GBP",$=(0,c.A)(),ee=(0,d.A)($.breakpoints.down("lg"));(0,r.useEffect)(()=>{if(t){F(t);const e=Q.TS[t];e&&(h(e.name),N(e=>(0,i.A)((0,i.A)({},e),{},{categories:[t]})))}else if(H){F(H);const e=Object.values(Q.TS).find(e=>e.slug===H);e&&(F(Object.keys(Q.TS).find(e=>Q.TS[e].slug===H)),h(e.name),N(e=>(0,i.A)((0,i.A)({},e),{},{categories:[Object.keys(Q.TS).find(e=>Q.TS[e].slug===H)]})))}},[t,H]);const te=(0,r.useMemo)(()=>{try{const e=e=>{var t,n;const i="GBP"===Z&&null!==(t=null!==(n=null===e||void 0===e?void 0:e.price_gbp)&&void 0!==n?n:null===e||void 0===e?void 0:e.priceGbp)&&void 0!==t?t:null===e||void 0===e?void 0:e.price,o=Number("string"===typeof i?i.replace(/[^0-9.]/g,""):i);return Number.isFinite(o)?o:0},t=Array.isArray(b)?b.map(e).filter(e=>Number.isFinite(e)&&e>0):[];return 0===t.length?"GBP"===Z?2e3:2e6:Math.max(...t)}catch(e){return"GBP"===Z?2e3:2e6}},[b,Z]),ne="GBP"===Z?2e3:2e6,[ie,oe]=(0,r.useState)(ne);(0,r.useEffect)(()=>{(async()=>{try{const{category:e,brand:t,inStock:n,condition:i}=z,o=await O.QO.getAll({page:1,limit:1e3,category:e,brand:t,inStock:n,condition:i,currency:Z});if(o&&o.success&&Array.isArray(o.data)){const e=e=>{var t,n;const i="GBP"===Z&&null!==(t=null!==(n=null===e||void 0===e?void 0:e.price_gbp)&&void 0!==n?n:null===e||void 0===e?void 0:e.priceGbp)&&void 0!==t?t:null===e||void 0===e?void 0:e.price,o=Number("string"===typeof i?i.replace(/[^0-9.]/g,""):i);return Number.isFinite(o)?o:0},t=o.data.map(e).filter(e=>Number.isFinite(e)&&e>0);if(t.length>0){const e=Math.max(...t);oe(e)}}}catch(e){0}})()},[z.category,z.brand,z.inStock,z.condition,Z]);const re=(0,r.useMemo)(()=>{const e="GBP"===Z?2e3:2e6;return Math.max(ie||e,te||e)},[ie,te,Z]),se={hidden:{opacity:0,y:12,scale:.98},show:{opacity:1,y:0,scale:1,transition:{duration:.35,ease:[.22,1,.36,1]}}},ae=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"newest";const n=Array.isArray(e)?[...e]:[],i=e=>{const t=null===e||void 0===e?void 0:e.price,n=Number("string"===typeof t?t.replace(/[^0-9.]/g,""):t);return Number.isFinite(n)?n:0},o=e=>{var t;return Number(null!==(t=null===e||void 0===e?void 0:e.rating)&&void 0!==t?t:0)},r=e=>{const t=null!==e&&void 0!==e&&e.date?new Date(e.date):null;return t instanceof Date&&!isNaN(t)?t.getTime():0},s=e=>{var t;return null!==(t={Excellent:4,"Very Good":3,Good:2,Fair:1}[String(e)])&&void 0!==t?t:0};switch(t){case"price_low":return n.sort((e,t)=>i(e)-i(t));case"price_high":return n.sort((e,t)=>i(t)-i(e));case"newest":return n.sort((e,t)=>r(t)-r(e));case"rating":return n.sort((e,t)=>o(t)-o(e));case"condition":return n.sort((e,t)=>s(null===t||void 0===t?void 0:t.condition)-s(null===e||void 0===e?void 0:e.condition));default:return n}};(0,r.useEffect)(()=>{const e="Shop phones, tablets, computers, and accessories with finance, warranty, and trade\u2011in options.",t="https://itsxtrapush.com/gadgets";document.title="Xtrapush Gadgets : A little push to get you there";const n=(e,t)=>{let n=document.querySelector('meta[name="'.concat(e,'"]'));n||(n=document.createElement("meta"),n.setAttribute("name",e),document.head.appendChild(n)),n.setAttribute("content",t)},i=(e,t)=>{let n=document.querySelector('meta[property="'.concat(e,'"]'));n||(n=document.createElement("meta"),n.setAttribute("property",e),document.head.appendChild(n)),n.setAttribute("content",t)};n("description",e),n("keywords","Xtrapush Gadgets, Xtrapush, gadgets, phones, tablets, accessories, computers, laptops, PCs, chargers, cases, headphones, earbuds, smartwatches, wearables, warranty, finance, trade-in");let o=document.querySelector('link[rel="canonical"]');o||(o=document.createElement("link"),o.setAttribute("rel","canonical"),document.head.appendChild(o)),o.setAttribute("href",t),i("og:title","Xtrapush Gadgets : A little push to get you there"),i("og:description",e),i("og:url",t),n("twitter:title","Xtrapush Gadgets : A little push to get you there"),n("twitter:description",e);try{const n={"@context":"https://schema.org","@type":"CollectionPage",name:"Xtrapush Gadgets",description:e,url:t,isPartOf:{"@type":"WebSite",name:"Xtrapush Gadgets",url:"https://itsxtrapush.com/"},breadcrumb:{"@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:"https://itsxtrapush.com/"},{"@type":"ListItem",position:2,name:"Gadgets",item:t}]}};let i=document.getElementById("ld-collectionpage");i||(i=document.createElement("script"),i.id="ld-collectionpage",i.type="application/ld+json",document.head.appendChild(i)),i.textContent=JSON.stringify(n)}catch(r){}},[]);const[le,ce]=(0,r.useState)(1),[de,he]=(0,r.useState)(0),ue=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:le;try{Y||k(!0),C(null);const l=Object.entries(e).reduce((e,t)=>{let[n,i]=t;return null!==i&&void 0!==i&&(e[n]=i),e},{}),c=!("inStock"in l)?200:20,d=(0,i.A)((0,i.A)({page:t,limit:c},l),{},{currency:Z});console.log("\ud83d\udd0d Fetching gadgets with filters:",d),console.log("API URL:","https://sparkle-pro.co.uk/api");const h=await O.QO.getAll(d);if(console.log("\ud83d\udce1 Raw API response:",h),h&&h.success&&Array.isArray(h.data)){var n,o,r,s,a;console.log("\u2705 Valid gadgets response:",h.data.length,"gadgets");const i=t>1?[...b,...h.data]:h.data;console.log("\ud83e\uddee Base list count:",i.length,"pageNum:",t),f(i);const c=!("inStock"in l),d=c?h.data.length:null!==(n=null!==(o=null===(r=h.pagination)||void 0===r?void 0:r.total)&&void 0!==o?o:h.count)&&void 0!==n?n:h.data.length;he(d),console.log("\ud83d\udcca Total set to:",d,"isAllProductsMode:",c);let u=i;const x=w?u.filter(e=>"".concat(e.name," ").concat(e.description," ").concat(e.brand," ").concat(e.model).toLowerCase().includes(w.toLowerCase())):u;console.log("\ud83d\udd0e After search filter count:",x.length);const p=null!==(s=null!==(a=null===e||void 0===e?void 0:e.sortBy)&&void 0!==a?a:z.sortBy)&&void 0!==s?s:"newest";let m;const g=!("inStock"in l);if(console.log("\ud83c\udfb2 Should randomize:",g,"cleanedFilters:",l),1===t)if(g){console.log("\ud83c\udfb2 Randomizing all products..."),m=[...x];for(let e=m.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[m[e],m[t]]=[m[t],m[e]]}}else m=ae(x,p);else m=x;console.log("\ud83d\udcca Final sorted count:",m.length),A(m)}else console.error("\u274c Invalid response structure:",h),f([]),A([]),C("Invalid response from server")}catch(h){var l,c,d;console.error("\u274c Error fetching gadgets:",h),console.error("Error details:",{message:h.message,status:null===(l=h.response)||void 0===l?void 0:l.status,url:null===(c=h.config)||void 0===c?void 0:c.url,responseData:null===(d=h.response)||void 0===d?void 0:d.data}),C("Failed to connect to server: ".concat(h.message))}finally{k(!1)}};(0,r.useEffect)(()=>{try{sessionStorage.removeItem("gadgets_cache_v1")}catch(e){}ue(z,1)},[]),(0,r.useEffect)(()=>{le>1&&ue(z,le)},[le]),(0,r.useEffect)(()=>{if(W.state&&W.state.searchQuery){const e=W.state.searchQuery;j(e),xe(e,b)}},[W.state,b]),(0,r.useEffect)(()=>{const e=new URLSearchParams(W.search).get("search");e&&e!==w&&(j(e),xe(e,b))},[W.search,b]),(0,r.useEffect)(()=>{if(W.state&&W.state.category){const e=W.state.category,t=(0,i.A)((0,i.A)({},z),{},{category:e});N(t),ce(1),f([]),A([]),ue(t),W.state.categoryTitle&&h(W.state.categoryTitle)}},[W.state]);const xe=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v;var i;if(!e||""===e.trim())return void A(ae(n,null!==(i=z.sortBy)&&void 0!==i?i:"newest"));const o=e.toLowerCase(),r=n.filter(e=>[e.name,e.title,e.description,e.brand,e.model,e.category].filter(Boolean).join(" ").toLowerCase().includes(o));A(ae(r,null!==(t=z.sortBy)&&void 0!==t?t:"newest"))},pe=r.useRef(null),me=e=>{f([]),A([]),he(0),ce(1),N(e),ue(e,1)},ge=()=>{G(!I)},ye=(0,Q.oH)(B,w),be=(0,Q.OI)(B,w),fe=(0,Q.zY)([{name:"Home",url:"/"},{name:"Gadgets",url:"/gadgets"},...B&&Q.TS[B]?[{name:Q.TS[B].name,url:"/".concat(Q.TS[B].slug)}]:[]]);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(R.A,{title:ye,description:be,canonical:(0,Q.KQ)(W.pathname),structuredData:fe}),(0,E.jsx)(s.P.div,{className:"deep bg-primary w-full min-h-screen overflow-hidden",initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{duration:.35,ease:[.22,1,.36,1]},children:(0,E.jsx)("div",{className:"".concat(o.A.paddingX," ").concat(o.A.flexCenter),children:(0,E.jsxs)("div",{className:"".concat(o.A.boxWidth),children:[(0,E.jsx)("div",{className:"flex justify-center px-2 sm:px-4 mt-2 sm:mt-4 mb-4 sm:mb-6",children:(0,E.jsx)(l.A,{onSearch:async e=>{if(j(e),!e||""===e.trim())return ce(1),void ue(z,1);try{k(!0);const t=await O.QO.search(e);if(t&&t.success&&Array.isArray(t.data)){let e=t.data;null!==z.inStock&&void 0!==z.inStock&&(e=e.filter(e=>{var t,n,i;const o=null!==(t=null!==(n=null!==(i=e.stock_quantity)&&void 0!==i?i:e.stockQuantity)&&void 0!==n?n:e.stock)&&void 0!==t?t:0,r=e.inStock||e.in_stock||Number(o)>0;return z.inStock?r:!r})),f(e),A(e),he(e.length),ce(1)}}catch(M){console.error("Search failed:",M)}finally{k(!1)}},onInputChange:e=>{j(e),pe.current&&clearTimeout(pe.current),pe.current=setTimeout(async()=>{if(!e||""===e.trim())return ce(1),void ue(z,1);try{const t=await O.QO.search(e);if(t&&t.success&&Array.isArray(t.data)){let e=t.data;null!==z.inStock&&void 0!==z.inStock&&(e=e.filter(e=>{var t,n,i;const o=null!==(t=null!==(n=null!==(i=e.stock_quantity)&&void 0!==i?i:e.stockQuantity)&&void 0!==n?n:e.stock)&&void 0!==t?t:0,r=e.inStock||e.in_stock||Number(o)>0;return z.inStock?r:!r})),f(e),A(e),he(e.length),ce(1)}}catch(M){console.error("Search failed:",M)}},300)},initialQuery:w})}),ee&&(0,E.jsx)(u.A,{sx:{mb:2,display:"flex",justifyContent:"center",px:2},children:(0,E.jsx)(g.A,{startIcon:(0,E.jsx)(P.A,{}),onClick:ge,variant:"contained",sx:{bgcolor:"#051323",color:"white","&:hover":{bgcolor:"#0a2540"},borderRadius:2,px:4,py:1.5,fontSize:"1rem",fontWeight:600},children:"Filter Gadgets"})}),(0,E.jsxs)(u.A,{sx:{display:"flex",gap:2,px:2},children:[!ee&&(0,E.jsx)(u.A,{sx:{width:280,flexShrink:0,"& > *":{bgcolor:"#051323 !important",color:"white !important"}},children:(0,E.jsx)(L,{onFiltersChange:me,currentFilters:z,maxPrice:re,currency:Z})}),(0,E.jsxs)(X.Ay,{anchor:"left",open:I,onClose:ge,sx:{"& .MuiDrawer-paper":{width:{xs:"90vw",sm:"400px"},maxWidth:"400px",bgcolor:"#051323",color:"white",p:0}},children:[(0,E.jsxs)(u.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:2,borderBottom:1,borderColor:"rgba(255, 255, 255, 0.2)",bgcolor:"#051323"},children:[(0,E.jsx)(p.A,{variant:"h6",component:"h2",sx:{color:"white"},children:"Filter Gadgets"}),(0,E.jsx)(q.A,{onClick:ge,size:"small",sx:{color:"white"},children:(0,E.jsx)(V.A,{})})]}),(0,E.jsx)(u.A,{sx:{p:1,overflow:"auto",height:"calc(100% - 65px)",bgcolor:"#051323"},children:(0,E.jsx)(L,{onFiltersChange:e=>{me(e)},currentFilters:z,isMobile:!0,maxPrice:re,currency:Z})})]}),(0,E.jsx)(u.A,{sx:{flex:1,minWidth:0},children:(0,E.jsxs)("section",{className:"flex flex-col items-center text-center w-[95%] mx-auto px-3 py-4 sm:w-auto sm:p-12 sm:pt-4",children:[(0,E.jsxs)("h1",{className:"font-poppins font-semibold text-[32px] xs:text-[40px] sm:text-[52px] text-white leading-tight mb-6",children:["Explore Our ",(0,E.jsx)("span",{className:"text-gradient",children:"Gadgets"})]}),S?(0,E.jsxs)("div",{className:"flex flex-col items-center mt-8 mb-16",children:[(0,E.jsx)(x.A,{sx:{color:"white",mb:2}}),(0,E.jsx)("div",{className:"text-white text-xl",children:"Loading gadgets..."})]}):M?(0,E.jsxs)("div",{className:"mt-8 mb-16",children:[(0,E.jsx)(D.A,{severity:"error",sx:{mb:2},children:M}),(0,E.jsxs)("div",{className:"text-white text-lg",children:["API URL: ","https://sparkle-pro.co.uk/api"]}),(0,E.jsx)("div",{className:"text-white text-sm mt-2",children:"Check browser console for detailed error information."})]}):0===v.length?(0,E.jsx)("div",{className:"text-white text-xl mt-8 mb-16",children:w?'No gadgets found matching "'.concat(w,'". Try a different search term.'):"No gadgets available."}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(p.A,{variant:"body1",sx:{color:"white",mb:3,opacity:.8},children:["Showing ",b.length," of ",de," gadget",1!==de?"s":"",w&&' for "'.concat(w,'"')]}),(0,E.jsx)(r.Suspense,{fallback:(0,E.jsx)("div",{className:"text-white opacity-70",children:"Loading items\u2026"}),children:(0,E.jsx)(s.P.div,{className:"w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-6",variants:{hidden:{},show:{transition:{staggerChildren:.06,delayChildren:.04}}},initial:"hidden",animate:"show",children:v.map(e=>{var t,n,i,o,r;return(0,E.jsx)(s.P.div,{variants:se,children:(0,E.jsx)(T,{gadgetId:e.id,children:(0,E.jsx)(a.N_,{to:"/gadgets/".concat(e.id),onClick:e=>{try{window.__dialogOpen&&(e.preventDefault(),e.stopPropagation())}catch(t){}},children:(0,E.jsx)(K,{id:e.id,title:e.name,date:e.date||"Available Now",number:(()=>{const t=[null===e||void 0===e?void 0:e.stock_quantity,null===e||void 0===e?void 0:e.qty,null===e||void 0===e?void 0:e.number];for(const e of t){const t=Number(e);if(Number.isFinite(t)&&t>=0)return t}return null!==e&&void 0!==e&&e.in_stock||null!==e&&void 0!==e&&e.inStock?1:0})(),image:e.image,description:e.description,price:e.price,priceMwk:null!==(t=null!==(n=e.price_mwk)&&void 0!==n?n:e.priceMwk)&&void 0!==t?t:e.price,priceGbp:null!==(i=e.price_gbp)&&void 0!==i?i:e.priceGbp,monthlyPrice:null!==(o=e.monthly_price)&&void 0!==o?o:e.monthlyPrice,monthlyPriceGbp:null!==(r=e.monthly_price_gbp)&&void 0!==r?r:e.monthlyPriceGbp,brand:e.brand,condition:e.condition})},e.id)})},"card-".concat(e.id))})})}),(0,E.jsxs)(u.A,{sx:{display:"flex",justifyContent:"center",gap:2,mt:4},children:[le>1&&(0,E.jsx)(g.A,{variant:"outlined",color:"primary",onClick:()=>{const e=le-1;ce(e),f(t=>t.slice(0,20*e)),A(t=>t.slice(0,20*e))},children:"View Less"}),b.length<de&&(0,E.jsx)(g.A,{variant:"contained",color:"primary",onClick:()=>{ce(e=>e+1)},children:"View More"})]})]})]})})]})]})})})]})}}}]);