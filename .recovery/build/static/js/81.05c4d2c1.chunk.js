"use strict";(self.webpackChunkitsxtrapush=self.webpackChunkitsxtrapush||[]).push([[81],{15320(e,o,i){i.d(o,{A:()=>P});var r=i(89379),t=i(9950),a=i(81831),l=i(83687),n=i(23653),s=i(80218),c=i(6732),d=i(65250),p=i(27321),x=i(98519),h=i(80727),u=i(18643),g=i(66615),b=i(82503),v=i(47371),m=i(52948),y=i(11251),A=i(20615),f=i(9013),j=i(84453),w=i(31760),k=i(19181),C=i(43405),S=i(69335),D=i(15672),W=i(92994),B=i(72117),E=i(44414);const P=e=>{var o,i;let{open:P,onClose:_,item:M,customerEmail:I}=e;const[R,N]=(0,t.useState)(2),[L,T]=(0,t.useState)(!1),[z,q]=(0,t.useState)(""),[F,O]=(0,t.useState)(!1),[G,Y]=(0,t.useState)("pay-to-own"),U=t.useRef(!1);(0,t.useEffect)(()=>{P&&!U.current&&Y("pay-to-own"),U.current=P},[P]);const[H,K]=(0,t.useState)(!1),[Q,V]=(0,t.useState)("weeks"),[J,$]=(0,t.useState)(1),[X,Z]=(0,t.useState)(null),[ee,oe]=(0,t.useState)(null),[ie,re]=(0,t.useState)(!1),[te,ae]=(0,t.useState)(""),{userProfile:le}=(0,C.A)(),{currency:ne}=(0,S.e)(),{isMalawi:se}=(0,D.z)(),ce=(0,W.Zp)(),de=se?"paychangu":"square",pe=se?"MWK":"GBP",[xe,he]=(0,t.useState)([]),[ue,ge]=(0,t.useState)([]),[be,ve]=(0,t.useState)([]),me=(null===M||void 0===M?void 0:M.condition)||"new",ye={new:"New",like_new:"Like New",good:"Good",fair:"Fair"}[me]||"New",[Ae,fe]=(0,t.useState)([ye]),[je,we]=(0,t.useState)((null===M||void 0===M?void 0:M.color)||""),[ke,Ce]=(0,t.useState)((null===M||void 0===M?void 0:M.storage)||""),[Se,De]=(0,t.useState)(me),[We,Be]=(0,t.useState)((null===M||void 0===M?void 0:M.variantId)||void 0),[Ee,Pe]=(0,t.useState)((null===M||void 0===M?void 0:M.image)||""),[_e,Me]=(0,t.useState)((null===M||void 0===M?void 0:M.name)||(null===M||void 0===M?void 0:M.title)||"Gadget"),[Ie,Re]=(0,t.useState)((null===M||void 0===M?void 0:M.description)||""),[Ne,Le]=(0,t.useState)((null===M||void 0===M?void 0:M.specifications)||null),[Te,ze]=(0,t.useState)((null===M||void 0===M?void 0:M.category)||""),[qe,Fe]=(0,t.useState)(!1),Oe=(0,A.A)("(max-width:600px)"),{formatLocalPrice:Ge}=(0,S.e)(),Ye=!!Te&&["smartphones","tablets","laptops","phones","mobile","iphone","samsung","ipad"].some(e=>Te.toLowerCase().includes(e.toLowerCase())),Ue=e=>"string"===typeof e?parseFloat(e.replace(/[^0-9.-]+/g,""))||0:Number(e)||0,[He,Ke]=(0,t.useState)(Ue(null!==(o=null===M||void 0===M?void 0:M.priceGbp)&&void 0!==o?o:null===M||void 0===M?void 0:M.price)),Qe=(e,o,i,r)=>{if(0===e.length)return null;if(o&&i){const t=e.find(e=>String(e.color)===String(o)&&String(e.storage)===String(i)&&String(e.condition_status)===String(r));if(t)return t}if(i){const o=e.find(e=>String(e.storage)===String(i)&&String(e.condition_status)===String(r));if(o)return o}if(o){const i=e.find(e=>String(e.color)===String(o)&&String(e.condition_status)===String(r));if(i)return i}return e.find(e=>String(e.condition_status)===String(r))};(0,t.useEffect)(()=>{(async()=>{if(P&&null!==M&&void 0!==M&&M.id)try{const x=await k.QO.getById(M.id);if(null!==x&&void 0!==x&&x.success&&null!==x&&void 0!==x&&x.data){var e,o,i,t,a,l,n,s,c,d,p;Me((null===(e=x.data)||void 0===e?void 0:e.name)||_e),Pe((null===(o=x.data)||void 0===o?void 0:o.image)||Ee),Re((null===(i=x.data)||void 0===i?void 0:i.description)||(null===M||void 0===M?void 0:M.description)||""),Le((null===(t=x.data)||void 0===t?void 0:t.specifications)||(null===M||void 0===M?void 0:M.specifications)||null),ze((null===(a=x.data)||void 0===a?void 0:a.category)||(null===M||void 0===M?void 0:M.category)||"");const h=Array.isArray(x.data.variants)?x.data.variants.map(e=>{var o;return(0,r.A)((0,r.A)({},e),{},{color:e.color||null,color_hex:e.color_hex||e.colorHex||null,condition_status:null!==(o=e.condition_status)&&void 0!==o?o:e.condition,stock_quantity:"undefined"!==typeof e.stock_quantity?e.stock_quantity:e.stockQuantity,is_active:"undefined"!==typeof e.is_active?e.is_active:e.active,price_gbp:e.price_gbp||e.priceGbp||null})}).filter(e=>{var o;return 1===(null!==(o=null===e||void 0===e?void 0:e.is_active)&&void 0!==o?o:1)}):[];he(h);const u=new Map;h.forEach(e=>{e.color&&u.set(e.color,{color:e.color,colorHex:e.color_hex||null})});const g=Array.from(u.values());ge(g);const b=h.length>0?Array.from(new Set(h.map(e=>String(e.storage)).filter(Boolean))):[];ve(b);const v=["new","like_new","good","fair"],m=h.length>0?Array.from(new Set(h.map(e=>String(e.condition_status)).filter(Boolean).map(e=>e.toLowerCase()).filter(e=>v.includes(e)))):[],y=String((null===(l=x.data)||void 0===l?void 0:l.condition)||(null===(n=x.data)||void 0===n?void 0:n.condition_status)||(null===M||void 0===M?void 0:M.condition)||"new").toLowerCase(),A=v.includes(y)?y:"new",f=m.length>0?m:[A],j={new:"New",like_new:"Like New",good:"Good",fair:"Fair"},w=f.map(e=>j[e]||e);fe(w);const k=(null===M||void 0===M?void 0:M.color)||(g.length>0?g[0].color:""),C=(null===M||void 0===M?void 0:M.storage)||b[0]||"",S=(null===M||void 0===M?void 0:M.condition)||f[0]||"new";we(k),Ce(C),De(S);let D=Qe(h,k,C,S);const W=Ue(D?D.price_gbp||D.price:null!==(s=(null===(c=x.data)||void 0===c?void 0:c.price_gbp)||(null===(d=x.data)||void 0===d?void 0:d.price))&&void 0!==s?s:null!==(p=null===M||void 0===M?void 0:M.priceGbp)&&void 0!==p?p:null===M||void 0===M?void 0:M.price);Ke(W),Be((null===D||void 0===D?void 0:D.id)||void 0)}}catch(x){console.warn("InstallmentModal: gadget detail fetch failed, using passed item.",x)}})()},[P,null===M||void 0===M?void 0:M.id]),(0,t.useEffect)(()=>{try{window.__dialogOpen=!!P}catch(e){}return()=>{try{window.__dialogOpen=!1}catch(e){}}},[P]);const Ve={New:"new","Like New":"like_new",Good:"good",Fair:"fair"},Je={new:"New",like_new:"Like New",good:"Good",fair:"Fair"},{depositAmount:$e,remainingBalance:Xe,weeklyAmount:Ze,adjustedTotal:eo,depositPercentage:oo,totalAdjustmentPercentage:io}=((0,t.useMemo)(()=>{var e;if(!ke)return!0;const o=xe.find(e=>e.storage===ke&&e.condition_status===Se);return!!o&&parseInt(null!==(e=o.stock_quantity)&&void 0!==e?e:0,10)>0},[xe,ke,Se]),(0,t.useMemo)(()=>{const e=Number(He)||0;let o=e,i=.35,r=0;4===R?(o=1.05*e,i=.5,r=5):6===R&&(o=1.1*e,i=.65,r=10);const t=o*i,a=o-t;return{depositAmount:t,remainingBalance:a,weeklyAmount:R>0?a/R:0,adjustedTotal:o,depositPercentage:Math.round(100*i),totalAdjustmentPercentage:r}},[He,R]));return P?(0,E.jsxs)(s.A,{open:P,onClose:_,maxWidth:"sm",fullWidth:!0,fullScreen:Oe,disableEscapeKeyDown:!0,ModalProps:{keepMounted:!0,disableEnforceFocus:!0,disableRestoreFocus:!0},BackdropProps:{sx:{backgroundColor:"rgba(0,0,0,0.35)"}},PaperProps:{sx:{bgcolor:"#0d2137",color:"white",borderRadius:"20px",maxHeight:Oe?"100vh":"90vh",position:"relative",zIndex:1500,pointerEvents:"auto"}},children:[(0,E.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",gap:1,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[(0,E.jsx)(w.A,{}),"Pay in Installments"]}),(0,E.jsxs)(d.A,{sx:{color:"rgba(255,255,255,0.92)",px:Oe?2:3,overflowY:"auto",WebkitOverflowScrolling:"touch","&::-webkit-scrollbar":{width:8},"&::-webkit-scrollbar-track":{bgcolor:"rgba(255,255,255,0.05)"},"&::-webkit-scrollbar-thumb":{bgcolor:"rgba(255,255,255,0.2)",borderRadius:4}},children:[(0,E.jsxs)(p.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",py:3,mb:2,borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[(0,E.jsx)(p.A,{component:"img",src:Ee,alt:_e,sx:{width:294,height:294,objectFit:"contain",borderRadius:2,bgcolor:"rgba(255,255,255,0.05)",p:1,mb:2}}),(0,E.jsx)(x.A,{variant:"h6",sx:{fontWeight:700,textAlign:"center",color:"white"},children:_e}),Ie&&(0,E.jsxs)(p.A,{sx:{mt:1,width:"100%"},children:[(0,E.jsxs)(p.A,{onClick:()=>K(!H),sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:.5,cursor:"pointer",color:"#48CEDB","&:hover":{color:"#6ad8e6"}},children:[(0,E.jsx)(x.A,{variant:"caption",sx:{fontWeight:500},children:H?"Hide Details":"View Details"}),H?(0,E.jsx)(f.A,{fontSize:"small"}):(0,E.jsx)(j.A,{fontSize:"small"})]}),(0,E.jsx)(h.A,{in:H,children:(0,E.jsxs)(p.A,{sx:{mt:1,p:1.5,bgcolor:"rgba(255,255,255,0.03)",borderRadius:1,border:"1px solid rgba(255,255,255,0.1)"},children:[(0,E.jsx)(x.A,{variant:"body2",sx:{color:"rgba(255,255,255,0.8)",fontSize:"0.8rem",lineHeight:1.5,textAlign:"left"},children:Ie}),Ne&&Object.keys(Ne).length>0&&(0,E.jsxs)(p.A,{sx:{mt:1.5,pt:1.5,borderTop:"1px solid rgba(255,255,255,0.1)"},children:[(0,E.jsx)(x.A,{variant:"caption",sx:{color:"#48CEDB",fontWeight:600,display:"block",mb:.5},children:"Specifications"}),Object.entries(Ne).slice(0,5).map(e=>{let[o,i]=e;const r=Array.isArray(i)?i.join(", "):"object"===typeof i&&null!==i?Object.entries(i).map(e=>{let[o,i]=e;return"".concat(o,": ").concat(i)}).join(", "):String(i);return(0,E.jsxs)(x.A,{variant:"caption",sx:{color:"rgba(255,255,255,0.7)",display:"block",textAlign:"left"},children:[(0,E.jsxs)("span",{style:{color:"rgba(255,255,255,0.5)",textTransform:"capitalize"},children:[o.replace(/_/g," "),":"]})," ",r]},o)})]})]})})]})]}),"pay-to-lease"!==G&&(Ae.length>0||be.length>0||ue.length>0||Ye&&0===xe.length)&&(0,E.jsxs)(p.A,{sx:{mb:3,p:2,bgcolor:"rgba(255, 255, 255, 0.03)",borderRadius:2,border:"1px solid rgba(255, 255, 255, 0.08)"},children:[(0,E.jsx)(x.A,{variant:"subtitle2",sx:{mb:2,fontWeight:600,color:"white",opacity:.9},children:"Select Options"}),(be.length>0||Ye&&0===xe.length)&&(0,E.jsxs)(p.A,{sx:{mb:2.5},children:[(0,E.jsxs)(x.A,{variant:"caption",sx:{color:"rgba(255,255,255,0.7)",fontWeight:600,mb:1,display:"block"},children:["Storage: ",(0,E.jsx)("span",{style:{color:"white"},children:be.length>0?ke||be[0]:"Not specified"})]}),(0,E.jsx)(p.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:0===be.length?(0,E.jsx)(p.A,{sx:{px:2,py:1,borderRadius:1,border:"1px solid rgba(255,255,255,0.2)",color:"rgba(255,255,255,0.4)",fontSize:"0.85rem",cursor:"not-allowed"},children:"Not specified"}):be.map(e=>{const o=xe.some(o=>{var i;return o.storage===e&&parseInt(null!==(i=o.stock_quantity)&&void 0!==i?i:0,10)>0});return{storage:e,hasStock:o}}).map(e=>{let{storage:o,hasStock:i}=e;const r=(ke||be[0])===o;return(0,E.jsx)(p.A,{onClick:()=>i&&(e=>{Ce(e);const o=xe.filter(o=>{var i;return o.storage===e&&parseInt(null!==(i=o.stock_quantity)&&void 0!==i?i:0,10)>0}),i=o.some(e=>e.condition_status===Se);let r=Se;!i&&o.length>0&&(r=o[0].condition_status,De(r));const t=Qe(xe,je,e,r),a=se?t?Ue(t.price||t.price_gbp):He:t?Ue(t.price_gbp||t.price):He;Ke(a),Be((null===t||void 0===t?void 0:t.id)||void 0)})(o),sx:{px:2,py:1,borderRadius:1,border:r?"2px solid #48CEDB":"1px solid rgba(255,255,255,0.3)",bgcolor:r?"rgba(72, 206, 219, 0.15)":"transparent",color:i?"white":"rgba(255,255,255,0.3)",cursor:i?"pointer":"not-allowed",opacity:i?1:.5,fontSize:"0.85rem",fontWeight:r?600:400,transition:"all 0.2s ease","&:hover":i?{borderColor:"#48CEDB",bgcolor:"rgba(72, 206, 219, 0.1)"}:{}},children:o},o)})})]}),(ue.length>0||Ye&&0===xe.length)&&(0,E.jsxs)(p.A,{sx:{mb:2.5},children:[(0,E.jsxs)(x.A,{variant:"caption",sx:{color:"rgba(255,255,255,0.7)",fontWeight:600,mb:1,display:"block"},children:["Colour: ",(0,E.jsx)("span",{style:{color:"white"},children:ue.length>0?je||(null===(i=ue[0])||void 0===i?void 0:i.color):"Not specified"})]}),(0,E.jsx)(p.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:0===ue.length?(0,E.jsx)(p.A,{sx:{px:2,py:1,borderRadius:1,border:"1px solid rgba(255,255,255,0.2)",color:"rgba(255,255,255,0.4)",fontSize:"0.85rem",cursor:"not-allowed"},children:"Not specified"}):ue.map(e=>{var o;const i=(je||(null===(o=ue[0])||void 0===o?void 0:o.color))===e.color;return(0,E.jsxs)(p.A,{onClick:()=>(e=>{we(e);const o=Qe(xe,e,ke,Se),i=se?o?Ue(o.price||o.price_gbp):He:o?Ue(o.price_gbp||o.price):He;Ke(i),Be((null===o||void 0===o?void 0:o.id)||void 0)})(e.color),sx:{px:2,py:1,borderRadius:1,border:i?"2px solid #48CEDB":"1px solid rgba(255,255,255,0.3)",bgcolor:i?"rgba(72, 206, 219, 0.15)":"transparent",color:"white",cursor:"pointer",fontSize:"0.85rem",fontWeight:i?600:400,display:"flex",alignItems:"center",gap:1,transition:"all 0.2s ease","&:hover":{borderColor:"#48CEDB",bgcolor:"rgba(72, 206, 219, 0.1)"}},children:[e.colorHex&&(0,E.jsx)(p.A,{sx:{width:14,height:14,borderRadius:"50%",bgcolor:e.colorHex,border:"1px solid rgba(255,255,255,0.5)",flexShrink:0}}),e.color]},e.color)})})]}),(Ae.length>0||Ye&&0===xe.length)&&(0,E.jsxs)(p.A,{children:[(0,E.jsxs)(x.A,{variant:"caption",sx:{color:"rgba(255,255,255,0.7)",fontWeight:600,mb:1,display:"block"},children:["Condition: ",(0,E.jsx)("span",{style:{color:"white"},children:Ae.length>0&&Je[Se]||"New"})]}),(0,E.jsx)(p.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:0===Ae.length?(0,E.jsx)(p.A,{sx:{px:2,py:1,borderRadius:1,border:"2px solid #48CEDB",bgcolor:"rgba(72, 206, 219, 0.15)",color:"white",fontSize:"0.85rem",fontWeight:600},children:"New"}):Ae.map(e=>{var o;const i=Ve[e]||e;if(!ke){const o=xe.some(e=>{var o;return e.condition_status===i&&parseInt(null!==(o=e.stock_quantity)&&void 0!==o?o:0,10)>0});return{label:e,token:i,hasStock:o}}const r=xe.find(e=>e.storage===ke&&e.condition_status===i),t=r?parseInt(null!==(o=r.stock_quantity)&&void 0!==o?o:0,10):0;return{label:e,token:i,hasStock:t>0,stock:t}}).map(e=>{let{label:o,hasStock:i,stock:r}=e;const t=(Je[Se]||"New")===o;return(0,E.jsx)(p.A,{onClick:()=>i&&(e=>{const o=Ve[e]||e;De(o);const i=Qe(xe,je,ke,o),r=se?i?Ue(i.price||i.price_gbp):He:i?Ue(i.price_gbp||i.price):He;Ke(r),Be((null===i||void 0===i?void 0:i.id)||void 0)})(o),sx:{px:2,py:1,borderRadius:1,border:t?"2px solid #48CEDB":"1px solid rgba(255,255,255,0.3)",bgcolor:t?"rgba(72, 206, 219, 0.15)":"transparent",color:i?"white":"rgba(255,255,255,0.3)",cursor:i?"pointer":"not-allowed",opacity:i?1:.5,fontSize:"0.85rem",fontWeight:t?600:400,transition:"all 0.2s ease","&:hover":i?{borderColor:"#48CEDB",bgcolor:"rgba(72, 206, 219, 0.1)"}:{}},children:o},o)})})]})]}),(0,E.jsxs)(p.A,{sx:{mb:3,p:2,bgcolor:"rgba(255, 255, 255, 0.05)",borderRadius:1,border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,E.jsx)(x.A,{variant:"subtitle2",sx:{mb:1.5,fontWeight:600,color:"white"},children:"Select Payment Plan"}),(0,E.jsxs)(p.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,E.jsx)(p.A,{onClick:e=>{e.stopPropagation(),Y("pay-to-own")},sx:{p:1.5,border:"pay-to-own"===G?"2px solid #48CEDB":"1px solid rgba(255, 255, 255, 0.2)",borderRadius:1,bgcolor:"pay-to-own"===G?"rgba(72, 206, 219, 0.1)":"transparent",cursor:"pointer",transition:"all 0.2s ease","&:hover":{borderColor:"#48CEDB",bgcolor:"rgba(72, 206, 219, 0.05)"}},children:(0,E.jsxs)(p.A,{sx:{display:"flex",alignItems:"flex-start",gap:1.5},children:[(0,E.jsx)(u.A,{checked:"pay-to-own"===G,onChange:()=>Y("pay-to-own"),sx:{color:"rgba(255, 255, 255, 0.7)","&.Mui-checked":{color:"#48CEDB"},p:0,mt:.5}}),(0,E.jsxs)(p.A,{children:[(0,E.jsx)(x.A,{variant:"body2",sx:{fontWeight:600,color:"white"},children:"Pay to Own"}),(0,E.jsx)(x.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.7)",display:"block",mt:.5},children:"Pay deposit + weekly installments. Receive item after all payments complete."})]})]})}),(0,E.jsx)(p.A,{onClick:e=>{e.stopPropagation(),Y("pay-to-lease")},sx:{p:1.5,border:"pay-to-lease"===G?"2px solid #48CEDB":"1px solid rgba(255, 255, 255, 0.2)",borderRadius:1,bgcolor:"pay-to-lease"===G?"rgba(72, 206, 219, 0.1)":"transparent",cursor:"pointer",transition:"all 0.2s ease","&:hover":{borderColor:"#48CEDB",bgcolor:"rgba(72, 206, 219, 0.05)"}},children:(0,E.jsxs)(p.A,{sx:{display:"flex",alignItems:"flex-start",gap:1.5},children:[(0,E.jsx)(u.A,{checked:"pay-to-lease"===G,onChange:()=>Y("pay-to-lease"),sx:{color:"rgba(255, 255, 255, 0.7)","&.Mui-checked":{color:"#48CEDB"},p:0,mt:.5}}),(0,E.jsxs)(p.A,{children:[(0,E.jsx)(x.A,{variant:"body2",sx:{fontWeight:600,color:"white"},children:"Pay to Lease"}),(0,E.jsx)(x.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.7)",display:"block",mt:.5},children:"Pay to borrow and use the device temporarily. Device remains under Xtrapush ownership."})]})]})}),(0,E.jsx)(p.A,{sx:{p:1.5,border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:1,bgcolor:"rgba(255, 255, 255, 0.02)",opacity:.5,cursor:"not-allowed"},children:(0,E.jsxs)(p.A,{sx:{display:"flex",alignItems:"flex-start",gap:1.5},children:[(0,E.jsx)(u.A,{disabled:!0,sx:{color:"rgba(255, 255, 255, 0.3)","&.Mui-checked":{color:"white"},p:0,mt:.5}}),(0,E.jsxs)(p.A,{children:[(0,E.jsxs)(x.A,{variant:"body2",sx:{fontWeight:600,color:"rgba(255, 255, 255, 0.5)"},children:["Pay as You Go",(0,E.jsx)(x.A,{component:"span",sx:{ml:1,fontSize:"0.7rem",bgcolor:"rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.6)",px:1,py:.25,borderRadius:1,fontWeight:500},children:"COMING SOON"})]}),(0,E.jsx)(x.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.4)",display:"block",mt:.5},children:"Receive and use device as yours while paying installments."})]})]})})]})]}),"pay-to-own"===G&&(0,E.jsx)(p.A,{sx:{mb:2,p:2,bgcolor:"rgba(72, 206, 219, 0.1)",borderLeft:"3px solid rgba(72, 206, 219, 0.5)",borderRadius:1},children:(0,E.jsx)(x.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.9)"},children:"\u2713 You will receive the item after completing all installment payments. Full ownership transfers to you."})}),"pay-to-lease"===G&&(0,E.jsxs)(p.A,{sx:{mb:2,p:2,bgcolor:"rgba(72, 206, 219, 0.1)",borderLeft:"3px solid rgba(72, 206, 219, 0.5)",borderRadius:1},children:[(0,E.jsx)(x.A,{variant:"h6",sx:{color:"#48CEDB",mb:2,fontWeight:700},children:"Lease Details"}),(0,E.jsx)(x.A,{variant:"subtitle2",sx:{color:"white",mb:1},children:"How long do you intend to use it?"}),(0,E.jsxs)(p.A,{sx:{display:"flex",flexWrap:"wrap",gap:2,mb:2},children:[(0,E.jsx)(g.A,{variant:"days"===Q?"contained":"outlined",onClick:()=>V("days"),sx:{color:"white",borderColor:"#48CEDB",bgcolor:"days"===Q?"#48CEDB":"transparent"},children:"Days"}),(0,E.jsx)(g.A,{variant:"weeks"===Q?"contained":"outlined",onClick:()=>V("weeks"),sx:{color:"white",borderColor:"#48CEDB",bgcolor:"weeks"===Q?"#48CEDB":"transparent"},children:"Weeks"}),(0,E.jsx)(g.A,{variant:"months"===Q?"contained":"outlined",onClick:()=>V("months"),sx:{color:"white",borderColor:"#48CEDB",bgcolor:"months"===Q?"#48CEDB":"transparent"},children:"Months"}),(0,E.jsx)(g.A,{variant:"custom"===Q?"contained":"outlined",onClick:()=>re(!0),sx:{color:"white",borderColor:"#48CEDB",bgcolor:"custom"===Q?"#48CEDB":"transparent"},children:"Pick Dates"})]}),"custom"!==Q&&(0,E.jsxs)(p.A,{sx:{display:"flex",alignItems:"center",gap:2,mb:2,flexWrap:"wrap"},children:[(0,E.jsx)(b.A,{type:"number",label:Q.charAt(0).toUpperCase()+Q.slice(1),value:J,onChange:e=>$(Math.max(1,Number(e.target.value))),inputProps:{min:1},sx:{minWidth:120,bgcolor:"white",borderRadius:1,flex:"1 1 120px",mb:Oe?1:0},size:"small"}),(0,E.jsx)(x.A,{variant:"body2",sx:{color:"white",minWidth:60},children:Q})]}),(0,E.jsx)(a.$,{dateAdapter:n.h,children:(0,E.jsxs)(s.A,{open:ie,onClose:()=>re(!1),children:[(0,E.jsx)(c.A,{children:"Select Lease Dates"}),(0,E.jsxs)(d.A,{children:[(0,E.jsx)(l.l,{label:"Start Date",value:X,onChange:Z,renderInput:e=>(0,E.jsx)(b.A,(0,r.A)((0,r.A)({},e),{},{sx:{mb:2}}))}),(0,E.jsx)(l.l,{label:"End Date",value:ee,onChange:oe,renderInput:e=>(0,E.jsx)(b.A,(0,r.A)({},e))})]}),(0,E.jsxs)(v.A,{children:[(0,E.jsx)(g.A,{onClick:()=>re(!1),children:"Cancel"}),(0,E.jsx)(g.A,{onClick:()=>{V("custom"),re(!1)},disabled:!X||!ee,children:"Set"})]})]})}),(0,E.jsxs)(p.A,{sx:{mt:2,mb:2,display:"flex",flexDirection:Oe?"column":"row",gap:2,alignItems:Oe?"stretch":"flex-start"},children:[(0,E.jsx)(x.A,{variant:"subtitle2",sx:{color:"white",minWidth:180,mb:Oe?1:0},children:"What do you want to use it for?"}),(0,E.jsx)(b.A,{fullWidth:!0,multiline:!0,minRows:2,maxRows:4,value:te,onChange:e=>ae(e.target.value),placeholder:"Describe your intended use (e.g. work, school, travel, etc.)",sx:{bgcolor:"white",borderRadius:1,mb:Oe?2:0,flex:"2 1 240px"}})]}),(0,E.jsx)(p.A,{sx:{mt:2},children:(0,E.jsx)(x.A,{variant:"subtitle2",sx:{color:"white",mb:1},children:"Installment Policy Checklist"})})]}),"pay-as-you-go"===G&&(0,E.jsxs)(p.A,{sx:{mb:2,p:2,bgcolor:"rgba(33, 150, 243, 0.15)",borderLeft:"3px solid rgba(33, 150, 243, 0.7)",borderRadius:1},children:[(0,E.jsx)(x.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.9)",display:"block",mb:1,fontWeight:600},children:"\u2139\ufe0f Estimated Pricing"}),(0,E.jsx)(x.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.85)",display:"block",mb:1},children:"The pricing and payment amounts shown below are ESTIMATED based on initial information."}),(0,E.jsx)(x.A,{variant:"caption",sx:{color:"rgba(255, 200, 124, 0.95)",display:"block",mb:1},children:"Your actual payment plan will be finalized after our verification and assessment of your profile."}),(0,E.jsx)(x.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.8)"},children:"Final amounts may vary. We will review your application and confirm final details."})]}),"pay-as-you-go"===G&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(p.A,{sx:{mb:3,p:2,bgcolor:"rgba(33, 150, 243, 0.08)",borderRadius:1,border:"1px solid rgba(33, 150, 243, 0.3)"},children:[(0,E.jsx)(x.A,{variant:"subtitle2",sx:{color:"#48CEDB",mb:1.5,fontWeight:600},children:"\u2728 Why Choose Pay as You Go?"}),(0,E.jsxs)(p.A,{sx:{display:"grid",gridTemplateColumns:Oe?"1fr":"1fr 1fr",gap:1.5},children:[(0,E.jsxs)(p.A,{sx:{display:"flex",gap:1},children:[(0,E.jsx)(x.A,{sx:{color:"#48CEDB",fontWeight:700},children:"\ud83d\udcf1"}),(0,E.jsxs)(p.A,{children:[(0,E.jsx)(x.A,{variant:"caption",sx:{color:"white",fontWeight:600,display:"block"},children:"Get Device Today"}),(0,E.jsx)(x.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.7rem"},children:"Use immediately upon approval"})]})]}),(0,E.jsxs)(p.A,{sx:{display:"flex",gap:1},children:[(0,E.jsx)(x.A,{sx:{color:"#48CEDB",fontWeight:700},children:"\ud83d\udcb3"}),(0,E.jsxs)(p.A,{children:[(0,E.jsx)(x.A,{variant:"caption",sx:{color:"white",fontWeight:600,display:"block"},children:"Flexible Payments"}),(0,E.jsx)(x.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.7rem"},children:"Pay over 2, 4, or 6 weeks"})]})]}),(0,E.jsxs)(p.A,{sx:{display:"flex",gap:1},children:[(0,E.jsx)(x.A,{sx:{color:"#48CEDB",fontWeight:700},children:"\u26a1"}),(0,E.jsxs)(p.A,{children:[(0,E.jsx)(x.A,{variant:"caption",sx:{color:"white",fontWeight:600,display:"block"},children:"Quick Approval"}),(0,E.jsx)(x.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.7rem"},children:"Fast verification process"})]})]}),(0,E.jsxs)(p.A,{sx:{display:"flex",gap:1},children:[(0,E.jsx)(x.A,{sx:{color:"#48CEDB",fontWeight:700},children:"\ud83c\udf81"}),(0,E.jsxs)(p.A,{children:[(0,E.jsx)(x.A,{variant:"caption",sx:{color:"white",fontWeight:600,display:"block"},children:"Better Terms Later"}),(0,E.jsx)(x.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.7rem"},children:"Unlock upgrades after completion"})]})]})]})]}),(0,E.jsxs)(p.A,{sx:{mb:3,p:2,bgcolor:"rgba(255, 152, 0, 0.08)",borderRadius:1,border:"1px solid rgba(255, 152, 0, 0.3)"},children:[(0,E.jsx)(x.A,{variant:"subtitle2",sx:{color:"rgba(255, 152, 0, 0.95)",mb:1,fontWeight:600},children:"\ud83d\udd0d Verification & Assessment"}),(0,E.jsx)(x.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.85)",display:"block",mb:.8},children:"After you submit this request, our team will:"}),(0,E.jsxs)(p.A,{sx:{ml:1.5},children:[(0,E.jsx)(x.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.8)",display:"block",mb:.5},children:"\u2713 Verify your identity and contact details"}),(0,E.jsx)(x.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.8)",display:"block",mb:.5},children:"\u2713 Assess your payment eligibility"}),(0,E.jsx)(x.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.8)",display:"block",mb:.5},children:"\u2713 Confirm your final payment schedule"}),(0,E.jsx)(x.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.8)"},children:"\u2713 Arrange device delivery/pickup"})]}),(0,E.jsx)(x.A,{variant:"caption",sx:{color:"rgba(255, 152, 0, 0.85)",display:"block",mt:1,fontWeight:600},children:"Approval typically takes 24-48 hours"})]}),(0,E.jsxs)(p.A,{sx:{mb:2,p:2,bgcolor:"rgba(76, 175, 80, 0.05)",borderRadius:1,border:"1px solid rgba(76, 175, 80, 0.2)"},children:[(0,E.jsx)(x.A,{variant:"subtitle2",sx:{color:"#48CEDB",mb:1.5,fontWeight:600},children:"\ud83d\udcb0 Estimated Payment Breakdown"}),(0,E.jsxs)(p.A,{sx:{display:"grid",gridTemplateColumns:Oe?"1fr":"1fr 1fr",gap:2},children:[(0,E.jsxs)(p.A,{children:[(0,E.jsx)(x.A,{variant:"caption",sx:{opacity:.8,display:"block"},children:"Base price"}),(0,E.jsx)(x.A,{variant:"body1",sx:{color:"#48CEDB",fontWeight:600},children:Ge(He)})]}),(0,E.jsxs)(p.A,{children:[(0,E.jsxs)(x.A,{variant:"caption",sx:{opacity:.8,display:"block"},children:["Adjusted total ",io>0?"(+".concat(io,"%)"):""]}),(0,E.jsx)(x.A,{variant:"body1",sx:{color:"#48CEDB",fontWeight:600},children:Ge(eo)})]}),(0,E.jsxs)(p.A,{children:[(0,E.jsxs)(x.A,{variant:"caption",sx:{opacity:.8,display:"block"},children:["Deposit (",oo,"%)"]}),(0,E.jsx)(x.A,{variant:"body1",sx:{color:"#48CEDB",fontWeight:600},children:Ge($e)})]}),(0,E.jsxs)(p.A,{children:[(0,E.jsx)(x.A,{variant:"caption",sx:{opacity:.8,display:"block"},children:"Remaining balance"}),(0,E.jsx)(x.A,{variant:"body1",sx:{color:"#48CEDB",fontWeight:600},children:Ge(Xe)})]})]}),(0,E.jsx)(x.A,{variant:"caption",sx:{color:"rgba(255, 200, 124, 0.9)",display:"block",mt:1.5,fontWeight:600},children:"* All amounts are estimated and subject to change after assessment"})]})]}),"pay-to-own"===G&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(p.A,{sx:{display:"flex",gap:Oe?1.5:2,mb:2,alignItems:"center",flexDirection:Oe?"column":"row",flexWrap:"wrap"},children:[(0,E.jsx)(x.A,{variant:"body2",sx:{color:"white"},children:"Weeks"}),(0,E.jsxs)(m.A,{value:R,exclusive:!0,onChange:(e,o)=>{null!==o&&N(o)},sx:{width:"100%","& .MuiToggleButton-root":{flex:1,color:"white",borderColor:"rgba(255, 255, 255, 0.3)","&.Mui-selected":{backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white"},"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}}},children:[(0,E.jsx)(y.A,{value:2,children:"14 days"}),(0,E.jsx)(y.A,{value:4,children:"28 days"}),(0,E.jsx)(y.A,{value:6,children:"42 days"})]})]}),(0,E.jsxs)(p.A,{sx:{display:"grid",gridTemplateColumns:Oe?"1fr":"1fr 1fr",gap:2,mb:2},children:[(0,E.jsxs)(p.A,{children:[(0,E.jsx)(x.A,{variant:"caption",sx:{opacity:.8},children:"Base price"}),(0,E.jsx)(x.A,{variant:"body1",children:Ge(He)})]}),(0,E.jsxs)(p.A,{children:[(0,E.jsxs)(x.A,{variant:"caption",sx:{opacity:.8},children:["Adjusted total ",io>0?"(+".concat(io,"%)"):""]}),(0,E.jsx)(x.A,{variant:"body1",children:Ge(eo)})]}),(0,E.jsxs)(p.A,{children:[(0,E.jsxs)(x.A,{variant:"caption",sx:{opacity:.8},children:["Deposit (",oo,"% paying)"]}),(0,E.jsx)(x.A,{variant:"body1",children:Ge($e)})]}),(0,E.jsxs)(p.A,{children:[(0,E.jsx)(x.A,{variant:"caption",sx:{opacity:.8},children:"Remaining"}),(0,E.jsx)(x.A,{variant:"body1",children:Ge(Xe)})]})]}),"pay-to-lease"===G&&(0,E.jsxs)(p.A,{sx:{mb:2,p:2,bgcolor:"rgba(255, 152, 0, 0.08)",borderRadius:1,border:"1px solid rgba(255, 152, 0, 0.3)"},children:[(0,E.jsx)(x.A,{variant:"subtitle2",sx:{color:"rgba(255, 152, 0, 0.95)",mb:1,fontWeight:600},children:"\ud83d\udccb Lease Terms"}),(0,E.jsx)(x.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.85)",display:"block",mb:.5},children:"\u2022 Device must be returned in good condition after lease period"}),(0,E.jsx)(x.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.85)",display:"block",mb:.5},children:"\u2022 Option to purchase at end of lease (Pay to Own conversion)"}),(0,E.jsx)(x.A,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.85)",display:"block"},children:"\u2022 Early termination fees may apply"})]})]}),"pay-as-you-go"===G&&(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)(p.A,{sx:{display:"flex",gap:Oe?1.5:2,mb:2,alignItems:"center",flexDirection:Oe?"column":"row",flexWrap:"wrap"},children:[(0,E.jsx)(x.A,{variant:"body2",sx:{color:"white"},children:"Payment Period"}),(0,E.jsxs)(m.A,{value:R,exclusive:!0,onChange:(e,o)=>{null!==o&&N(o)},sx:{width:"100%","& .MuiToggleButton-root":{flex:1,color:"white",borderColor:"rgba(255, 255, 255, 0.3)","&.Mui-selected":{backgroundColor:"rgba(255, 255, 255, 0.2)",color:"white"},"&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"}}},children:[(0,E.jsx)(y.A,{value:2,children:"14 days"}),(0,E.jsx)(y.A,{value:4,children:"28 days"}),(0,E.jsx)(y.A,{value:6,children:"42 days"})]})]})}),z?(0,E.jsx)(x.A,{color:"error",variant:"body2",sx:{mt:1},children:z}):null,(0,E.jsxs)(p.A,{sx:{mt:2,p:2,borderTop:"1px solid rgba(255,255,255,0.2)"},children:[(0,E.jsxs)(p.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:1,flexDirection:Oe?"column":"row"},children:[(0,E.jsxs)(p.A,{children:[(0,E.jsx)(x.A,{variant:"body2",sx:{color:"white",mb:.5},children:"Do you accept the Installment Policy?"}),(0,E.jsxs)(m.A,{exclusive:!0,value:qe?"yes":"no",onChange:(e,o)=>{o&&Fe("yes"===o)},"aria-label":"policy acceptance",sx:{width:Oe?"100%":"auto","& .MuiToggleButton-root":(0,r.A)({color:"white",borderColor:"rgba(255,255,255,0.35)",px:1.5},Oe?{flex:1}:{}),"& .Mui-selected":{bgcolor:"rgba(72, 206, 219, 0.3)",color:"white"}},children:[(0,E.jsx)(y.A,{value:"yes","aria-label":"accept yes",children:"Yes"}),(0,E.jsx)(y.A,{value:"no","aria-label":"accept no",children:"No"})]})]}),(0,E.jsx)(g.A,{onClick:()=>ce("/installment-policy"),variant:"text",sx:{color:"#48CEDB",textDecoration:"underline"},children:"Read Policy guide"})]}),!qe&&(0,E.jsx)(x.A,{variant:"caption",sx:{mt:1,color:"rgba(255,255,255,0.8)"},children:"You must select Yes to proceed."})]})]}),(0,E.jsxs)(v.A,{sx:{p:2,display:"flex",flexDirection:Oe?"column":"row",gap:1.5},children:[(0,E.jsx)(g.A,{onClick:_,variant:"contained",disabled:L,sx:{bgcolor:"#000",color:"white","&:hover":{bgcolor:"#111"},width:Oe?"100%":"auto"},children:"Cancel"}),(0,E.jsx)(g.A,{variant:"contained",onClick:()=>{if("pay-to-lease"===G)return Q&&("custom"===Q||J)&&("custom"!==Q||X&&ee)?te.trim()?qe?(T(!0),void setTimeout(()=>{T(!1),alert("Your lease request has been submitted for verification and eligibility assessment."),_()},1500)):void q("Please accept the Installment Policy."):void q("Please describe your intended use."):void q("Please select a valid lease duration.");qe?(async()=>{if(!qe)return void q("Please read and accept the Installment Policy before proceeding.");if(!le||!le.uid)return void O(!0);const e=((null===le||void 0===le?void 0:le.phone)||"").trim();if(/^\+265\d{9}$/.test(e))try{var o,i,t;T(!0),q("");const e={enabled:!0,planWeeks:R,depositAmount:Math.round($e),remainingBalance:Math.round(Xe),weeklyAmount:Math.round(Ze),totalPrice:Math.round(eo),paymentType:"installment_deposit",planType:G},l=[(0,r.A)((0,r.A)((0,r.A)((0,r.A)({id:null===M||void 0===M?void 0:M.id,name:_e,price:Math.round(He),quantity:1,image:Ee||(null===M||void 0===M?void 0:M.image)||null},je?{color:je}:{}),ke?{storage:ke}:{}),Se?{condition:Se}:{}),We?{variantId:We}:{})],s={customerEmail:I||null,successUrl:"https://itsxtrapush.com/payment/success",cancelUrl:"https://itsxtrapush.com/payment/cancel",installmentPlan:e,currency:pe};let c;if(c=se?await k.a5.createCheckoutSession(l,s):await k.a5.createSquareCheckout((0,r.A)({items:l},s)),null!==(o=c)&&void 0!==o&&o.success&&null!==(i=c)&&void 0!==i&&i.url){try{localStorage.setItem("xp_lastCheckout",JSON.stringify({items:l,installmentPlan:e,customerEmail:I||null,provider:de,currency:pe}))}catch(n){}window.location.href=c.url}else if(null!==(t=c)&&void 0!==t&&t.url){try{localStorage.setItem("xp_lastCheckout",JSON.stringify({items:l,installmentPlan:e,customerEmail:I||null,provider:de,currency:pe}))}catch(n){}window.location.href=c.url}else{var a;q((null===(a=c)||void 0===a?void 0:a.error)||"Failed to create checkout session")}}catch(s){var l;console.error("Installment checkout failed:",s);const e=null===s||void 0===s||null===(l=s.response)||void 0===l?void 0:l.data;q((null===e||void 0===e?void 0:e.details)||(null===e||void 0===e?void 0:e.error)||(null===s||void 0===s?void 0:s.message)||"Unexpected error")}finally{T(!1)}else{q("Please add an active phone number (+265 followed by 9 digits) in Profile Settings before starting an installment plan.");try{ce("/dashboard/settings")}catch(n){}}})():q("Please read and accept the Installment Policy before proceeding.")},disabled:L||!qe||"pay-to-lease"!==G&&(eo<=0||$e<=0),sx:{bgcolor:"#000",color:"white","&:hover":{bgcolor:"#111"},width:Oe?"100%":"auto"},children:"Proceed"})]}),(0,E.jsx)(B.A,{open:F,onClose:()=>O(!1),title:"Sign In Required",message:"Please sign in to start an installment plan. Your installment details will be saved for you.",actionLabel:"Sign In",onAction:()=>ce("/signin")})]}):null}},31810(e,o,i){i.d(o,{j:()=>r});const r=[{id:"lilongwe-service",name:"Lilongwe Service Area",address:"Lilongwe, Malawi (Mobile Service)",hours:["Monday - Saturday: 9:00 AM - 5:00 PM"],places:{google:"https://www.google.com/maps/search/?api=1&query=Lilongwe+Malawi"},region:"Malawi",emoji:"\ud83c\uddf2\ud83c\uddfc"},{id:"northamptonshire-service",name:"Northamptonshire Service Area",address:"Northamptonshire, UK (Mobile Service)",hours:["Monday - Saturday: 9:00 AM - 5:00 PM"],places:{google:"https://www.google.com/maps/search/?api=1&query=Northamptonshire+UK"},region:"UK",emoji:"\ud83c\uddec\ud83c\udde7"}]}}]);