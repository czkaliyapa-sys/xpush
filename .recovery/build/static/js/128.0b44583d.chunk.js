"use strict";(self.webpackChunkitsxtrapush=self.webpackChunkitsxtrapush||[]).push([[128],{3128(e,t,a){a.r(t),a.d(t,{default:()=>ge});var o=a(9950),i=a(55547),n=a(89379),r=a(80045),s=a(65698),l=a(87358),d=a(98519),c=a(96195),p=a(48802),h=a(54212),x=a(43396);function g(e){return(0,x.Ay)("MuiCardHeader",e)}const u=(0,h.A)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var m=a(61670),b=a(44414);const v=["action","avatar","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps","slots","slotProps"],y=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>[{["& .".concat(u.title)]:t.title},{["& .".concat(u.subheader)]:t.subheader},t.root]})({display:"flex",alignItems:"center",padding:16}),A=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Avatar"})({display:"flex",flex:"0 0 auto",marginRight:16}),f=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Action"})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),w=(0,c.Ay)("div",{name:"MuiCardHeader",slot:"Content"})({flex:"1 1 auto",[".".concat(l.A.root,":where(& .").concat(u.title,")")]:{display:"block"},[".".concat(l.A.root,":where(& .").concat(u.subheader,")")]:{display:"block"}}),j=o.forwardRef(function(e,t){const a=(0,p.b)({props:e,name:"MuiCardHeader"}),{action:o,avatar:i,component:l="div",disableTypography:c=!1,subheader:h,subheaderTypographyProps:x,title:u,titleTypographyProps:j,slots:M={},slotProps:S={}}=a,I=(0,r.A)(a,v),C=(0,n.A)((0,n.A)({},a),{},{component:l,disableTypography:c}),T=(e=>{const{classes:t}=e;return(0,s.A)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},g,t)})(C),k={slots:M,slotProps:(0,n.A)({title:j,subheader:x},S)};let D=u;const[N,P]=(0,m.A)("title",{className:T.title,elementType:d.A,externalForwardedProps:k,ownerState:C,additionalProps:{variant:i?"body2":"h5",component:"span"}});null==D||D.type===d.A||c||(D=(0,b.jsx)(N,(0,n.A)((0,n.A)({},P),{},{children:D})));let Y=h;const[W,z]=(0,m.A)("subheader",{className:T.subheader,elementType:d.A,externalForwardedProps:k,ownerState:C,additionalProps:{variant:i?"body2":"body1",color:"textSecondary",component:"span"}});null==Y||Y.type===d.A||c||(Y=(0,b.jsx)(W,(0,n.A)((0,n.A)({},z),{},{children:Y})));const[L,H]=(0,m.A)("root",{ref:t,className:T.root,elementType:y,externalForwardedProps:(0,n.A)((0,n.A)((0,n.A)({},k),I),{},{component:l}),ownerState:C}),[U,Z]=(0,m.A)("avatar",{className:T.avatar,elementType:A,externalForwardedProps:k,ownerState:C}),[B,G]=(0,m.A)("content",{className:T.content,elementType:w,externalForwardedProps:k,ownerState:C}),[R,V]=(0,m.A)("action",{className:T.action,elementType:f,externalForwardedProps:k,ownerState:C});return(0,b.jsxs)(L,(0,n.A)((0,n.A)({},H),{},{children:[i&&(0,b.jsx)(U,(0,n.A)((0,n.A)({},Z),{},{children:i})),(0,b.jsxs)(B,(0,n.A)((0,n.A)({},G),{},{children:[D,Y]})),o&&(0,b.jsx)(R,(0,n.A)((0,n.A)({},V),{},{children:o}))]}))});var M=a(52036),S=a(72004);function I(e){return(0,x.Ay)("MuiCardActions",e)}(0,h.A)("MuiCardActions",["root","spacing"]);const C=["disableSpacing","className"],T=(0,c.Ay)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,!a.disableSpacing&&t.spacing]}})({display:"flex",alignItems:"center",padding:8,variants:[{props:{disableSpacing:!1},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),k=o.forwardRef(function(e,t){const a=(0,p.b)({props:e,name:"MuiCardActions"}),{disableSpacing:o=!1,className:i}=a,l=(0,r.A)(a,C),d=(0,n.A)((0,n.A)({},a),{},{disableSpacing:o}),c=(e=>{const{classes:t,disableSpacing:a}=e,o={root:["root",!a&&"spacing"]};return(0,s.A)(o,I,t)})(d);return(0,b.jsx)(T,(0,n.A)({className:(0,S.A)(c.root,i),ownerState:d,ref:t},l))});var D=a(66424),N=a(66615),P=a(80218),Y=a(6732),W=a(65250),z=a(47371),L=a(82503),H=a(24514),U=a(86057),Z=a(18069),B=a(69335),G=a(27321),R=a(24350),V=a(47666);const F=(0,V.A)((0,b.jsx)("path",{d:"M11 9h2V6h3V4h-3V1h-2v3H8v2h3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2m10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2m-9.83-3.25.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4h-.01l-1.1 2-2.76 5H8.53l-.13-.27L6.16 6l-.95-2-.94-2H1v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.13 0-.25-.11-.25-.25"}),"AddShoppingCart"),E=e=>{let{onAddToCart:t,addDisabled:a=!1,priceLabel:o=""}=e;return(0,b.jsxs)(G.A,{sx:{display:"flex",alignItems:"stretch",width:"100%",borderRadius:"12px",overflow:"hidden",background:"linear-gradient(180deg, #0b1220 0%, #050a14 100%)",boxShadow:"0 10px 24px rgba(0, 0, 0, 0.45), inset 0 1px 0 rgba(255, 255, 255, 0.05)",transition:"transform 160ms ease, box-shadow 160ms ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 14px 28px rgba(0, 0, 0, 0.55), inset 0 1px 0 rgba(255, 255, 255, 0.06)"},"&:active":{transform:"translateY(-1px)",boxShadow:"0 12px 26px rgba(0, 0, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.05)"}},children:[(0,b.jsx)(R.A,{onClick:t,disabled:a,sx:{flex:0,minWidth:44,display:"flex",alignItems:"center",justifyContent:"center",gap:0,px:1.5,py:1.25,color:a?"rgba(255,255,255,0.6)":"white",transition:"background-color 160ms ease","&:hover":{backgroundColor:a?"transparent":"rgba(59, 130, 246, 0.15)"},"&:active":{backgroundColor:a?"transparent":"rgba(59, 130, 246, 0.25)"},opacity:a?.8:1},children:(0,b.jsx)(F,{sx:{color:a?"rgba(255,255,255,0.6)":"white"},"aria-label":"Add to cart"})}),(0,b.jsx)(G.A,{sx:{width:"1px",backgroundColor:"rgba(255, 255, 255, 0.15)"}}),(0,b.jsx)(G.A,{sx:{flex:1,minWidth:0,display:"flex",alignItems:"center",justifyContent:"center",gap:1,px:2.5,py:1.25,color:a?"rgba(255,255,255,0.6)":"white",opacity:a?.8:1},children:o&&(0,b.jsx)(d.A,{variant:"body2",fontWeight:700,sx:{whiteSpace:"nowrap"},children:o})})]})};var _=a(72828);const O=(0,V.A)((0,b.jsx)("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05"}),"FavoriteBorder");var Q=a(54048),X=a(43405);const J=(0,V.A)((0,b.jsx)("path",{d:"M19 14V6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2m-9-1c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m13-6v11c0 1.1-.9 2-2 2H4v-2h17V7z"}),"Payments"),K=(0,V.A)((0,b.jsx)("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V10h14zM9 14H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2zm-8 4H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2z"}),"CalendarMonth");var $=a(15320),q=a(4143),ee=a(9940),te=a(79697),ae=a(87209),oe=a(65812),ie=a(85935),ne=a(56690),re=a(6503),se=a(4159),le=a.n(se),de=a(31810),ce=a(19181);const pe=e=>{var t;let{open:a,onClose:i,gadgetId:n,gadgetName:r,gadgetImage:s}=e;const[l,c]=(0,o.useState)(le()().add(1,"day").format("YYYY-MM-DD")),[p,h]=(0,o.useState)(""),[x,g]=(0,o.useState)([]),[u,m]=(0,o.useState)((null===(t=de.j[0])||void 0===t?void 0:t.id)||""),[v,y]=(0,o.useState)(!1),[A,f]=(0,o.useState)(!1),[w,j]=(0,o.useState)(null),[M,S]=(0,o.useState)(!1),[I,C]=(0,o.useState)(0),[T,k]=(0,o.useState)(!1),{isAuthenticated:D,user:H}=(0,X.A)(),Z=(0,o.useCallback)(async()=>{try{const e=await ce.lW.getUserActive(null===H||void 0===H?void 0:H.id);null!==e&&void 0!==e&&e.success&&(k(e.hasActive),e.hasActive&&j("You already have an active appointment. Please complete or cancel it first."))}catch(e){console.error("Error checking active appointments:",e)}},[null===H||void 0===H?void 0:H.id]);(0,o.useEffect)(()=>{D&&null!==H&&void 0!==H&&H.id&&a&&Z()},[D,null===H||void 0===H?void 0:H.id,a,Z]),(0,o.useEffect)(()=>{if(!l||!u)return;(async()=>{f(!0),j(null);try{const e=await ce.lW.getAvailableSlots(l,u);if(null!==e&&void 0!==e&&e.success){const t=e.slots||[];g(t);0===le()(l).day()?j("Appointments are not available on Sundays. Please select a different date."):0===t.length&&j("No available slots for this date. Please choose another date.")}else j((null===e||void 0===e?void 0:e.message)||"Failed to load available time slots");h("")}catch(e){console.error("Error fetching available slots:",e),j("Failed to load available time slots. Please try again.")}finally{f(!1)}})()},[l,u]);const B=le()().add(1,"day").format("YYYY-MM-DD"),R=le()().add(90,"day").format("YYYY-MM-DD"),V=le()(l),F=0===V.day();return(0,o.useEffect)(()=>("undefined"!==typeof window&&(window.__dialogOpen=a),()=>{"undefined"!==typeof window&&(window.__dialogOpen=!1)}),[a]),a?(0,b.jsxs)(P.A,{open:a,onClose:(e,t)=>{v?null!==e&&void 0!==e&&e.preventDefault&&e.preventDefault():i()},maxWidth:"sm",fullWidth:!0,disableEscapeKeyDown:v,children:[(0,b.jsxs)(Y.A,{sx:{fontWeight:"bold",color:"#48CEDB",display:"flex",alignItems:"center",gap:1},children:["\ud83d\udcc5 Schedule Viewing - ",r]}),(0,b.jsxs)(W.A,{sx:{mt:1},children:[T&&(0,b.jsx)(U.A,{severity:"warning",sx:{mb:2},children:"You have an active appointment. Complete or cancel it before booking another viewing."}),w&&(0,b.jsx)(U.A,{severity:"error",sx:{mb:2},onClose:()=>j(null),children:w}),M&&(0,b.jsx)(U.A,{severity:"success",sx:{mb:2},children:"\u2705 Your appointment has been booked successfully! Check your email for confirmation."}),(0,b.jsxs)(q.A,{activeStep:I,sx:{mb:2},children:[(0,b.jsx)(ee.A,{children:(0,b.jsx)(te.A,{children:"Select Date"})}),(0,b.jsx)(ee.A,{children:(0,b.jsx)(te.A,{children:"Select Time"})})]}),(0,b.jsxs)(G.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,b.jsx)(L.A,{label:"Select Date",type:"date",value:l,onChange:e=>{c(e.target.value),C(0)},inputProps:{min:B,max:R},fullWidth:!0,disabled:T,helperText:"Business hours: Monday-Saturday, 9 AM-5 PM"}),(0,b.jsxs)(ae.A,{fullWidth:!0,disabled:T,children:[(0,b.jsx)(oe.A,{id:"location-label",children:"Meeting Location"}),(0,b.jsx)(ie.A,{labelId:"location-label",value:u,label:"Meeting Location",onChange:e=>m(e.target.value),children:de.j.map(e=>(0,b.jsxs)(ne.A,{value:e.id,children:[e.emoji," ",e.name]},e.id))})]}),(0,b.jsxs)(G.A,{children:[(0,b.jsx)(d.A,{variant:"subtitle2",sx:{mb:1,fontWeight:"bold"},children:V.format("dddd, MMMM D, YYYY")}),F&&(0,b.jsx)(U.A,{severity:"info",sx:{mb:1},children:"\u26a0\ufe0f Appointments not available on Sundays"}),A?(0,b.jsx)(G.A,{sx:{display:"flex",justifyContent:"center",py:2},children:(0,b.jsx)(re.A,{size:24})}):!F&&x.length>0?(0,b.jsxs)(ae.A,{fullWidth:!0,children:[(0,b.jsx)(oe.A,{id:"time-slot-label",children:"Select Time"}),(0,b.jsx)(ie.A,{labelId:"time-slot-label",value:p,label:"Select Time",onChange:e=>{h(e.target.value),C(1)},disabled:T,children:x.map(e=>(0,b.jsx)(ne.A,{value:e,children:le()("2000-01-01 ".concat(e)).format("h:mm A")},e))})]}):!F&&(0,b.jsx)(U.A,{severity:"info",children:"No available slots for this date. Please try another date."})]})]})]}),(0,b.jsxs)(z.A,{sx:{p:2,gap:1},children:[(0,b.jsx)(N.A,{onClick:i,color:"primary",children:"Cancel"}),(0,b.jsx)(N.A,{onClick:async()=>{if(D)if(T)j("You already have an active appointment.");else if(p){y(!0),j(null);try{var e;const t=(null===(e=de.j.find(e=>e.id===u))||void 0===e?void 0:e.name)||"",a={gadgetId:n,gadgetName:r,appointmentDate:l,appointmentTime:p,locationId:u,locationName:t,userId:null===H||void 0===H?void 0:H.id,userName:(null===H||void 0===H?void 0:H.displayName)||(null===H||void 0===H?void 0:H.name)||(null===H||void 0===H?void 0:H.email)||"Customer",userEmail:(null===H||void 0===H?void 0:H.email)||""},o=await ce.lW.create(a);if(null===o||void 0===o||!o.success)throw new Error((null===o||void 0===o?void 0:o.error)||"Failed to create appointment");S(!0),j(null),setTimeout(()=>{h(""),c(le()().add(1,"day").format("YYYY-MM-DD")),C(0),S(!1),k(!0),i()},2e3)}catch(t){console.error("Error booking appointment:",t),j((null===t||void 0===t?void 0:t.message)||"Failed to book appointment. Please try again.")}finally{y(!1)}}else j("Please select a time slot");else j("Please sign in to book an appointment")},color:"success",variant:"contained",disabled:!p||v||T,children:v?(0,b.jsx)(re.A,{size:20}):"\u2713 Book Viewing"})]})]}):null};var he=a(29040),xe=a(38006);const ge=e=>{var t;let{id:a,title:n,date:r,image:s,number:l,price:c,priceGbp:p,priceMwk:h,monthlyPrice:x,monthlyPriceGbp:g,description:u,brand:m,condition:v,category:y}=e;const[A,f]=o.useState(!1),[w,S]=o.useState(!1),[I,C]=o.useState(""),[T,V]=o.useState(!1),[F,q]=o.useState(""),[ee,te]=o.useState(!1),[ae,oe]=o.useState(!0),[ie,ne]=o.useState(!1),{addToCart:re}=(0,Z._$)(),{toggle:se,isWished:le}=(0,Q.n)(),{user:de}=(0,X.A)(),{currency:ce,isInMalawi:ge,formatLocalPrice:ue}=(0,B.e)(),[me,be]=o.useState(!1),ve=o.useMemo(()=>{if(ge){const e=null!==h&&void 0!==h?h:c,t="string"===typeof e?parseFloat(e.replace(/[^0-9.]/g,"")):Number(e);return Number.isFinite(t)?"MWK ".concat(Math.round(t).toLocaleString("en-US")):"MWK \u2014"}return ue(null!==p&&void 0!==p?p:c)},[c,p,h,ce,ge,ue]);o.useEffect(()=>{C("".concat(window.location.origin,"/gadgets/").concat(a))},[a]);o.useCallback(e=>{if(!e)return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjZjNmNGY2Ii8+CjxwYXRoIGQ9Ik0xMDAgNzBjLTguMjg0IDAtMTUgNi43MTYtMTUgMTVzNi43MTYgMTUgMTUgMTUgMTUtNi43MTYgMTUtMTUtNi43MTYtMTUtMTUtMTV6bTAgMjBjLTIuNzYxIDAtNS0yLjIzOS01LTVzMi4yMzktNSA1LTUgNSAyLjIzOSA1IDUtMi4yMzkgNS01IDV6IiBmaWxsPSIjOWNhM2FmIi8+Cjx0ZXh0IHg9IjEwMCIgeT0iMTYwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjNjY3Mzg1IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiPkltYWdlIE5vdCBGb3VuZDwvdGV4dD4KPC9zdmc+";try{const t=/^https?:\/\//.test(e),a="https://sparkle-pro.co.uk/api/images";let o=e.trim();if(o=o.replace(/\s+/g,"").replace(/^\.\//,"").replace(/^\//,""),o=o.replace(/iphon[\-_.]?13pro/i,"iphone-13pro"),o=o.replace(/galaxys23ultra/i,"galaxy-s23ultra"),t){const e=new URL(o);if(/\/api\/images\//.test(e.pathname))return"https://sparkle-pro.co.uk".concat(e.pathname);const t=e.pathname.split("/").filter(Boolean).pop();return"".concat(a,"/").concat(t)}return/^api\/images\//.test(o)?"https://sparkle-pro.co.uk/".concat(o):"".concat(a,"/").concat(o)}catch(t){return e}},[]);const ye=e=>{if(e.preventDefault(),e.stopPropagation(),0!==l){f(!0);try{const e=String(y||"").toLowerCase(),o=["smartphone","phone","tablet","laptop"].includes(e)?"32GB":void 0,i=Number(ge?null!==h&&void 0!==h?h:c:null!==p&&void 0!==p?p:c);re({id:a,title:n,price:i,priceGbp:Number(null!==p&&void 0!==p?p:c),priceMwk:Number(null!==h&&void 0!==h?h:c),image:s,number:l,brand:m,condition:v||"new",storage:o,category:y,description:u||""});const r="undefined"!==typeof window?localStorage.getItem("xp_analytics_sid"):null;if(r)try{(0,he.yM)(r,"add_to_cart",{id:a,title:n,price:i,brand:m,category:y})}catch(t){}q("Item added to cart!"),V(!0)}catch(o){console.error("Add to cart error:",o)}finally{f(!1)}}},Ae="number"===typeof l&&Number.isFinite(l)?l:0,fe=0===Ae;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(xe.P.div,{layout:!0,initial:{opacity:0,y:16,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-8,scale:.98},transition:{duration:.35,ease:[.22,1,.36,1]},children:(0,b.jsxs)(i.A,{sx:{width:{xs:"100%",sm:"auto"},maxWidth:{xs:"none",sm:380,md:320},mx:{xs:"auto",sm:0},backgroundColor:"#1565c0",borderRadius:"30px",color:"white",display:"flex",flexDirection:"column",alignSelf:"flex-start",padding:"20px",transition:"all 0.3s ease-in-out","&:hover":{boxShadow:"2px 2px 5px #0c3266, -2px -2px 5px #1a5bbf",transform:"scale(1.05)"}},children:[(0,b.jsx)(j,{action:(0,b.jsx)(D.A,{"aria-label":le(String(a))?"Remove from wishlist":"Add to wishlist",onClick:e=>{e.preventDefault(),e.stopPropagation();const t=String(a),o=le(t);se(t);const i="undefined"!==typeof window?localStorage.getItem("xp_analytics_sid"):null;if(i)try{(0,he.yM)(i,o?"wishlist_remove":"wishlist_add",{id:a,title:n,brand:m,category:y})}catch(r){}q(o?"Removed from wishlist!":"Added to wishlist!"),V(!0)},sx:{color:"white"},children:le(String(a))?(0,b.jsx)(_.A,{color:"error"}):(0,b.jsx)(O,{})}),title:(0,b.jsx)(d.A,{variant:"h6",sx:{color:"white",fontWeight:700,textAlign:"center",display:"block"},children:n}),subheader:(0,b.jsx)("span",{style:{color:"white",opacity:.9,fontSize:"0.9rem",fontWeight:600,display:"block",textAlign:"center"},children:fe?"Out of Stock \xb7 Coming Soon":Ae<20?"Available now \xb7 Limited Amount":"Available now"})}),(0,b.jsxs)("div",{style:{width:"100%",height:"240px",display:"flex",justifyContent:"center",alignItems:"center",position:"relative",overflow:"hidden",borderRadius:"15px",backgroundColor:"rgba(255, 255, 255, 0.1)"},children:[ae&&!ee&&(0,b.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"white",fontSize:"14px"},children:"Loading..."}),(0,b.jsx)(xe.P.img,{layoutId:"gadget-media-".concat(a),src:ee?"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjZjNmNGY2Ii8+CjxwYXRoIGQ9Ik0xMDAgNzBjLTguMjg0IDAtMTUgNi43MTYtMTUgMTVzNi43MTYgMTUgMTUgMTUgMTUtNi43MTYgMTUtMTUtNi43MTYtMTUtMTUtMTV6bTAgMjBjLTIuNzYxIDAtNS0yLjIzOS01LTVzMi4yMzktNSA1LTUgNSAyLjIzOSA1IDUtMi4yMzkgNS01IDV6IiBmaWxsPSIjOWNhM2FmIi8+Cjx0ZXh0IHg9IjEwMCIgeT0iMTYwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjNjY3Mzg1IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiPkltYWdlIE5vdCBGb3VuZDwvdGV4dD4KPC9zdmc+":s,style:{width:"95%",height:"auto",maxHeight:"100%",display:ae&&!ee?"none":"block",objectFit:"contain",opacity:ee?.7:1},alt:n,onError:()=>{te(!0),oe(!1)},onLoad:()=>{te(!1),oe(!1)}}),ee&&(0,b.jsx)("div",{style:{position:"absolute",bottom:"8px",right:"8px",backgroundColor:"rgba(255, 165, 0, 0.8)",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:"bold"},children:"Image Unavailable"})]}),(0,b.jsx)(M.A,{children:u&&(0,b.jsx)(d.A,{variant:"body2",sx:{mt:1,opacity:.9,fontSize:"0.9rem"},children:u.length>80?"".concat(u.substring(0,80),"..."):u})}),(0,b.jsxs)(k,{disableSpacing:!0,sx:{flexDirection:"column",gap:1,alignItems:"stretch"},children:[(()=>{const e=0===Ae?"Coming Soon":A?"Adding...":"From ".concat(ve);return(0,b.jsx)(E,{onAddToCart:ye,addDisabled:A||fe,priceLabel:e})})(),(0,b.jsx)(G.A,{sx:{width:"100%",borderRadius:"12px",overflow:"hidden",background:"linear-gradient(180deg, #0b1220 0%, #050a14 100%)",boxShadow:"0 10px 24px rgba(0, 0, 0, 0.45), inset 0 1px 0 rgba(255, 255, 255, 0.05)",transition:"transform 160ms ease, box-shadow 160ms ease",display:"flex",alignItems:"stretch","&:hover":{transform:"translateY(-2px)",boxShadow:"0 14px 28px rgba(0, 0, 0, 0.55), inset 0 1px 0 rgba(255, 255, 255, 0.06)"},"&:active":{transform:"translateY(-1px)",boxShadow:"0 12px 26px rgba(0, 0, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.05)"}},children:(0,b.jsxs)(R.A,{onClick:e=>{e.preventDefault(),e.stopPropagation(),be(!0)},onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},disabled:fe,sx:{flex:1,minWidth:0,display:"flex",alignItems:"center",justifyContent:"center",gap:1,px:{xs:3,sm:2.75},py:{xs:1.75,sm:1.35},color:fe?"rgba(255,255,255,0.6)":"white",transition:"background-color 160ms ease",backgroundColor:"transparent","&:hover":{backgroundColor:fe?"transparent":"rgba(59, 130, 246, 0.18)"},"&:active":{backgroundColor:fe?"transparent":"rgba(59, 130, 246, 0.28)"},opacity:fe?.8:1,cursor:fe?"not-allowed":"pointer"},children:[(0,b.jsx)(J,{sx:{color:fe?"rgba(255,255,255,0.6)":"white",fontSize:{xs:20,sm:19}}}),(0,b.jsx)(d.A,{variant:"body1",fontWeight:700,sx:{whiteSpace:"nowrap",fontSize:{xs:"0.95rem",sm:"0.9rem"}},children:"Buy / Use in installments"})]})}),(0,b.jsx)(G.A,{sx:{width:"100%",borderRadius:"12px",overflow:"hidden",background:"linear-gradient(180deg, #0b1220 0%, #050a14 100%)",boxShadow:"0 10px 24px rgba(0, 0, 0, 0.45), inset 0 1px 0 rgba(255, 255, 255, 0.05)",transition:"transform 160ms ease, box-shadow 160ms ease",display:"flex",alignItems:"stretch","&:hover":{transform:fe?"none":"translateY(-2px)",boxShadow:fe?"0 10px 24px rgba(0, 0, 0, 0.45), inset 0 1px 0 rgba(255, 255, 255, 0.05)":"0 14px 28px rgba(0, 0, 0, 0.55), inset 0 1px 0 rgba(255, 255, 255, 0.06)"},"&:active":{transform:fe?"none":"translateY(-1px)",boxShadow:fe?"0 10px 24px rgba(0, 0, 0, 0.45), inset 0 1px 0 rgba(255, 255, 255, 0.05)":"0 12px 26px rgba(0, 0, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.05)"}},children:(0,b.jsxs)(R.A,{onClick:e=>{e.preventDefault(),e.stopPropagation(),ne(!0)},onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},disabled:fe,sx:{flex:1,minWidth:0,display:"flex",alignItems:"center",justifyContent:"center",gap:1,px:{xs:3,sm:2.75},py:{xs:1.75,sm:1.35},color:fe?"rgba(255,255,255,0.6)":"white",transition:"background-color 160ms ease",backgroundColor:"transparent","&:hover":{backgroundColor:fe?"transparent":"rgba(59, 130, 246, 0.18)"},"&:active":{backgroundColor:fe?"transparent":"rgba(59, 130, 246, 0.28)"},opacity:fe?.8:1,cursor:fe?"not-allowed":"pointer"},children:[(0,b.jsx)(K,{sx:{fontSize:18}}),(0,b.jsx)(d.A,{variant:"body1",fontWeight:700,sx:{whiteSpace:"nowrap",fontSize:{xs:"0.95rem",sm:"0.9rem"}},children:"Book Viewing"})]})})]})]})}),(0,b.jsx)($.A,{open:me,onClose:()=>be(!1),item:{id:a,name:n,price:c,priceGbp:p||c,priceMwk:h||c,image:s,condition:v,description:u||""},customerEmail:null!==(t=null===de||void 0===de?void 0:de.email)&&void 0!==t?t:null}),(0,b.jsx)(pe,{open:ie,onClose:()=>ne(!1),gadgetId:a,gadgetName:n,gadgetImage:s}),(0,b.jsxs)(P.A,{open:w,onClose:()=>S(!1),children:[(0,b.jsx)(Y.A,{children:"Share this item"}),(0,b.jsx)(W.A,{children:(0,b.jsx)(L.A,{fullWidth:!0,label:"Share URL",value:I,InputProps:{readOnly:!0},margin:"normal"})}),(0,b.jsxs)(z.A,{children:[(0,b.jsx)(N.A,{onClick:()=>S(!1),children:"Cancel"}),(0,b.jsx)(N.A,{onClick:async()=>{try{await navigator.clipboard.writeText(I),q("Link copied to clipboard!"),V(!0),S(!1)}catch(e){console.error("Failed to copy link:",e)}},variant:"contained",children:"Copy Link"}),(0,b.jsx)(N.A,{onClick:()=>{window.open(I,"_blank"),S(!1)},variant:"outlined",children:"View in Gadget Detail"})]})]}),(0,b.jsx)(H.A,{open:T,autoHideDuration:3e3,onClose:()=>V(!1),children:(0,b.jsx)(U.A,{onClose:()=>V(!1),severity:"success",children:F})})]})}}}]);